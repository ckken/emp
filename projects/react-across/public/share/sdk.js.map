{"version":3,"sources":["/Users/xuhongbin/Desktop/Develop/empjs/emp-next/packages/emp-share/output/sdk.js","../../../node_modules/.pnpm/@empjs+module-federation-runtime@0.6.10-stable/node_modules/@empjs/module-federation-runtime/dist/polyfills.esm.js","../../../node_modules/.pnpm/@module-federation+sdk@0.6.10/node_modules/@module-federation/sdk/dist/index.esm.js","../../../node_modules/.pnpm/@empjs+module-federation-runtime@0.6.10-stable/node_modules/@empjs/module-federation-runtime/dist/share.esm.js","../../../node_modules/.pnpm/@empjs+module-federation-runtime@0.6.10-stable/node_modules/@empjs/module-federation-runtime/dist/index.esm.js","../src/helper/config.ts","../../../node_modules/.pnpm/@module-federation+sdk@0.6.10/node_modules/@module-federation/sdk/dist/polyfills.esm.js","../src/library/sdk.ts"],"names":["_object_without_properties_loose","source","excluded","target","sourceKeys","Object","keys","key","i","length","indexOf","isBrowserEnv","window","isDebugMode","process","env","FEDERATION_DEBUG","safeToString$1","info","JSON","stringify","safeGetLocalStorageItem","localStorage","getItem","BROWSER_LOG_KEY","BROWSER_LOG_VALUE","document","safeToString","inferAutoPublicPath","url","replace","generateSnapshotFromManifest","manifest","options","_manifest_metaData","_manifest_metaData1","remotes","overrides","version","remoteSnapshot","getPublicPath","metaData","publicPath","overridesKeys","remotesInfo","_manifest_remotes","reduce","res","next","matchedVersion","name","federationContainerName","includes","entry","forEach","remoteEntry","path","remoteEntryPath","remoteEntryName","type","remoteEntryType","types","remoteTypes","buildInfo","buildVersion","globalName","ssrRemoteEntry","exposes","basicRemoteSnapshot","simpleJoinRemoteEntry","remoteTypesZip","zip","remoteTypesAPI","api","shared","map","item","assets","sharedName","modules","expose","moduleName","modulePath","prefetchInterface","_extends","prefetchEntry","prefetchEntryType","fullSSRRemoteEntry","ssrRemoteEntryType","isManifestProvider","moduleInfo","MANIFEST_EXT","safeWrapper","callback","disableWarn","isStaticResourcesEqual","url1","url2","REG_EXP","relativeUrl1","relativeUrl2","createScript","script","needAttach","timeout","timeoutId","scripts","getElementsByTagName","s","scriptSrc","getAttribute","attrs","createElement","src","createScriptRes","createScriptHook","HTMLScriptElement","setAttribute","onScriptComplete","prev","event","_info_cb","_info_cb1","result","_info_cb2","clearTimeout","onerror","onload","needDeleteScript","parentNode","removeChild","Promise","cb","call","bind","setTimeout","Error","createLink","link","links","l","linkHref","linkRef","ref","createLinkRes","createLinkHook","HTMLLinkElement","onLinkComplete","needDeleteLink","loadScript","resolve","_reject","fetchpriority","head","appendChild","importNodeModule","Function","then","catch","error","console","createScriptNode","hookResult","urlObj","URL","e","getFetch","__webpack_require__","federation","instance","loaderHook","lifecycle","fetch","lazyLoaderHookFetch","warn","loadNodeFetch","handleScriptFetch","f","_vm_constants","data","vm","scriptContext","urlDirname","filename","_vm_constants_USE_MAIN_CONTEXT_DEFAULT_LOADER","exportedInterface","container","href","text","all","exports","module","pathname","split","slice","join","basename","Script","importModuleDynamically","constants","USE_MAIN_CONTEXT_DEFAULT_LOADER","runInThisContext","eval","loadModule","evaluate","namespace","err","loadScriptNode","reject","_info_attrs","_info_attrs1","remoteEntryKey","entryExports","globalThis","normalizeOptions","enableDefault","defaultOptions","getBuilderId","FEDERATION_BUILD_IDENTIFIER","assert","condition","msg","message","LOG_CATEGORY","addUniqueItem","arr","findIndex","push","getFMId","remoteInfo","isRemoteInfoWithEntry","remote","isPureRemoteEntry","isObject","val","isPlainObject","objectToString","arrayOptions","Array","isArray","getRemoteEntryInfoFromSnapshot","snapshot","defaultRemoteEntryInfo","definePropertyGlobalVal","defineProperty","value","configurable","writable","includeOwnProperty","hasOwnProperty","setGlobalDefaultVal","_target___FEDERATION__","_target___FEDERATION__1","_target___FEDERATION__2","_target___FEDERATION__3","_target___FEDERATION__4","_target___FEDERATION__5","__VMOK__","__GLOBAL_PLUGIN__","__INSTANCES__","__SHARE__","__MANIFEST_LOADING__","__PRELOADED_MAP__","Map","__FEDERATION__","___GLOBAL_PLUGIN__","___INSTANCES__","_moduleInfo","___SHARE__","___MANIFEST_LOADING__","___PRELOADED_MAP__","getGlobalFederationInstance","buildId","find","GMInstance","id","setGlobalFederationInstance","FederationInstance","getGlobalFederationConstructor","__DEBUG_CONSTRUCTOR__","setGlobalFederationConstructor","FederationConstructor","isDebug","__DEBUG_CONSTRUCTOR_VERSION__","getInfoWithoutType","targetKeys","targetKey","targetTypeOrName","_","nKey","typeWithKeyRes","parseRegex","RegExp","isXVersion","toLowerCase","pipe","fns","x","v","extractComparator","comparatorString","match","comparator","combineVersion","major","minor","patch","preRelease","mainVersion","parseHyphen","range","hyphenRange","_range","from","fromMajor","fromMinor","fromPatch","_fromPreRelease","_fromBuild","to","toMajor","toMinor","toPatch","toPreRelease","Number","trim","parseComparatorTrim","comparatorTrim","parseTildeTrim","tildeTrim","parseCaretTrim","caretTrim","parseCarets","rangeVersion","caret","parseTildes","tilde","parseXRanges","xRange","ret","gtlt","isXMajor","isXMinor","isXPatch","parseStar","star","parseGTE0","gte0","compareAtom","rangeAtom","versionAtom","comparePreRelease","rangePreRelease","versionPreRelease","n","rangeElement","versionElement","compareVersion","eq","compare","operator","parseComparatorString","parseRange","satisfy","comparators","extractedVersion","versionOperator","versionMajor","versionMinor","versionPatch","extractedComparator","rangeOperator","rangeMajor","rangeMinor","rangePatch","formatShare","shareArgs","shareStrategy","get","lib","strategy","_shareArgs_version","_shareArgs_scope","_shareArgs_strategy","deps","useIn","loading","shareConfig","requiredVersion","singleton","eager","strictVersion","loaded","scope","formatShareConfigs","globalOptions","userOptions","shareInfos","pkgName","arrayShareArgs","shareKey","newUserSharedOptions","sharedVal","versionLt","a","b","transformInvalidVersion","isNaN","splitArr","validVersion","findSingletonVersionOrderByVersion","shareScopeMap","versions","cur","isLoaded","findVersion","findSingletonVersionOrderByLoaded","getFindShareFunction","getRegisteredShare","localShareScopeMap","shareInfo","resolveShare","DEFAULT_SCOPE","scopes","sc","maxOrSingletonVersion","defaultResolver","entries","versionKey","versionValue","params","GlobalFederation","Global","resolver","emit","getGlobalShareScope","getTargetSharedOptions","extraOptions","sharedOptions","shareVersionMap","maxVersion","_extraOptions_resolver","assign","customShareInfo","matchRemoteWithNameAndExpose","isNameMatched","startsWith","pkgNameOrAlias","isAliasMatched","alias","exposeWithAlias","matchRemote","nameOrAlias","registerPlugins$1","plugins","hookInstances","globalPlugins","getGlobalHostPlugins","plugin","hookInstance","applyPlugin","loadEsmEntry","loadSystemJsEntry","loadEntryScript","loadEntryDom","loadEntryNode","getRemoteEntryUniqueKey","composeKeyWithSeparator","getRemoteEntry","getRemoteInfo","DEFAULT_REMOTE_TYPE","entryGlobalName","shareScope","checkReturnData","originalData","returnedData","defaultPreloadArgs","preloadConfig","resourceCategory","share","depsRemote","formatPreloadArgs","preloadArgs","args","normalizePreloadExposes","preloadAssets","host","useLinkPreload","cssAssets","jsAssetsWithoutEntry","entryAssets","inBrowser","asset","moduleCache","origin","remoteEntryExports","defaultAttrs","rel","as","cssUrl","cssEl","jsUrl","linkEl","scriptEl","assignRemoteInfo","remoteEntryInfo","entryUrl","getResourceUrl","snapshotPlugin","afterResolve","globalSnapshot","preloadOptions","snapshotHandler","loadRemoteSnapshotInfo","remoteHandler","hooks","generatePreloadAssets","splitId","splitInfo","jsAssets","loadedSharedJsAssets","Set","loadedSharedCssAssets","rootPreloadConfig","traverseModuleInfo","moduleInfoSnapshot","isRoot","handleAssets","assetsRes","filter","findPreloadConfig","remoteConfig","remoteEntryUrl","moduleAssetsInfo","normalizedPreloadExposes","_moduleInfoSnapshot_modules","moduleAssetInfo","assetsLength","index","assetsInfo","exposeFullPath","handlePreloadModule","getPreloaded","css","async","sync","js","setPreloaded","collectSharedAssets","snapshotShared","registeredShared","sharedHandler","add","_options_shared","needPreloadJsAssets","has","getGlobalRemoteInfo","hostGlobalSnapshot","getGlobalSnapshotInfoByModuleInfo","globalRemoteInfo","getGlobalSnapshot","init","initOptions","FederationHost","loadRemote","apply","loadShare","loadShareSync","preloadRemote","registerRemotes","registerPlugins","getInstance","Wt","it","t","r","enumerable","shareGlobalName","index_esm_exports","__export","Module","registerGlobalPlugins","arguments","prototype","ENCODE_NAME_PREFIX","EncodedNameTransformMap","FederationModuleManifest","Logger","MFModuleType","MFPrefetchCommon","MODULE_DEVTOOL_IDENTIFIER","ManifestFileName","NameTransformMap","NameTransformSymbol","SEPARATOR","StatsFileName","TEMP_DIR","containerPlugin","ContainerPlugin","containerReferencePlugin","ContainerReferencePlugin","decodeName","encodeName","generateExposeFilename","generateShareFilename","getProcessEnv","logger","moduleFederationPlugin","ModuleFederationPlugin","parseEntry","sharePlugin","SharePlugin","AT","HYPHEN","SLASH","NPM","APP","identifier","globalKey","library","exportsKey","fileName","freeze","__proto__","DEBUG_LOG","enable","argsToString","logOriginalInfo","log","str","devVerOrUrl","separator","strSplit","devVersionOrUrl","NODE_ENV","defaultVersion","isEntry","versionOrEntryArr","versionOrEntry","sum","prefix","withExt","ext","decodedName","exposeName","sourceUrl","rPath","rName","transformedPath","strWithoutSlash","endsWith","fetchModule","default","input","loaderHooks","Response","fetch1","code","SourceTextModule","specifier","resolvedUrl","toString","nativeGlobal","globalLoading","__GLOBAL_LOADING_REMOTE_ENTRY__","getTargetSnapshotInfoByModuleInfo","moduleKey","getModuleInfo","resModuleInfo","moduleKeyWithoutVersion","getModuleInfoWithoutVersion","setGlobalSnapshotInfoByModuleInfo","moduleDetailInfo","addGlobalSnapshot","moduleInfos","getRemoteEntryExports","p","set","buildIdentifier","build","numericIdentifier","numericIdentifierLoose","nonNumericIdentifier","preReleaseIdentifierLoose","preReleaseLoose","preReleaseIdentifier","xRangeIdentifier","xRangePlain","mainVersionLoose","loosePlain","loneTilde","loneCaret","fullPlain","uniqueKey","loadEntryHook","loadEntry","inited","getEntry","loadFactory","remoteShareScope","initScope","remoteEntryInitOptions","initContainerOptions","moduleFactory","wrapModuleFactory","beforeInitContainer","initContainer","wraperFactory","defineModuleId","isExtensible","getOwnPropertyDescriptor","Symbol","for","SyncHook","listeners","on","fn","once","self","wrapper","remove","size","delete","removeAll","clear","AsyncHook","ls","SyncWaterfallHook","tempData","AsyncWaterfallHook","processError","prevData","PluginSystem","lifecycleKeys","pluginName","pluginLife","removePlugin","inherit","hookName","traverse","memo","snapshotValue","effectiveRemoteSnapshot","remoteKeys","subRemoteInfo","remoteValue","generatePreloadAssetsPlugin","SnapshotHandler","HostInstance","loadingHostSnapshot","manifestCache","beforeLoadRemoteSnapshot","loadSnapshot","loadRemoteSnapshot","manifestLoading","globalRemoteSnapshot","globalSnapshotRes","hostSnapshot","moduleSnapshot","remoteSnapshotRes","getManifestJson","manifestUrl","getManifest","asyncLoadProcess","manifestJson","json","SharedHandler","beforeLoadShare","initContainerShareScopeMap","initTokens","_setGlobalShareScopeMap","registerShared","sharedKey","setShared","loadShareRes","shareInfoRes","addUseIn","factory","initializeSharing","gShared","shareScopeName","promises","initToken","hostName","register","_activeVersion_shareConfig","activeVersion","activeVersionEager","initFn","mod","initRemoteModule","getRemoteModuleAndOptions","errorLoadRemote","shareName","initShareScopeMap","scopeName","hostShareScopeMap","hostOptions","globalShareScopeMap","RemoteHandler","beforeRegisterRemote","registerRemote","beforeRequest","onLoad","beforePreloadRemote","afterPreloadRemote","idToRemoteMap","formatAndRegisterRemote","force","setIdToRemoteMap","remoteMatchInfo","idWithAlias","idWithName","moduleOptions","idRes","moduleOrFactory","moduleWrapper","failOver","exposeModule","exposeModuleFactory","moduleInstance","preloadOps","ops","loadRemoteArgs","remoteSplitInfo","rawRemote","matchInfo","targetRemotes","normalizeRemote","findEqual","_item_alias","location","registeredRemote","messages","removeRemote","remoteIndex","splice","loadedModule","_Object_getOwnPropertyDescriptor","remoteEntryUniqueKey","remoteInsId","remoteInsIndex","ins","remoteIns","isAllSharedNotUsed","needDeleteKeys","instId","shareScopeVal","sharedPkgs","shareVersion","usedHostName","insId","_globalShareScopeMap_insId_shareScope_shareName","_globalShareScopeMap_insId_shareScope","_globalShareScopeMap_insId","remoteKey","beforeInit","formatOptions","initRawContainer","userOptionsRes","globalOptionsRes","handledShared","optionsRes","pluginRes","MFRuntime","MFSDK"],"mappings":"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","sourcesContent":["\"use strict\";(()=>{var Wt=Object.defineProperty;var it=(t,e)=>{for(var r in e)Wt(t,r,{get:e[r],enumerable:!0})};var at=\"EMP_SHARE_RUNTIME\";var Le={};it(Le,{FederationHost:()=>ue,Module:()=>st,getInstance:()=>yr,getRemoteEntry:()=>Pe,getRemoteInfo:()=>Ne,init:()=>ur,loadRemote:()=>fr,loadScript:()=>re,loadScriptNode:()=>oe,loadShare:()=>hr,loadShareSync:()=>dr,preloadRemote:()=>pr,registerGlobalPlugins:()=>At,registerPlugins:()=>mr,registerRemotes:()=>_r});function O(){return O=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},O.apply(this,arguments)}function fe(t,e){if(t==null)return{};var r={},n=Object.keys(t),o,i;for(i=0;i<n.length;i++)o=n[i],!(e.indexOf(o)>=0)&&(r[o]=t[o]);return r}var be={};it(be,{BROWSER_LOG_KEY:()=>lt,BROWSER_LOG_VALUE:()=>ct,ENCODE_NAME_PREFIX:()=>Xt,EncodedNameTransformMap:()=>he,FederationModuleManifest:()=>Kt,Logger:()=>ft,MANIFEST_EXT:()=>Me,MFModuleType:()=>Yt,MFPrefetchCommon:()=>Qt,MODULE_DEVTOOL_IDENTIFIER:()=>Jt,ManifestFileName:()=>qt,NameTransformMap:()=>N,NameTransformSymbol:()=>T,SEPARATOR:()=>ke,StatsFileName:()=>zt,TEMP_DIR:()=>Zt,assert:()=>dn,composeKeyWithSeparator:()=>pe,containerPlugin:()=>en,containerReferencePlugin:()=>tn,createLink:()=>ne,createScript:()=>Ee,createScriptNode:()=>mt,decodeName:()=>un,encodeName:()=>Ce,error:()=>dt,generateExposeFilename:()=>fn,generateShareFilename:()=>hn,generateSnapshotFromManifest:()=>xe,getProcessEnv:()=>ut,getResourceUrl:()=>te,inferAutoPublicPath:()=>pt,isBrowserEnv:()=>D,isDebugMode:()=>de,isManifestProvider:()=>ye,isStaticResourcesEqual:()=>Ge,loadScript:()=>re,loadScriptNode:()=>oe,logger:()=>cn,moduleFederationPlugin:()=>nn,normalizeOptions:()=>_n,parseEntry:()=>ln,safeToString:()=>me,safeWrapper:()=>He,sharePlugin:()=>rn,simpleJoinRemoteEntry:()=>Q,warn:()=>_e});function j(){return j=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},j.apply(this,arguments)}var Kt=\"federation-manifest.json\",Me=\".json\",lt=\"FEDERATION_DEBUG\",ct=\"1\",T={AT:\"@\",HYPHEN:\"-\",SLASH:\"/\"},N={[T.AT]:\"scope_\",[T.HYPHEN]:\"_\",[T.SLASH]:\"__\"},he={[N[T.AT]]:T.AT,[N[T.HYPHEN]]:T.HYPHEN,[N[T.SLASH]]:T.SLASH},ke=\":\",qt=\"mf-manifest.json\",zt=\"mf-stats.json\",Yt={NPM:\"npm\",APP:\"app\"},Jt=\"__MF_DEVTOOLS_MODULE_INFO__\",Xt=\"ENCODE_NAME_PREFIX\",Zt=\".federation\",Qt={identifier:\"MFDataPrefetch\",globalKey:\"__PREFETCH__\",library:\"mf-data-prefetch\",exportsKey:\"__PREFETCH_EXPORTS__\",fileName:\"bootstrap.js\"},en=Object.freeze({__proto__:null}),tn=Object.freeze({__proto__:null}),nn=Object.freeze({__proto__:null}),rn=Object.freeze({__proto__:null});function D(){return typeof window<\"u\"}function de(){return typeof process<\"u\"&&process.env&&process.env.FEDERATION_DEBUG?!!process.env.FEDERATION_DEBUG:typeof FEDERATION_DEBUG<\"u\"&&!!FEDERATION_DEBUG}var ut=function(){return typeof process<\"u\"&&process.env?process.env:{}},on=\"[ FEDERATION DEBUG ]\";function sn(t){try{return JSON.stringify(t,null,2)}catch{return\"\"}}function an(){try{if(typeof window<\"u\"&&window.localStorage)return localStorage.getItem(lt)===ct}catch{return typeof document<\"u\"}return!1}var ft=class{info(e,r){if(this.enable){let n=sn(r)||\"\";D()?console.info(`%c ${this.identifier}: ${e} ${n}`,\"color:#3300CC\"):console.info(\"\\x1B[34m%s\",`${this.identifier}: ${e} ${n?`\n${n}`:\"\"}`)}}logOriginalInfo(...e){this.enable&&(D()?(console.info(`%c ${this.identifier}: OriginalInfo`,\"color:#3300CC\"),console.log(...e)):(console.info(`%c ${this.identifier}: OriginalInfo`,\"color:#3300CC\"),console.log(...e)))}constructor(e){this.enable=!1,this.identifier=e||on,D()&&an()?this.enable=!0:de()&&(this.enable=!0)}},ht=\"[ Federation Runtime ]\",ln=(t,e,r=ke)=>{let n=t.split(r),o=ut().NODE_ENV===\"development\"&&e,i=\"*\",a=s=>s.startsWith(\"http\")||s.includes(Me);if(n.length>=2){let[s,...l]=n;t.startsWith(r)&&(l=[o||n.slice(-1)[0]],s=n.slice(0,-1).join(r));let c=o||l.join(r);return a(c)?{name:s,entry:c}:{name:s,version:c||i}}else if(n.length===1){let[s]=n;return o&&a(o)?{name:s,entry:o}:{name:s,version:o||i}}else throw`Invalid entry value: ${t}`},cn=new ft,pe=function(...t){return t.length?t.reduce((e,r)=>r?e?`${e}${ke}${r}`:r:e,\"\"):\"\"},Ce=function(t,e=\"\",r=!1){try{let n=r?\".js\":\"\";return`${e}${t.replace(new RegExp(`${T.AT}`,\"g\"),N[T.AT]).replace(new RegExp(`${T.HYPHEN}`,\"g\"),N[T.HYPHEN]).replace(new RegExp(`${T.SLASH}`,\"g\"),N[T.SLASH])}${n}`}catch(n){throw n}},un=function(t,e,r){try{let n=t;if(e){if(!n.startsWith(e))return n;n=n.replace(new RegExp(e,\"g\"),\"\")}return n=n.replace(new RegExp(`${N[T.AT]}`,\"g\"),he[N[T.AT]]).replace(new RegExp(`${N[T.SLASH]}`,\"g\"),he[N[T.SLASH]]).replace(new RegExp(`${N[T.HYPHEN]}`,\"g\"),he[N[T.HYPHEN]]),r&&(n=n.replace(\".js\",\"\")),n}catch(n){throw n}},fn=(t,e)=>{if(!t)return\"\";let r=t;return r===\".\"&&(r=\"default_export\"),r.startsWith(\"./\")&&(r=r.replace(\"./\",\"\")),Ce(r,\"__federation_expose_\",e)},hn=(t,e)=>t?Ce(t,\"__federation_shared_\",e):\"\",te=(t,e)=>{if(\"getPublicPath\"in t){let r;return t.getPublicPath.startsWith(\"function\")?r=new Function(\"return \"+t.getPublicPath)()():r=new Function(t.getPublicPath)(),`${r}${e}`}else return\"publicPath\"in t?`${t.publicPath}${e}`:(console.warn(\"Cannot get resource URL. If in debug mode, please ignore.\",t,e),\"\")},dn=(t,e)=>{t||dt(e)},dt=t=>{throw new Error(`${ht}: ${t}`)},_e=t=>{console.warn(`${ht}: ${t}`)};function me(t){try{return JSON.stringify(t,null,2)}catch{return\"\"}}var Q=(t,e)=>{if(!t)return e;let n=(o=>{if(o===\".\")return\"\";if(o.startsWith(\"./\"))return o.replace(\"./\",\"\");if(o.startsWith(\"/\")){let i=o.slice(1);return i.endsWith(\"/\")?i.slice(0,-1):i}return o})(t);return n?n.endsWith(\"/\")?`${n}${e}`:`${n}/${e}`:e};function pt(t){return t.replace(/#.*$/,\"\").replace(/\\?.*$/,\"\").replace(/\\/[^\\/]+$/,\"/\")}function xe(t,e={}){var r,n;let{remotes:o={},overrides:i={},version:a}=e,s,l=()=>\"publicPath\"in t.metaData?t.metaData.publicPath===\"auto\"&&a?pt(a):t.metaData.publicPath:t.metaData.getPublicPath,c=Object.keys(i),u={};if(!Object.keys(o).length){var d;u=((d=t.remotes)==null?void 0:d.reduce((y,I)=>{let A,w=I.federationContainerName;return c.includes(w)?A=i[w]:\"version\"in I?A=I.version:A=I.entry,y[w]={matchedVersion:A},y},{}))||{}}Object.keys(o).forEach(y=>u[y]={matchedVersion:c.includes(y)?i[y]:o[y]});let{remoteEntry:{path:h,name:p,type:m},types:E,buildInfo:{buildVersion:_},globalName:b,ssrRemoteEntry:R}=t.metaData,{exposes:S}=t,g={version:a||\"\",buildVersion:_,globalName:b,remoteEntry:Q(h,p),remoteEntryType:m,remoteTypes:Q(E.path,E.name),remoteTypesZip:E.zip||\"\",remoteTypesAPI:E.api||\"\",remotesInfo:u,shared:t?.shared.map(y=>({assets:y.assets,sharedName:y.name,version:y.version})),modules:S?.map(y=>({moduleName:y.name,modulePath:y.path,assets:y.assets}))};if((r=t.metaData)!=null&&r.prefetchInterface){let y=t.metaData.prefetchInterface;g=j({},g,{prefetchInterface:y})}if((n=t.metaData)!=null&&n.prefetchEntry){let{path:y,name:I,type:A}=t.metaData.prefetchEntry;g=j({},g,{prefetchEntry:Q(y,I),prefetchEntryType:A})}if(\"publicPath\"in t.metaData?s=j({},g,{publicPath:l()}):s=j({},g,{getPublicPath:l()}),R){let y=Q(R.path,R.name);s.ssrRemoteEntry=y,s.ssrRemoteEntryType=R.type||\"commonjs-module\"}return s}function ye(t){return!!(\"remoteEntry\"in t&&t.remoteEntry.includes(Me))}async function He(t,e){try{return await t()}catch(r){!e&&_e(r);return}}function Ge(t,e){let r=/^(https?:)?\\/\\//i,n=t.replace(r,\"\").replace(/\\/$/,\"\"),o=e.replace(r,\"\").replace(/\\/$/,\"\");return n===o}function Ee(t){let e=null,r=!0,n=2e4,o,i=document.getElementsByTagName(\"script\");for(let s=0;s<i.length;s++){let l=i[s],c=l.getAttribute(\"src\");if(c&&Ge(c,t.url)){e=l,r=!1;break}}if(!e){let s=t.attrs;e=document.createElement(\"script\"),e.type=s?.type===\"module\"?\"module\":\"text/javascript\",e.src=t.url;let l;t.createScriptHook&&(l=t.createScriptHook(t.url,t.attrs),l instanceof HTMLScriptElement?e=l:typeof l==\"object\"&&(\"script\"in l&&l.script&&(e=l.script),\"timeout\"in l&&l.timeout&&(n=l.timeout))),s&&!l&&Object.keys(s).forEach(c=>{e&&(c===\"async\"||c===\"defer\"?e[c]=s[c]:e.getAttribute(c)||e.setAttribute(c,s[c]))})}let a=async(s,l)=>{var c;if(clearTimeout(o),e&&(e.onerror=null,e.onload=null,He(()=>{let{needDeleteScript:h=!0}=t;h&&e?.parentNode&&e.parentNode.removeChild(e)}),s&&typeof s==\"function\")){var u;let h=s(l);if(h instanceof Promise){var d;let p=await h;return t==null||(d=t.cb)==null||d.call(t),p}return t==null||(u=t.cb)==null||u.call(t),h}t==null||(c=t.cb)==null||c.call(t)};return e.onerror=a.bind(null,e.onerror),e.onload=a.bind(null,e.onload),o=setTimeout(()=>{a(null,new Error(`Remote script \"${t.url}\" time-outed.`))},n),{script:e,needAttach:r}}function ne(t){let e=null,r=!0,n=document.getElementsByTagName(\"link\");for(let i=0;i<n.length;i++){let a=n[i],s=a.getAttribute(\"href\"),l=a.getAttribute(\"ref\");if(s&&Ge(s,t.url)&&l===t.attrs.ref){e=a,r=!1;break}}if(!e){e=document.createElement(\"link\"),e.setAttribute(\"href\",t.url);let i,a=t.attrs;t.createLinkHook&&(i=t.createLinkHook(t.url,a),i instanceof HTMLLinkElement&&(e=i)),a&&!i&&Object.keys(a).forEach(s=>{e&&!e.getAttribute(s)&&e.setAttribute(s,a[s])})}let o=(i,a)=>{if(e&&(e.onerror=null,e.onload=null,He(()=>{let{needDeleteLink:s=!0}=t;s&&e?.parentNode&&e.parentNode.removeChild(e)}),i)){let s=i(a);return t.cb(),s}t.cb()};return e.onerror=o.bind(null,e.onerror),e.onload=o.bind(null,e.onload),{link:e,needAttach:r}}function re(t,e){let{attrs:r={},createScriptHook:n}=e;return new Promise((o,i)=>{let{script:a,needAttach:s}=Ee({url:t,cb:o,attrs:j({fetchpriority:\"high\"},r),createScriptHook:n,needDeleteScript:!0});s&&document.head.appendChild(a)})}function ee(t){if(!t)throw new Error(\"import specifier is required\");return new Function(\"name\",\"return import(name)\")(t).then(r=>r).catch(r=>{throw console.error(`Error importing module ${t}:`,r),r})}var _t=async()=>{let t=await ee(\"node-fetch\");return t.default||t},pn=async(t,e)=>{let r=__webpack_require__.federation.instance.loaderHook,o=await((i,a)=>r.lifecycle.fetch.emit(i,a))(t,e||{});return!o||!(o instanceof Response)?(typeof fetch>\"u\"?await _t():fetch)(t,e||{}):o};function mt(url,cb,attrs,createScriptHook){if(createScriptHook){let t=createScriptHook(url);t&&typeof t==\"object\"&&\"url\"in t&&(url=t.url)}let urlObj;try{urlObj=new URL(url)}catch(t){console.error(\"Error constructing URL:\",t),cb(new Error(`Invalid URL: ${t}`));return}let getFetch=async()=>{if(typeof __webpack_require__<\"u\")try{if(__webpack_require__.federation.instance.loaderHook.lifecycle.fetch)return pn}catch(t){console.warn(\"federation.instance.loaderHook.lifecycle.fetch failed:\",t)}return typeof fetch>\"u\"?_t():fetch},handleScriptFetch=async(f,urlObj)=>{try{var _vm_constants;let res=await f(urlObj.href),data=await res.text(),[path,vm]=await Promise.all([ee(\"path\"),ee(\"vm\")]),scriptContext={exports:{},module:{exports:{}}},urlDirname=urlObj.pathname.split(\"/\").slice(0,-1).join(\"/\"),filename=path.basename(urlObj.pathname);var _vm_constants_USE_MAIN_CONTEXT_DEFAULT_LOADER;let script=new vm.Script(`(function(exports, module, require, __dirname, __filename) {${data}\n})`,{filename,importModuleDynamically:(_vm_constants_USE_MAIN_CONTEXT_DEFAULT_LOADER=(_vm_constants=vm.constants)==null?void 0:_vm_constants.USE_MAIN_CONTEXT_DEFAULT_LOADER)!=null?_vm_constants_USE_MAIN_CONTEXT_DEFAULT_LOADER:ee});script.runInThisContext()(scriptContext.exports,scriptContext.module,eval(\"require\"),urlDirname,filename);let exportedInterface=scriptContext.module.exports||scriptContext.exports;if(attrs&&exportedInterface&&attrs.globalName){let t=exportedInterface[attrs.globalName]||exportedInterface;cb(void 0,t);return}cb(void 0,exportedInterface)}catch(t){cb(t instanceof Error?t:new Error(`Script execution error: ${t}`))}};getFetch().then(async t=>{if(attrs?.type===\"esm\"||attrs?.type===\"module\")return Fe(urlObj.href,{fetch:t,vm:await ee(\"vm\")}).then(async e=>{await e.evaluate(),cb(void 0,e.namespace)}).catch(e=>{cb(e instanceof Error?e:new Error(`Script execution error: ${e}`))});handleScriptFetch(t,urlObj)}).catch(t=>{cb(t)})}function oe(t,e){return new Promise((r,n)=>{mt(t,(o,i)=>{if(o)n(o);else{var a,s;let l=(e==null||(a=e.attrs)==null?void 0:a.globalName)||`__FEDERATION_${e==null||(s=e.attrs)==null?void 0:s.name}:custom__`,c=globalThis[l]=i;r(c)}},e.attrs,e.createScriptHook)})}async function Fe(t,e){let{fetch:r,vm:n}=e,i=await(await r(t)).text(),a=new n.SourceTextModule(i,{importModuleDynamically:async(s,l)=>{let c=new URL(s,t).href;return Fe(c,e)}});return await a.link(async s=>{let l=new URL(s,t).href;return await Fe(l,e)}),a}function _n(t,e,r){return function(n){if(n===!1)return!1;if(typeof n>\"u\")return t?e:!1;if(n===!0)return e;if(n&&typeof n==\"object\")return j({},e,n);throw new Error(`Unexpected type for \\`${r}\\`, expect boolean/undefined/object, got: ${typeof n}`)}}function Ie(){return typeof FEDERATION_BUILD_IDENTIFIER<\"u\"?FEDERATION_BUILD_IDENTIFIER:\"\"}var we=\"[ Federation Runtime ]\";function v(t,e){t||x(e)}function x(t){throw t instanceof Error?(t.message=`${we}: ${t.message}`,t):new Error(`${we}: ${t}`)}function Y(t){t instanceof Error?(t.message=`${we}: ${t.message}`,console.warn(t)):console.warn(`${we}: ${t}`)}function Ve(t,e){return t.findIndex(r=>r===e)===-1&&t.push(e),t}function q(t){return\"version\"in t&&t.version?`${t.name}:${t.version}`:\"entry\"in t&&t.entry?`${t.name}:${t.entry}`:`${t.name}`}function Oe(t){return typeof t.entry<\"u\"}function Be(t){return!t.entry.includes(\".json\")&&t.entry.includes(\".js\")}function Ae(t){return t&&typeof t==\"object\"}var mn=Object.prototype.toString;function Rt(t){return mn.call(t)===\"[object Object]\"}function We(t){return Array.isArray(t)?t:[t]}function Ke(t){let e={url:\"\",type:\"global\",globalName:\"\"};return D()?\"remoteEntry\"in t?{url:t.remoteEntry,type:t.remoteEntryType,globalName:t.globalName}:e:\"ssrRemoteEntry\"in t?{url:t.ssrRemoteEntry||e.url,type:t.ssrRemoteEntryType||e.type,globalName:t.globalName}:e}var F=(()=>{try{return new Function(\"return this\")()}catch{return globalThis}})(),J=F;function Se(t,e,r){Object.defineProperty(t,e,{value:r,configurable:!1,writable:!0})}function Re(t,e){return Object.hasOwnProperty.call(t,e)}Re(globalThis,\"__GLOBAL_LOADING_REMOTE_ENTRY__\")||Se(globalThis,\"__GLOBAL_LOADING_REMOTE_ENTRY__\",{});var X=globalThis.__GLOBAL_LOADING_REMOTE_ENTRY__;function $t(t){var e,r,n,o,i,a;Re(t,\"__VMOK__\")&&!Re(t,\"__FEDERATION__\")&&Se(t,\"__FEDERATION__\",t.__VMOK__),Re(t,\"__FEDERATION__\")||(Se(t,\"__FEDERATION__\",{__GLOBAL_PLUGIN__:[],__INSTANCES__:[],moduleInfo:{},__SHARE__:{},__MANIFEST_LOADING__:{},__PRELOADED_MAP__:new Map}),Se(t,\"__VMOK__\",t.__FEDERATION__));var s;(s=(e=t.__FEDERATION__).__GLOBAL_PLUGIN__)!=null||(e.__GLOBAL_PLUGIN__=[]);var l;(l=(r=t.__FEDERATION__).__INSTANCES__)!=null||(r.__INSTANCES__=[]);var c;(c=(n=t.__FEDERATION__).moduleInfo)!=null||(n.moduleInfo={});var u;(u=(o=t.__FEDERATION__).__SHARE__)!=null||(o.__SHARE__={});var d;(d=(i=t.__FEDERATION__).__MANIFEST_LOADING__)!=null||(i.__MANIFEST_LOADING__={});var h;(h=(a=t.__FEDERATION__).__PRELOADED_MAP__)!=null||(a.__PRELOADED_MAP__=new Map)}$t(globalThis);$t(F);function vt(t,e){let r=Ie();return globalThis.__FEDERATION__.__INSTANCES__.find(n=>!!(r&&n.options.id===Ie()||n.options.name===t&&!n.options.version&&!e||n.options.name===t&&e&&n.options.version===e))}function Tt(t){globalThis.__FEDERATION__.__INSTANCES__.push(t)}function It(){return globalThis.__FEDERATION__.__DEBUG_CONSTRUCTOR__}function wt(t,e=de()){e&&(globalThis.__FEDERATION__.__DEBUG_CONSTRUCTOR__=t,globalThis.__FEDERATION__.__DEBUG_CONSTRUCTOR_VERSION__=\"0.6.10\")}function V(t,e){if(typeof e==\"string\"){if(t[e])return{value:t[e],key:e};{let n=Object.keys(t);for(let o of n){let[i,a]=o.split(\":\"),s=`${i}:${e}`,l=t[s];if(l)return{value:l,key:s}}return{value:void 0,key:e}}}else throw new Error(\"key must be string\")}var qe=()=>F.__FEDERATION__.moduleInfo,yn=(t,e)=>{let r=q(t),n=V(e,r).value;if(n&&!n.version&&\"version\"in t&&t.version&&(n.version=t.version),n)return n;if(\"version\"in t&&t.version){let{version:o}=t,i=fe(t,[\"version\"]),a=q(i),s=V(F.__FEDERATION__.moduleInfo,a).value;if(s?.version===o)return s}},le=t=>yn(t,F.__FEDERATION__.moduleInfo),ze=(t,e)=>{let r=q(t);return F.__FEDERATION__.moduleInfo[r]=e,F.__FEDERATION__.moduleInfo},Ot=t=>(F.__FEDERATION__.moduleInfo=O({},F.__FEDERATION__.moduleInfo,t),()=>{let e=Object.keys(t);for(let r of e)delete F.__FEDERATION__.moduleInfo[r]}),ce=(t,e)=>{let r=e||`__FEDERATION_${t}:custom__`,n=globalThis[r];return{remoteEntryKey:r,entryExports:n}},At=t=>{let{__GLOBAL_PLUGIN__:e}=F.__FEDERATION__;t.forEach(r=>{e.findIndex(n=>n.name===r.name)===-1?e.push(r):Y(`The plugin ${r.name} has been registered.`)})},Pt=()=>F.__FEDERATION__.__GLOBAL_PLUGIN__,Nt=t=>globalThis.__FEDERATION__.__PRELOADED_MAP__.get(t),Lt=t=>globalThis.__FEDERATION__.__PRELOADED_MAP__.set(t,!0),Z=\"default\",Ye=\"global\",yt=\"[0-9A-Za-z-]+\",Je=`(?:\\\\+(${yt}(?:\\\\.${yt})*))`,se=\"0|[1-9]\\\\d*\",$e=\"[0-9]+\",Dt=\"\\\\d*[a-zA-Z-][a-zA-Z0-9-]*\",Et=`(?:${$e}|${Dt})`,En=`(?:-?(${Et}(?:\\\\.${Et})*))`,bt=`(?:${se}|${Dt})`,Ft=`(?:-(${bt}(?:\\\\.${bt})*))`,je=`${se}|x|X|\\\\*`,z=`[v=\\\\s]*(${je})(?:\\\\.(${je})(?:\\\\.(${je})(?:${Ft})?${Je}?)?)?`,bn=`^\\\\s*(${z})\\\\s+-\\\\s+(${z})\\\\s*$`,gn=`(${$e})\\\\.(${$e})\\\\.(${$e})`,Sn=`[v=\\\\s]*${gn}${En}?${Je}?`,Xe=\"((?:<|>)?=?)\",Rn=`(\\\\s*)${Xe}\\\\s*(${Sn}|${z})`,Mt=\"(?:~>?)\",$n=`(\\\\s*)${Mt}\\\\s+`,kt=\"(?:\\\\^)\",vn=`(\\\\s*)${kt}\\\\s+`,Tn=\"(<|>)?=?\\\\s*\\\\*\",In=`^${kt}${z}$`,wn=`(${se})\\\\.(${se})\\\\.(${se})`,On=`v?${wn}${Ft}?${Je}?`,An=`^${Mt}${z}$`,Pn=`^${Xe}\\\\s*${z}$`,Nn=`^${Xe}\\\\s*(${On})$|^$`,Ln=\"^\\\\s*>=\\\\s*0.0.0\\\\s*$\";function H(t){return new RegExp(t)}function P(t){return!t||t.toLowerCase()===\"x\"||t===\"*\"}function Ct(...t){return e=>t.reduce((r,n)=>n(r),e)}function gt(t){return t.match(H(Nn))}function St(t,e,r,n){let o=`${t}.${e}.${r}`;return n?`${o}-${n}`:o}function Dn(t){return t.replace(H(bn),(e,r,n,o,i,a,s,l,c,u,d,h)=>(P(n)?r=\"\":P(o)?r=`>=${n}.0.0`:P(i)?r=`>=${n}.${o}.0`:r=`>=${r}`,P(c)?l=\"\":P(u)?l=`<${Number(c)+1}.0.0-0`:P(d)?l=`<${c}.${Number(u)+1}.0-0`:h?l=`<=${c}.${u}.${d}-${h}`:l=`<=${l}`,`${r} ${l}`.trim()))}function Fn(t){return t.replace(H(Rn),\"$1$2$3\")}function Mn(t){return t.replace(H($n),\"$1~\")}function kn(t){return t.replace(H(vn),\"$1^\")}function Cn(t){return t.trim().split(/\\s+/).map(e=>e.replace(H(In),(r,n,o,i,a)=>P(n)?\"\":P(o)?`>=${n}.0.0 <${Number(n)+1}.0.0-0`:P(i)?n===\"0\"?`>=${n}.${o}.0 <${n}.${Number(o)+1}.0-0`:`>=${n}.${o}.0 <${Number(n)+1}.0.0-0`:a?n===\"0\"?o===\"0\"?`>=${n}.${o}.${i}-${a} <${n}.${o}.${Number(i)+1}-0`:`>=${n}.${o}.${i}-${a} <${n}.${Number(o)+1}.0-0`:`>=${n}.${o}.${i}-${a} <${Number(n)+1}.0.0-0`:n===\"0\"?o===\"0\"?`>=${n}.${o}.${i} <${n}.${o}.${Number(i)+1}-0`:`>=${n}.${o}.${i} <${n}.${Number(o)+1}.0-0`:`>=${n}.${o}.${i} <${Number(n)+1}.0.0-0`)).join(\" \")}function xn(t){return t.trim().split(/\\s+/).map(e=>e.replace(H(An),(r,n,o,i,a)=>P(n)?\"\":P(o)?`>=${n}.0.0 <${Number(n)+1}.0.0-0`:P(i)?`>=${n}.${o}.0 <${n}.${Number(o)+1}.0-0`:a?`>=${n}.${o}.${i}-${a} <${n}.${Number(o)+1}.0-0`:`>=${n}.${o}.${i} <${n}.${Number(o)+1}.0-0`)).join(\" \")}function Hn(t){return t.split(/\\s+/).map(e=>e.trim().replace(H(Pn),(r,n,o,i,a,s)=>{let l=P(o),c=l||P(i),u=c||P(a);return n===\"=\"&&u&&(n=\"\"),s=\"\",l?n===\">\"||n===\"<\"?\"<0.0.0-0\":\"*\":n&&u?(c&&(i=0),a=0,n===\">\"?(n=\">=\",c?(o=Number(o)+1,i=0,a=0):(i=Number(i)+1,a=0)):n===\"<=\"&&(n=\"<\",c?o=Number(o)+1:i=Number(i)+1),n===\"<\"&&(s=\"-0\"),`${n+o}.${i}.${a}${s}`):c?`>=${o}.0.0${s} <${Number(o)+1}.0.0-0`:u?`>=${o}.${i}.0${s} <${o}.${Number(i)+1}.0-0`:r})).join(\" \")}function Gn(t){return t.trim().replace(H(Tn),\"\")}function jn(t){return t.trim().replace(H(Ln),\"\")}function ve(t,e){return t=Number(t)||t,e=Number(e)||e,t>e?1:t===e?0:-1}function Un(t,e){let{preRelease:r}=t,{preRelease:n}=e;if(r===void 0&&n)return 1;if(r&&n===void 0)return-1;if(r===void 0&&n===void 0)return 0;for(let o=0,i=r.length;o<=i;o++){let a=r[o],s=n[o];if(a!==s)return a===void 0&&s===void 0?0:a?s?ve(a,s):-1:1}return 0}function ge(t,e){return ve(t.major,e.major)||ve(t.minor,e.minor)||ve(t.patch,e.patch)||Un(t,e)}function Ue(t,e){return t.version===e.version}function Vn(t,e){switch(t.operator){case\"\":case\"=\":return Ue(t,e);case\">\":return ge(t,e)<0;case\">=\":return Ue(t,e)||ge(t,e)<0;case\"<\":return ge(t,e)>0;case\"<=\":return Ue(t,e)||ge(t,e)>0;case void 0:return!0;default:return!1}}function Bn(t){return Ct(Cn,xn,Hn,Gn)(t)}function Wn(t){return Ct(Dn,Fn,Mn,kn)(t.trim()).split(/\\s+/).join(\" \")}function Te(t,e){if(!t)return!1;let o=Wn(e).split(\" \").map(h=>Bn(h)).join(\" \").split(/\\s+/).map(h=>jn(h)),i=gt(t);if(!i)return!1;let[,a,,s,l,c,u]=i,d={operator:a,version:St(s,l,c,u),major:s,minor:l,patch:c,preRelease:u?.split(\".\")};for(let h of o){let p=gt(h);if(!p)return!1;let[,m,,E,_,b,R]=p,S={operator:m,version:St(E,_,b,R),major:E,minor:_,patch:b,preRelease:R?.split(\".\")};if(!Vn(S,d))return!1}return!0}function Kn(t,e,r,n){let o;\"get\"in t?o=t.get:\"lib\"in t?o=()=>Promise.resolve(t.lib):o=()=>Promise.resolve(()=>{throw new Error(`Can not get shared '${r}'!`)}),t.strategy&&Y('\"shared.strategy is deprecated, please set in initOptions.shareStrategy instead!\"');var i,a,s;return O({deps:[],useIn:[],from:e,loading:null},t,{shareConfig:O({requiredVersion:`^${t.version}`,singleton:!1,eager:!1,strictVersion:!1},t.shareConfig),get:o,loaded:t?.loaded||\"lib\"in t?!0:void 0,version:(i=t.version)!=null?i:\"0\",scope:Array.isArray(t.scope)?t.scope:[(a=t.scope)!=null?a:\"default\"],strategy:((s=t.strategy)!=null?s:n)||\"version-first\"})}function Ze(t,e){let r=e.shared||{},n=e.name,o=Object.keys(r).reduce((a,s)=>{let l=We(r[s]);return a[s]=a[s]||[],l.forEach(c=>{a[s].push(Kn(c,n,s,e.shareStrategy))}),a},{}),i=O({},t.shared);return Object.keys(o).forEach(a=>{i[a]?o[a].forEach(s=>{i[a].find(c=>c.version===s.version)||i[a].push(s)}):i[a]=o[a]}),{shared:i,shareInfos:o}}function ae(t,e){let r=n=>{if(!Number.isNaN(Number(n))){let i=n.split(\".\"),a=n;for(let s=0;s<3-i.length;s++)a+=\".0\";return a}return n};return!!Te(r(t),`<=${r(e)}`)}var Qe=(t,e)=>{let r=e||function(n,o){return ae(n,o)};return Object.keys(t).reduce((n,o)=>!n||r(n,o)||n===\"0\"?o:n,0)},ie=t=>!!t.loaded||typeof t.lib==\"function\";function qn(t,e,r){let n=t[e][r],o=function(i,a){return!ie(n[i])&&ae(i,a)};return Qe(t[e][r],o)}function zn(t,e,r){let n=t[e][r],o=function(i,a){return ie(n[a])?ie(n[i])?!!ae(i,a):!0:ie(n[i])?!1:ae(i,a)};return Qe(t[e][r],o)}function Yn(t){return t===\"loaded-first\"?zn:qn}function B(t,e,r,n){if(!t)return;let{shareConfig:o,scope:i=Z,strategy:a}=r,s=Array.isArray(i)?i:[i];for(let l of s)if(o&&t[l]&&t[l][e]){let{requiredVersion:c}=o,d=Yn(a)(t,l,e),h=()=>{if(o.singleton){if(typeof c==\"string\"&&!Te(d,c)){let E=`Version ${d} from ${d&&t[l][e][d].from} of shared singleton module ${e} does not satisfy the requirement of ${r.from} which needs ${c})`;o.strictVersion?x(E):Y(E)}return t[l][e][d]}else{if(c===!1||c===\"*\"||Te(d,c))return t[l][e][d];for(let[E,_]of Object.entries(t[l][e]))if(Te(E,c))return _}},p={shareScopeMap:t,scope:l,pkgName:e,version:d,GlobalFederation:J.__FEDERATION__,resolver:h};return(n.emit(p)||p).resolver()}}function et(){return J.__FEDERATION__.__SHARE__}function tt(t){let{pkgName:e,extraOptions:r,shareInfos:n}=t,o=s=>{if(!s)return;let l={};s.forEach(d=>{l[d.version]=d});let u=Qe(l,function(d,h){return!ie(l[d])&&ae(d,h)});return l[u]};var i;let a=(i=r?.resolver)!=null?i:o;return Object.assign({},a(n[e]),r?.customShareInfo)}function Jn(t,e){for(let r of t){let n=e.startsWith(r.name),o=e.replace(r.name,\"\");if(n){if(o.startsWith(\"/\")){let s=r.name;return o=`.${o}`,{pkgNameOrAlias:s,expose:o,remote:r}}else if(o===\"\")return{pkgNameOrAlias:r.name,expose:\".\",remote:r}}let i=r.alias&&e.startsWith(r.alias),a=r.alias&&e.replace(r.alias,\"\");if(r.alias&&i){if(a&&a.startsWith(\"/\")){let s=r.alias;return a=`.${a}`,{pkgNameOrAlias:s,expose:a,remote:r}}else if(a===\"\")return{pkgNameOrAlias:r.alias,expose:\".\",remote:r}}}}function Xn(t,e){for(let r of t)if(e===r.name||r.alias&&e===r.alias)return r}function Zn(t,e){let r=Pt();return r.length>0&&r.forEach(n=>{t?.find(o=>o.name!==n.name)&&t.push(n)}),t&&t.length>0&&t.forEach(n=>{e.forEach(o=>{o.applyPlugin(n)})}),t}async function Qn({entry:t,remoteEntryExports:e}){return new Promise((r,n)=>{try{e?r(e):new Function(\"callbacks\",`import(\"${t}\").then(callbacks[0]).catch(callbacks[1])`)([r,n])}catch(o){n(o)}})}async function er({entry:t,remoteEntryExports:e}){return new Promise((r,n)=>{try{e?r(e):new Function(\"callbacks\",`System.import(\"${t}\").then(callbacks[0]).catch(callbacks[1])`)([r,n])}catch(o){n(o)}})}async function tr({name:t,globalName:e,entry:r,createScriptHook:n}){let{entryExports:o}=ce(t,e);return o||re(r,{attrs:{},createScriptHook:(i,a)=>{let s=n.emit({url:i,attrs:a});if(s&&(s instanceof HTMLScriptElement||\"script\"in s||\"timeout\"in s))return s}}).then(()=>{let{remoteEntryKey:i,entryExports:a}=ce(t,e);return v(a,`\n      Unable to use the ${t}'s '${r}' URL with ${i}'s globalName to get remoteEntry exports.\n      Possible reasons could be:\n\n      1. '${r}' is not the correct URL, or the remoteEntry resource or name is incorrect.\n\n      2. ${i} cannot be used to get remoteEntry exports in the window object.\n    `),a}).catch(i=>{throw i})}async function nr({remoteInfo:t,remoteEntryExports:e,createScriptHook:r}){let{entry:n,entryGlobalName:o,name:i,type:a}=t;switch(a){case\"esm\":case\"module\":return Qn({entry:n,remoteEntryExports:e});case\"system\":return er({entry:n,remoteEntryExports:e});default:return tr({entry:n,globalName:o,name:i,createScriptHook:r})}}async function rr({remoteInfo:t,createScriptHook:e}){let{entry:r,entryGlobalName:n,name:o,type:i}=t,{entryExports:a}=ce(o,n);return a||oe(r,{attrs:{name:o,globalName:n,type:i},createScriptHook:(s,l)=>{let c=e.emit({url:s,attrs:l});if(c&&\"url\"in c)return c}}).then(()=>{let{remoteEntryKey:s,entryExports:l}=ce(o,n);return v(l,`\n      Unable to use the ${o}'s '${r}' URL with ${s}'s globalName to get remoteEntry exports.\n      Possible reasons could be:\n\n      1. '${r}' is not the correct URL, or the remoteEntry resource or name is incorrect.\n\n      2. ${s} cannot be used to get remoteEntry exports in the window object.\n    `),l}).catch(s=>{throw s})}function xt(t){let{entry:e,name:r}=t;return pe(r,e)}async function Pe({origin:t,remoteEntryExports:e,remoteInfo:r}){let n=xt(r);if(e)return e;if(!X[n]){let o=t.remoteHandler.hooks.lifecycle.loadEntry,i=t.loaderHook.lifecycle.createScript;X[n]=o.emit({createScriptHook:i,remoteInfo:r,remoteEntryExports:e}).then(a=>a||(D()?nr({remoteInfo:r,remoteEntryExports:e,createScriptHook:i}):rr({remoteInfo:r,createScriptHook:i})))}return X[n]}function Ne(t){return O({},t,{entry:\"entry\"in t?t.entry:\"\",type:t.type||Ye,entryGlobalName:t.entryGlobalName||t.name,shareScope:t.shareScope||Z})}var st=class{async getEntry(){if(this.remoteEntryExports)return this.remoteEntryExports;let e=await Pe({origin:this.host,remoteInfo:this.remoteInfo,remoteEntryExports:this.remoteEntryExports});return v(e,`remoteEntryExports is undefined \n ${me(this.remoteInfo)}`),this.remoteEntryExports=e,this.remoteEntryExports}async get(e,r,n,o){let{loadFactory:i=!0}=n||{loadFactory:!0},a=await this.getEntry();if(!this.inited){let u=this.host.shareScopeMap,d=this.remoteInfo.shareScope||\"default\";u[d]||(u[d]={});let h=u[d],p=[],m={version:this.remoteInfo.version||\"\"};Object.defineProperty(m,\"shareScopeMap\",{value:u,enumerable:!1});let E=await this.host.hooks.lifecycle.beforeInitContainer.emit({shareScope:h,remoteEntryInitOptions:m,initScope:p,remoteInfo:this.remoteInfo,origin:this.host});typeof a?.init>\"u\"&&console.error('The remote entry interface does not contain \"init\"',`\n`,\"Ensure the name of this remote is not reserved or in use. Check if anything already exists on window[nameOfRemote]\",`\n`,\"Ensure that window[nameOfRemote] is returning a {get,init} object.\"),await a.init(E.shareScope,E.initScope,E.remoteEntryInitOptions),await this.host.hooks.lifecycle.initContainer.emit(O({},E,{id:e,remoteSnapshot:o,remoteEntryExports:a}))}this.lib=a,this.inited=!0;let s=await a.get(r);v(s,`${q(this.remoteInfo)} remote don't export ${r}.`);let l=this.wraperFactory(s,e);return i?await l():l}wraperFactory(e,r){function n(o,i){o&&typeof o==\"object\"&&Object.isExtensible(o)&&!Object.getOwnPropertyDescriptor(o,Symbol.for(\"mf_module_id\"))&&Object.defineProperty(o,Symbol.for(\"mf_module_id\"),{value:i,enumerable:!1})}return e instanceof Promise?async()=>{let o=await e();return n(o,r),o}:()=>{let o=e();return n(o,r),o}}constructor({remoteInfo:e,host:r}){this.inited=!1,this.lib=void 0,this.remoteInfo=e,this.host=r}},G=class{on(e){typeof e==\"function\"&&this.listeners.add(e)}once(e){let r=this;this.on(function n(...o){return r.remove(n),e.apply(null,o)})}emit(...e){let r;return this.listeners.size>0&&this.listeners.forEach(n=>{r=n(...e)}),r}remove(e){this.listeners.delete(e)}removeAll(){this.listeners.clear()}constructor(e){this.type=\"\",this.listeners=new Set,e&&(this.type=e)}},k=class extends G{emit(...e){let r,n=Array.from(this.listeners);if(n.length>0){let o=0,i=a=>a===!1?!1:o<n.length?Promise.resolve(n[o++].apply(null,e)).then(i):a;r=i()}return Promise.resolve(r)}};function Ht(t,e){if(!Ae(e))return!1;if(t!==e){for(let r in t)if(!(r in e))return!1}return!0}var W=class extends G{emit(e){Ae(e)||x(`The data for the \"${this.type}\" hook should be an object.`);for(let r of this.listeners)try{let n=r(e);if(Ht(e,n))e=n;else{this.onerror(`A plugin returned an unacceptable value for the \"${this.type}\" type.`);break}}catch(n){Y(n),this.onerror(n)}return e}constructor(e){super(),this.onerror=x,this.type=e}},U=class extends G{emit(e){Ae(e)||x(`The response data for the \"${this.type}\" hook must be an object.`);let r=Array.from(this.listeners);if(r.length>0){let n=0,o=a=>(Y(a),this.onerror(a),e),i=a=>{if(Ht(e,a)){if(e=a,n<r.length)try{return Promise.resolve(r[n++](e)).then(i,o)}catch(s){return o(s)}}else this.onerror(`A plugin returned an incorrect value for the \"${this.type}\" type.`);return e};return Promise.resolve(i(e))}return Promise.resolve(e)}constructor(e){super(),this.onerror=x,this.type=e}},K=class{applyPlugin(e){v(Rt(e),\"Plugin configuration is invalid.\");let r=e.name;v(r,\"A name must be provided by the plugin.\"),this.registerPlugins[r]||(this.registerPlugins[r]=e,Object.keys(this.lifecycle).forEach(n=>{let o=e[n];o&&this.lifecycle[n].on(o)}))}removePlugin(e){v(e,\"A name is required.\");let r=this.registerPlugins[e];v(r,`The plugin \"${e}\" is not registered.`),Object.keys(r).forEach(n=>{n!==\"name\"&&this.lifecycle[n].remove(r[n])})}inherit({lifecycle:e,registerPlugins:r}){Object.keys(e).forEach(n=>{v(!this.lifecycle[n],`The hook \"${n}\" has a conflict and cannot be inherited.`),this.lifecycle[n]=e[n]}),Object.keys(r).forEach(n=>{v(!this.registerPlugins[n],`The plugin \"${n}\" has a conflict and cannot be inherited.`),this.applyPlugin(r[n])})}constructor(e){this.registerPlugins={},this.lifecycle=e,this.lifecycleKeys=Object.keys(e)}};function Gt(t){return O({resourceCategory:\"sync\",share:!0,depsRemote:!0,prefetchInterface:!1},t)}function or(t,e){return e.map(r=>{let n=Xn(t,r.nameOrAlias);return v(n,`Unable to preload ${r.nameOrAlias} as it is not included in ${!n&&me({remoteInfo:n,remotes:t})}`),{remote:n,preloadConfig:Gt(r)}})}function sr(t){return t?t.map(e=>e===\".\"?e:e.startsWith(\"./\")?e.replace(\"./\",\"\"):e):[]}function jt(t,e,r,n=!0){let{cssAssets:o,jsAssetsWithoutEntry:i,entryAssets:a}=r;if(e.options.inBrowser){if(a.forEach(s=>{let{moduleInfo:l}=s,c=e.moduleCache.get(t.name);Pe(c?{origin:e,remoteInfo:l,remoteEntryExports:c.remoteEntryExports}:{origin:e,remoteInfo:l,remoteEntryExports:void 0})}),n){let s={rel:\"preload\",as:\"style\"};o.forEach(l=>{let{link:c,needAttach:u}=ne({url:l,cb:()=>{},attrs:s,createLinkHook:(d,h)=>{let p=e.loaderHook.lifecycle.createLink.emit({url:d,attrs:h});if(p instanceof HTMLLinkElement)return p}});u&&document.head.appendChild(c)})}else{let s={rel:\"stylesheet\",type:\"text/css\"};o.forEach(l=>{let{link:c,needAttach:u}=ne({url:l,cb:()=>{},attrs:s,createLinkHook:(d,h)=>{let p=e.loaderHook.lifecycle.createLink.emit({url:d,attrs:h});if(p instanceof HTMLLinkElement)return p},needDeleteLink:!1});u&&document.head.appendChild(c)})}if(n){let s={rel:\"preload\",as:\"script\"};i.forEach(l=>{let{link:c,needAttach:u}=ne({url:l,cb:()=>{},attrs:s,createLinkHook:(d,h)=>{let p=e.loaderHook.lifecycle.createLink.emit({url:d,attrs:h});if(p instanceof HTMLLinkElement)return p}});u&&document.head.appendChild(c)})}else{let s={fetchpriority:\"high\",type:t?.type===\"module\"?\"module\":\"text/javascript\"};i.forEach(l=>{let{script:c,needAttach:u}=Ee({url:l,cb:()=>{},attrs:s,createScriptHook:(d,h)=>{let p=e.loaderHook.lifecycle.createScript.emit({url:d,attrs:h});if(p instanceof HTMLScriptElement)return p},needDeleteScript:!0});u&&document.head.appendChild(c)})}}}function Ut(t,e){let r=Ke(e);r.url||x(`The attribute remoteEntry of ${t.name} must not be undefined.`);let n=te(e,r.url);!D()&&!n.startsWith(\"http\")&&(n=`https:${n}`),t.type=r.type,t.entryGlobalName=r.globalName,t.entry=n,t.version=e.version,t.buildVersion=e.buildVersion}function ir(){return{name:\"snapshot-plugin\",async afterResolve(t){let{remote:e,pkgNameOrAlias:r,expose:n,origin:o,remoteInfo:i}=t;if(!Oe(e)||!Be(e)){let{remoteSnapshot:a,globalSnapshot:s}=await o.snapshotHandler.loadRemoteSnapshotInfo(e);Ut(i,a);let l={remote:e,preloadConfig:{nameOrAlias:r,exposes:[n],resourceCategory:\"sync\",share:!1,depsRemote:!1}},c=await o.remoteHandler.hooks.lifecycle.generatePreloadAssets.emit({origin:o,preloadOptions:l,remoteInfo:i,remote:e,remoteSnapshot:a,globalSnapshot:s});return c&&jt(i,o,c,!1),O({},t,{remoteSnapshot:a})}return t}}}function ar(t){let e=t.split(\":\");return e.length===1?{name:e[0],version:void 0}:e.length===2?{name:e[0],version:e[1]}:{name:e[1],version:e[2]}}function Vt(t,e,r,n,o={},i){let a=q(e),{value:s}=V(t,a),l=i||s;if(l&&!ye(l)&&(r(l,e,n),l.remotesInfo)){let c=Object.keys(l.remotesInfo);for(let u of c){if(o[u])continue;o[u]=!0;let d=ar(u),h=l.remotesInfo[u];Vt(t,{name:d.name,version:h.matchedVersion},r,!1,o,void 0)}}}function lr(t,e,r,n,o){let i=[],a=[],s=[],l=new Set,c=new Set,{options:u}=t,{preloadConfig:d}=e,{depsRemote:h}=d;if(Vt(n,r,(_,b,R)=>{let S;if(R)S=d;else if(Array.isArray(h)){let M=h.find(L=>L.nameOrAlias===b.name||L.nameOrAlias===b.alias);if(!M)return;S=Gt(M)}else if(h===!0)S=d;else return;let g=te(_,Ke(_).url);g&&s.push({name:b.name,moduleInfo:{name:b.name,entry:g,type:\"remoteEntryType\"in _?_.remoteEntryType:\"global\",entryGlobalName:\"globalName\"in _?_.globalName:b.name,shareScope:\"\",version:\"version\"in _?_.version:void 0},url:g});let y=\"modules\"in _?_.modules:[],I=sr(S.exposes);if(I.length&&\"modules\"in _){var A;y=_==null||(A=_.modules)==null?void 0:A.reduce((M,L)=>(I?.indexOf(L.moduleName)!==-1&&M.push(L),M),[])}function w(M){let L=M.map(C=>te(_,C));return S.filter?L.filter(S.filter):L}if(y){let M=y.length;for(let L=0;L<M;L++){let C=y[L],De=`${b.name}/${C.moduleName}`;t.remoteHandler.hooks.lifecycle.handlePreloadModule.emit({id:C.moduleName===\".\"?b.name:De,name:b.name,remoteSnapshot:_,preloadConfig:S,remote:b,origin:t}),!Nt(De)&&(S.resourceCategory===\"all\"?(i.push(...w(C.assets.css.async)),i.push(...w(C.assets.css.sync)),a.push(...w(C.assets.js.async)),a.push(...w(C.assets.js.sync))):(S.resourceCategory=\"sync\")&&(i.push(...w(C.assets.css.sync)),a.push(...w(C.assets.js.sync))),Lt(De))}}},!0,{},o),o.shared){let _=(b,R)=>{let S=B(t.shareScopeMap,R.sharedName,b,t.sharedHandler.hooks.lifecycle.resolveShare);S&&typeof S.lib==\"function\"&&(R.assets.js.sync.forEach(g=>{l.add(g)}),R.assets.css.sync.forEach(g=>{c.add(g)}))};o.shared.forEach(b=>{var R;let S=(R=u.shared)==null?void 0:R[b.sharedName];if(!S)return;let g=b.version?S.find(I=>I.version===b.version):S;if(!g)return;We(g).forEach(I=>{_(I,b)})})}let m=a.filter(_=>!l.has(_));return{cssAssets:i.filter(_=>!c.has(_)),jsAssetsWithoutEntry:m,entryAssets:s}}var cr=function(){return{name:\"generate-preload-assets-plugin\",async generatePreloadAssets(t){let{origin:e,preloadOptions:r,remoteInfo:n,remote:o,globalSnapshot:i,remoteSnapshot:a}=t;return Oe(o)&&Be(o)?{cssAssets:[],jsAssetsWithoutEntry:[],entryAssets:[{name:o.name,url:o.entry,moduleInfo:{name:n.name,entry:o.entry,type:n.type||\"global\",entryGlobalName:\"\",shareScope:\"\"}}]}:(Ut(n,a),lr(e,r,n,i,a))}}};function Bt(t,e){let r=le({name:e.options.name,version:e.options.version}),n=r&&\"remotesInfo\"in r&&r.remotesInfo&&V(r.remotesInfo,t.name).value;return n&&n.matchedVersion?{hostGlobalSnapshot:r,globalSnapshot:qe(),remoteSnapshot:le({name:t.name,version:n.matchedVersion})}:{hostGlobalSnapshot:void 0,globalSnapshot:qe(),remoteSnapshot:le({name:t.name,version:\"version\"in t?t.version:void 0})}}var nt=class{async loadSnapshot(e){let{options:r}=this.HostInstance,{hostGlobalSnapshot:n,remoteSnapshot:o,globalSnapshot:i}=this.getGlobalRemoteInfo(e),{remoteSnapshot:a,globalSnapshot:s}=await this.hooks.lifecycle.loadSnapshot.emit({options:r,moduleInfo:e,hostGlobalSnapshot:n,remoteSnapshot:o,globalSnapshot:i});return{remoteSnapshot:a,globalSnapshot:s}}async loadRemoteSnapshotInfo(e){let{options:r}=this.HostInstance;await this.hooks.lifecycle.beforeLoadRemoteSnapshot.emit({options:r,moduleInfo:e});let n=le({name:this.HostInstance.options.name,version:this.HostInstance.options.version});n||(n={version:this.HostInstance.options.version||\"\",remoteEntry:\"\",remotesInfo:{}},Ot({[this.HostInstance.options.name]:n})),n&&\"remotesInfo\"in n&&!V(n.remotesInfo,e.name).value&&(\"version\"in e||\"entry\"in e)&&(n.remotesInfo=O({},n?.remotesInfo,{[e.name]:{matchedVersion:\"version\"in e?e.version:e.entry}}));let{hostGlobalSnapshot:o,remoteSnapshot:i,globalSnapshot:a}=this.getGlobalRemoteInfo(e),{remoteSnapshot:s,globalSnapshot:l}=await this.hooks.lifecycle.loadSnapshot.emit({options:r,moduleInfo:e,hostGlobalSnapshot:o,remoteSnapshot:i,globalSnapshot:a});if(s)if(ye(s)){let c=D()?s.remoteEntry:s.ssrRemoteEntry||s.remoteEntry||\"\",u=await this.getManifestJson(c,e,{}),d=ze(O({},e,{entry:c}),u);return{remoteSnapshot:u,globalSnapshot:d}}else{let{remoteSnapshot:c}=await this.hooks.lifecycle.loadRemoteSnapshot.emit({options:this.HostInstance.options,moduleInfo:e,remoteSnapshot:s,from:\"global\"});return{remoteSnapshot:c,globalSnapshot:l}}else if(Oe(e)){let c=await this.getManifestJson(e.entry,e,{}),u=ze(e,c),{remoteSnapshot:d}=await this.hooks.lifecycle.loadRemoteSnapshot.emit({options:this.HostInstance.options,moduleInfo:e,remoteSnapshot:c,from:\"global\"});return{remoteSnapshot:d,globalSnapshot:u}}else x(`\n          Cannot get remoteSnapshot with the name: '${e.name}', version: '${e.version}' from __FEDERATION__.moduleInfo. The following reasons may be causing the problem:\n\n          1. The Deploy platform did not deliver the correct data. You can use __FEDERATION__.moduleInfo to check the remoteInfo.\n\n          2. The remote '${e.name}' version '${e.version}' is not released.\n\n          The transformed module info: ${JSON.stringify(l)}\n        `)}getGlobalRemoteInfo(e){return Bt(e,this.HostInstance)}async getManifestJson(e,r,n){let o=async()=>{let a=this.manifestCache.get(e);if(a)return a;try{let s=await this.loaderHook.lifecycle.fetch.emit(e,{});return(!s||!(s instanceof Response))&&(s=await fetch(e,{})),a=await s.json(),v(a.metaData&&a.exposes&&a.shared,`${e} is not a federation manifest`),this.manifestCache.set(e,a),a}catch(s){delete this.manifestLoading[e],x(`Failed to get manifestJson for ${r.name}. The manifest URL is ${e}. Please ensure that the manifestUrl is accessible.\n          \n Error message:\n          \n ${s}`)}},i=async()=>{let a=await o(),s=xe(a,{version:e}),{remoteSnapshot:l}=await this.hooks.lifecycle.loadRemoteSnapshot.emit({options:this.HostInstance.options,moduleInfo:r,manifestJson:a,remoteSnapshot:s,manifestUrl:e,from:\"manifest\"});return l};return this.manifestLoading[e]||(this.manifestLoading[e]=i().then(a=>a)),this.manifestLoading[e]}constructor(e){this.loadingHostSnapshot=null,this.manifestCache=new Map,this.hooks=new K({beforeLoadRemoteSnapshot:new k(\"beforeLoadRemoteSnapshot\"),loadSnapshot:new U(\"loadGlobalSnapshot\"),loadRemoteSnapshot:new U(\"loadRemoteSnapshot\")}),this.manifestLoading=J.__FEDERATION__.__MANIFEST_LOADING__,this.HostInstance=e,this.loaderHook=e.loaderHook}},rt=class{registerShared(e,r){let{shareInfos:n,shared:o}=Ze(e,r);return Object.keys(n).forEach(a=>{n[a].forEach(l=>{!B(this.shareScopeMap,a,l,this.hooks.lifecycle.resolveShare)&&l&&l.lib&&this.setShared({pkgName:a,lib:l.lib,get:l.get,loaded:!0,shared:l,from:r.name})})}),{shareInfos:n,shared:o}}async loadShare(e,r){let{host:n}=this,o=tt({pkgName:e,extraOptions:r,shareInfos:n.options.shared});o?.scope&&await Promise.all(o.scope.map(async c=>{await Promise.all(this.initializeSharing(c,{strategy:o.strategy}))}));let i=await this.hooks.lifecycle.beforeLoadShare.emit({pkgName:e,shareInfo:o,shared:n.options.shared,origin:n}),{shareInfo:a}=i;v(a,`Cannot find ${e} Share in the ${n.options.name}. Please ensure that the ${e} Share parameters have been injected`);let s=B(this.shareScopeMap,e,a,this.hooks.lifecycle.resolveShare),l=c=>{c.useIn||(c.useIn=[]),Ve(c.useIn,n.options.name)};if(s&&s.lib)return l(s),s.lib;if(s&&s.loading&&!s.loaded){let c=await s.loading;return s.loaded=!0,s.lib||(s.lib=c),l(s),c}else if(s){let u=(async()=>{let d=await s.get();a.lib=d,a.loaded=!0,l(a);let h=B(this.shareScopeMap,e,a,this.hooks.lifecycle.resolveShare);return h&&(h.lib=d,h.loaded=!0),d})();return this.setShared({pkgName:e,loaded:!1,shared:s,from:n.options.name,lib:null,loading:u}),u}else{if(r?.customShareInfo)return!1;let u=(async()=>{let d=await a.get();a.lib=d,a.loaded=!0,l(a);let h=B(this.shareScopeMap,e,a,this.hooks.lifecycle.resolveShare);return h&&(h.lib=d,h.loaded=!0),d})();return this.setShared({pkgName:e,loaded:!1,shared:a,from:n.options.name,lib:null,loading:u}),u}}initializeSharing(e=Z,r){let{host:n}=this,o=r?.from,i=r?.strategy,a=r?.initScope,s=[];if(o!==\"build\"){let{initTokens:m}=this;a||(a=[]);let E=m[e];if(E||(E=m[e]={from:this.host.name}),a.indexOf(E)>=0)return s;a.push(E)}let l=this.shareScopeMap,c=n.options.name;l[e]||(l[e]={});let u=l[e],d=(m,E)=>{var _;let{version:b,eager:R}=E;u[m]=u[m]||{};let S=u[m],g=S[b],y=!!(g&&(g.eager||(_=g.shareConfig)!=null&&_.eager));(!g||g.strategy!==\"loaded-first\"&&!g.loaded&&(!R!=!y?R:c>g.from))&&(S[b]=E)},h=m=>m&&m.init&&m.init(l[e],a),p=async m=>{let{module:E}=await n.remoteHandler.getRemoteModuleAndOptions({id:m});if(E.getEntry){let _;try{_=await E.getEntry()}catch(b){_=await n.remoteHandler.hooks.lifecycle.errorLoadRemote.emit({id:m,error:b,from:\"runtime\",lifecycle:\"beforeLoadShare\",origin:n})}E.inited||(await h(_),E.inited=!0)}};return Object.keys(n.options.shared).forEach(m=>{n.options.shared[m].forEach(_=>{_.scope.includes(e)&&d(m,_)})}),(n.options.shareStrategy===\"version-first\"||i===\"version-first\")&&n.options.remotes.forEach(m=>{m.shareScope===e&&s.push(p(m.name))}),s}loadShareSync(e,r){let{host:n}=this,o=tt({pkgName:e,extraOptions:r,shareInfos:n.options.shared});o?.scope&&o.scope.forEach(s=>{this.initializeSharing(s,{strategy:o.strategy})});let i=B(this.shareScopeMap,e,o,this.hooks.lifecycle.resolveShare),a=s=>{s.useIn||(s.useIn=[]),Ve(s.useIn,n.options.name)};if(i){if(typeof i.lib==\"function\")return a(i),i.loaded||(i.loaded=!0,i.from===n.options.name&&(o.loaded=!0)),i.lib;if(typeof i.get==\"function\"){let s=i.get();if(!(s instanceof Promise))return a(i),this.setShared({pkgName:e,loaded:!0,from:n.options.name,lib:s,shared:i}),s}}if(o.lib)return o.loaded||(o.loaded=!0),o.lib;if(o.get){let s=o.get();if(s instanceof Promise)throw new Error(`\n        The loadShareSync function was unable to load ${e}. The ${e} could not be found in ${n.options.name}.\n        Possible reasons for failure: \n\n        1. The ${e} share was registered with the 'get' attribute, but loadShare was not used beforehand.\n\n        2. The ${e} share was not registered with the 'lib' attribute.\n\n      `);return o.lib=s,this.setShared({pkgName:e,loaded:!0,from:n.options.name,lib:o.lib,shared:o}),o.lib}throw new Error(`\n        The loadShareSync function was unable to load ${e}. The ${e} could not be found in ${n.options.name}.\n        Possible reasons for failure: \n\n        1. The ${e} share was registered with the 'get' attribute, but loadShare was not used beforehand.\n\n        2. The ${e} share was not registered with the 'lib' attribute.\n\n      `)}initShareScopeMap(e,r,n={}){let{host:o}=this;this.shareScopeMap[e]=r,this.hooks.lifecycle.initContainerShareScopeMap.emit({shareScope:r,options:o.options,origin:o,scopeName:e,hostShareScopeMap:n.hostShareScopeMap})}setShared({pkgName:e,shared:r,from:n,lib:o,loading:i,loaded:a,get:s}){let{version:l,scope:c=\"default\"}=r,u=fe(r,[\"version\",\"scope\"]);(Array.isArray(c)?c:[c]).forEach(h=>{if(this.shareScopeMap[h]||(this.shareScopeMap[h]={}),this.shareScopeMap[h][e]||(this.shareScopeMap[h][e]={}),!this.shareScopeMap[h][e][l]){this.shareScopeMap[h][e][l]=O({version:l,scope:[\"default\"]},u,{lib:o,loaded:a,loading:i}),s&&(this.shareScopeMap[h][e][l].get=s);return}let p=this.shareScopeMap[h][e][l];i&&!p.loading&&(p.loading=i)})}_setGlobalShareScopeMap(e){let r=et(),n=e.id||e.name;n&&!r[n]&&(r[n]=this.shareScopeMap)}constructor(e){this.hooks=new K({afterResolve:new U(\"afterResolve\"),beforeLoadShare:new U(\"beforeLoadShare\"),loadShare:new k,resolveShare:new W(\"resolveShare\"),initContainerShareScopeMap:new W(\"initContainerShareScopeMap\")}),this.host=e,this.shareScopeMap={},this.initTokens={},this._setGlobalShareScopeMap(e.options)}},ot=class{formatAndRegisterRemote(e,r){return(r.remotes||[]).reduce((o,i)=>(this.registerRemote(i,o,{force:!1}),o),e.remotes)}setIdToRemoteMap(e,r){let{remote:n,expose:o}=r,{name:i,alias:a}=n;if(this.idToRemoteMap[e]={name:n.name,expose:o},a&&e.startsWith(i)){let s=e.replace(i,a);this.idToRemoteMap[s]={name:n.name,expose:o};return}if(a&&e.startsWith(a)){let s=e.replace(a,i);this.idToRemoteMap[s]={name:n.name,expose:o}}}async loadRemote(e,r){let{host:n}=this;try{let{loadFactory:o=!0}=r||{loadFactory:!0},{module:i,moduleOptions:a,remoteMatchInfo:s}=await this.getRemoteModuleAndOptions({id:e}),{pkgNameOrAlias:l,remote:c,expose:u,id:d,remoteSnapshot:h}=s,p=await i.get(d,u,r,h),m=await this.hooks.lifecycle.onLoad.emit({id:d,pkgNameOrAlias:l,expose:u,exposeModule:o?p:void 0,exposeModuleFactory:o?void 0:p,remote:c,options:a,moduleInstance:i,origin:n});return this.setIdToRemoteMap(e,s),typeof m==\"function\"?m:p}catch(o){let{from:i=\"runtime\"}=r||{from:\"runtime\"},a=await this.hooks.lifecycle.errorLoadRemote.emit({id:e,error:o,from:i,lifecycle:\"onLoad\",origin:n});if(!a)throw o;return a}}async preloadRemote(e){let{host:r}=this;await this.hooks.lifecycle.beforePreloadRemote.emit({preloadOps:e,options:r.options,origin:r});let n=or(r.options.remotes,e);await Promise.all(n.map(async o=>{let{remote:i}=o,a=Ne(i),{globalSnapshot:s,remoteSnapshot:l}=await r.snapshotHandler.loadRemoteSnapshotInfo(i),c=await this.hooks.lifecycle.generatePreloadAssets.emit({origin:r,preloadOptions:o,remote:i,remoteInfo:a,globalSnapshot:s,remoteSnapshot:l});c&&jt(a,r,c)}))}registerRemotes(e,r){let{host:n}=this;e.forEach(o=>{this.registerRemote(o,n.options.remotes,{force:r?.force})})}async getRemoteModuleAndOptions(e){let{host:r}=this,{id:n}=e,o;try{o=await this.hooks.lifecycle.beforeRequest.emit({id:n,options:r.options,origin:r})}catch(m){if(o=await this.hooks.lifecycle.errorLoadRemote.emit({id:n,options:r.options,origin:r,from:\"runtime\",error:m,lifecycle:\"beforeRequest\"}),!o)throw m}let{id:i}=o,a=Jn(r.options.remotes,i);v(a,`\n        Unable to locate ${i} in ${r.options.name}. Potential reasons for failure include:\n\n        1. ${i} was not included in the 'remotes' parameter of ${r.options.name||\"the host\"}.\n\n        2. ${i} could not be found in the 'remotes' of ${r.options.name} with either 'name' or 'alias' attributes.\n        3. ${i} is not online, injected, or loaded.\n        4. ${i}  cannot be accessed on the expected.\n        5. The 'beforeRequest' hook was provided but did not return the correct 'remoteInfo' when attempting to load ${i}.\n      `);let{remote:s}=a,l=Ne(s),c=await r.sharedHandler.hooks.lifecycle.afterResolve.emit(O({id:i},a,{options:r.options,origin:r,remoteInfo:l})),{remote:u,expose:d}=c;v(u&&d,`The 'beforeRequest' hook was executed, but it failed to return the correct 'remote' and 'expose' values while loading ${i}.`);let h=r.moduleCache.get(u.name),p={host:r,remoteInfo:l};return h||(h=new st(p),r.moduleCache.set(u.name,h)),{module:h,moduleOptions:p,remoteMatchInfo:c}}registerRemote(e,r,n){let{host:o}=this,i=()=>{if(e.alias){let s=r.find(l=>{var c;return e.alias&&(l.name.startsWith(e.alias)||((c=l.alias)==null?void 0:c.startsWith(e.alias)))});v(!s,`The alias ${e.alias} of remote ${e.name} is not allowed to be the prefix of ${s&&s.name} name or alias`)}\"entry\"in e&&D()&&!e.entry.startsWith(\"http\")&&(e.entry=new URL(e.entry,window.location.origin).href),e.shareScope||(e.shareScope=Z),e.type||(e.type=Ye)};this.hooks.lifecycle.beforeRegisterRemote.emit({remote:e,origin:o});let a=r.find(s=>s.name===e.name);if(!a)i(),r.push(e),this.hooks.lifecycle.registerRemote.emit({remote:e,origin:o});else{let s=[`The remote \"${e.name}\" is already registered.`,n?.force?\"Hope you have known that OVERRIDE it may have some unexpected errors\":'If you want to merge the remote, you can set \"force: true\".'];n?.force&&(this.removeRemote(a),i(),r.push(e),this.hooks.lifecycle.registerRemote.emit({remote:e,origin:o})),_e(s.join(\" \"))}}removeRemote(e){try{let{host:n}=this,{name:o}=e,i=n.options.remotes.findIndex(s=>s.name===o);i!==-1&&n.options.remotes.splice(i,1);let a=n.moduleCache.get(e.name);if(a){let s=a.remoteInfo,l=s.entryGlobalName;if(globalThis[l]){var r;(r=Object.getOwnPropertyDescriptor(globalThis,l))!=null&&r.configurable?delete globalThis[l]:globalThis[l]=void 0}let c=xt(a.remoteInfo);X[c]&&delete X[c],n.snapshotHandler.manifestCache.delete(s.entry);let u=s.buildVersion?pe(s.name,s.buildVersion):s.name,d=globalThis.__FEDERATION__.__INSTANCES__.findIndex(p=>s.buildVersion?p.options.id===u:p.name===u);if(d!==-1){let p=globalThis.__FEDERATION__.__INSTANCES__[d];u=p.options.id||u;let m=et(),E=!0,_=[];Object.keys(m).forEach(b=>{let R=m[b];R&&Object.keys(R).forEach(S=>{let g=R[S];g&&Object.keys(g).forEach(y=>{let I=g[y];I&&Object.keys(I).forEach(A=>{let w=I[A];w&&typeof w==\"object\"&&w.from===s.name&&(w.loaded||w.loading?(w.useIn=w.useIn.filter(M=>M!==s.name),w.useIn.length?E=!1:_.push([b,S,y,A])):_.push([b,S,y,A]))})})})}),E&&(p.shareScopeMap={},delete m[u]),_.forEach(([b,R,S,g])=>{var y,I,A;(A=m[b])==null||(I=A[R])==null||(y=I[S])==null||delete y[g]}),globalThis.__FEDERATION__.__INSTANCES__.splice(d,1)}let{hostGlobalSnapshot:h}=Bt(e,n);if(h){let p=h&&\"remotesInfo\"in h&&h.remotesInfo&&V(h.remotesInfo,e.name).key;p&&(delete h.remotesInfo[p],J.__FEDERATION__.__MANIFEST_LOADING__[p]&&delete J.__FEDERATION__.__MANIFEST_LOADING__[p])}n.moduleCache.delete(e.name)}}catch(n){console.log(\"removeRemote fail: \",n)}}constructor(e){this.hooks=new K({beforeRegisterRemote:new W(\"beforeRegisterRemote\"),registerRemote:new W(\"registerRemote\"),beforeRequest:new U(\"beforeRequest\"),onLoad:new k(\"onLoad\"),handlePreloadModule:new G(\"handlePreloadModule\"),errorLoadRemote:new k(\"errorLoadRemote\"),beforePreloadRemote:new k(\"beforePreloadRemote\"),generatePreloadAssets:new k(\"generatePreloadAssets\"),afterPreloadRemote:new k,loadEntry:new k}),this.host=e,this.idToRemoteMap={}}},ue=class{initOptions(e){this.registerPlugins(e.plugins);let r=this.formatOptions(this.options,e);return this.options=r,r}async loadShare(e,r){return this.sharedHandler.loadShare(e,r)}loadShareSync(e,r){return this.sharedHandler.loadShareSync(e,r)}initializeSharing(e=Z,r){return this.sharedHandler.initializeSharing(e,r)}initRawContainer(e,r,n){let o=Ne({name:e,entry:r}),i=new st({host:this,remoteInfo:o});return i.remoteEntryExports=n,this.moduleCache.set(e,i),i}async loadRemote(e,r){return this.remoteHandler.loadRemote(e,r)}async preloadRemote(e){return this.remoteHandler.preloadRemote(e)}initShareScopeMap(e,r,n={}){this.sharedHandler.initShareScopeMap(e,r,n)}formatOptions(e,r){let{shared:n}=Ze(e,r),{userOptions:o,options:i}=this.hooks.lifecycle.beforeInit.emit({origin:this,userOptions:r,options:e,shareInfo:n}),a=this.remoteHandler.formatAndRegisterRemote(i,o),{shared:s}=this.sharedHandler.registerShared(i,o),l=[...i.plugins];o.plugins&&o.plugins.forEach(u=>{l.includes(u)||l.push(u)});let c=O({},e,r,{plugins:l,remotes:a,shared:s});return this.hooks.lifecycle.init.emit({origin:this,options:c}),c}registerPlugins(e){let r=Zn(e,[this.hooks,this.remoteHandler.hooks,this.sharedHandler.hooks,this.snapshotHandler.hooks,this.loaderHook]);this.options.plugins=this.options.plugins.reduce((n,o)=>(o&&n&&!n.find(i=>i.name===o.name)&&n.push(o),n),r||[])}registerRemotes(e,r){return this.remoteHandler.registerRemotes(e,r)}constructor(e){this.hooks=new K({beforeInit:new W(\"beforeInit\"),init:new G,beforeInitContainer:new U(\"beforeInitContainer\"),initContainer:new U(\"initContainer\")}),this.version=\"0.6.10\",this.moduleCache=new Map,this.loaderHook=new K({getModuleInfo:new G,createScript:new G,createLink:new G,fetch:new k});let r={id:Ie(),name:e.name,plugins:[ir(),cr()],remotes:[],shared:{},inBrowser:D()};this.name=e.name,this.options=r,this.snapshotHandler=new nt(this),this.sharedHandler=new rt(this),this.remoteHandler=new ot(this),this.shareScopeMap=this.sharedHandler.shareScopeMap,this.registerPlugins([...r.plugins,...e.plugins||[]]),this.options=this.formatOptions(r,e)}},$=null;function ur(t){if($)return $;let e=vt(t.name,t.version);if(e)return e.initOptions(t),$||($=e),e;{let r=It()||ue;return $=new r(t),Tt($),$}}function fr(...t){return v($,\"Please call init first\"),$.loadRemote.apply($,t)}function hr(...t){return v($,\"Please call init first\"),$.loadShare.apply($,t)}function dr(...t){return v($,\"Please call init first\"),$.loadShareSync.apply($,t)}function pr(...t){return v($,\"Please call init first\"),$.preloadRemote.apply($,t)}function _r(...t){return v($,\"Please call init first\"),$.registerRemotes.apply($,t)}function mr(...t){return v($,\"Please call init first\"),$.registerPlugins.apply($,t)}function yr(){return $}wt(ue);window[at]={MFRuntime:Le,MFSDK:be};})();\n","function _extends() {\n    _extends = Object.assign || function assign(target) {\n        for(var i = 1; i < arguments.length; i++){\n            var source = arguments[i];\n            for(var key in source)if (Object.prototype.hasOwnProperty.call(source, key)) target[key] = source[key];\n        }\n        return target;\n    };\n    return _extends.apply(this, arguments);\n}\n\nfunction _object_without_properties_loose(source, excluded) {\n    if (source == null) return {};\n    var target = {};\n    var sourceKeys = Object.keys(source);\n    var key, i;\n    for(i = 0; i < sourceKeys.length; i++){\n        key = sourceKeys[i];\n        if (excluded.indexOf(key) >= 0) continue;\n        target[key] = source[key];\n    }\n    return target;\n}\n\nexport { _object_without_properties_loose as _, _extends as a };\n","import { _ as _extends } from './polyfills.esm.js';\n\nconst FederationModuleManifest = 'federation-manifest.json';\nconst MANIFEST_EXT = '.json';\nconst BROWSER_LOG_KEY = 'FEDERATION_DEBUG';\nconst BROWSER_LOG_VALUE = '1';\nconst NameTransformSymbol = {\n    AT: '@',\n    HYPHEN: '-',\n    SLASH: '/'\n};\nconst NameTransformMap = {\n    [NameTransformSymbol.AT]: 'scope_',\n    [NameTransformSymbol.HYPHEN]: '_',\n    [NameTransformSymbol.SLASH]: '__'\n};\nconst EncodedNameTransformMap = {\n    [NameTransformMap[NameTransformSymbol.AT]]: NameTransformSymbol.AT,\n    [NameTransformMap[NameTransformSymbol.HYPHEN]]: NameTransformSymbol.HYPHEN,\n    [NameTransformMap[NameTransformSymbol.SLASH]]: NameTransformSymbol.SLASH\n};\nconst SEPARATOR = ':';\nconst ManifestFileName = 'mf-manifest.json';\nconst StatsFileName = 'mf-stats.json';\nconst MFModuleType = {\n    NPM: 'npm',\n    APP: 'app'\n};\nconst MODULE_DEVTOOL_IDENTIFIER = '__MF_DEVTOOLS_MODULE_INFO__';\nconst ENCODE_NAME_PREFIX = 'ENCODE_NAME_PREFIX';\nconst TEMP_DIR = '.federation';\nconst MFPrefetchCommon = {\n    identifier: 'MFDataPrefetch',\n    globalKey: '__PREFETCH__',\n    library: 'mf-data-prefetch',\n    exportsKey: '__PREFETCH_EXPORTS__',\n    fileName: 'bootstrap.js'\n};\n\nvar ContainerPlugin = /*#__PURE__*/Object.freeze({\n  __proto__: null\n});\n\nvar ContainerReferencePlugin = /*#__PURE__*/Object.freeze({\n  __proto__: null\n});\n\nvar ModuleFederationPlugin = /*#__PURE__*/Object.freeze({\n  __proto__: null\n});\n\nvar SharePlugin = /*#__PURE__*/Object.freeze({\n  __proto__: null\n});\n\nfunction isBrowserEnv() {\n    return typeof window !== 'undefined';\n}\nfunction isDebugMode() {\n    if (typeof process !== 'undefined' && process.env && process.env['FEDERATION_DEBUG']) {\n        return Boolean(process.env['FEDERATION_DEBUG']);\n    }\n    return typeof FEDERATION_DEBUG !== 'undefined' && Boolean(FEDERATION_DEBUG);\n}\nconst getProcessEnv = function() {\n    return typeof process !== 'undefined' && process.env ? process.env : {};\n};\n\nconst DEBUG_LOG = '[ FEDERATION DEBUG ]';\nfunction safeToString$1(info) {\n    try {\n        return JSON.stringify(info, null, 2);\n    } catch (e) {\n        return '';\n    }\n}\nfunction safeGetLocalStorageItem() {\n    try {\n        if (typeof window !== 'undefined' && window.localStorage) {\n            return localStorage.getItem(BROWSER_LOG_KEY) === BROWSER_LOG_VALUE;\n        }\n    } catch (error) {\n        return typeof document !== 'undefined';\n    }\n    return false;\n}\nlet Logger = class Logger {\n    info(msg, info) {\n        if (this.enable) {\n            const argsToString = safeToString$1(info) || '';\n            if (isBrowserEnv()) {\n                console.info(`%c ${this.identifier}: ${msg} ${argsToString}`, 'color:#3300CC');\n            } else {\n                console.info('\\x1b[34m%s', `${this.identifier}: ${msg} ${argsToString ? `\\n${argsToString}` : ''}`);\n            }\n        }\n    }\n    logOriginalInfo(...args) {\n        if (this.enable) {\n            if (isBrowserEnv()) {\n                console.info(`%c ${this.identifier}: OriginalInfo`, 'color:#3300CC');\n                console.log(...args);\n            } else {\n                console.info(`%c ${this.identifier}: OriginalInfo`, 'color:#3300CC');\n                console.log(...args);\n            }\n        }\n    }\n    constructor(identifier){\n        this.enable = false;\n        this.identifier = identifier || DEBUG_LOG;\n        if (isBrowserEnv() && safeGetLocalStorageItem()) {\n            this.enable = true;\n        } else if (isDebugMode()) {\n            this.enable = true;\n        }\n    }\n};\n\nconst LOG_CATEGORY = '[ Federation Runtime ]';\n// entry: name:version   version : 1.0.0 | ^1.2.3\n// entry: name:entry  entry:  https://localhost:9000/federation-manifest.json\nconst parseEntry = (str, devVerOrUrl, separator = SEPARATOR)=>{\n    const strSplit = str.split(separator);\n    const devVersionOrUrl = getProcessEnv()['NODE_ENV'] === 'development' && devVerOrUrl;\n    const defaultVersion = '*';\n    const isEntry = (s)=>s.startsWith('http') || s.includes(MANIFEST_EXT);\n    // Check if the string starts with a type\n    if (strSplit.length >= 2) {\n        let [name, ...versionOrEntryArr] = strSplit;\n        if (str.startsWith(separator)) {\n            versionOrEntryArr = [\n                devVersionOrUrl || strSplit.slice(-1)[0]\n            ];\n            name = strSplit.slice(0, -1).join(separator);\n        }\n        let versionOrEntry = devVersionOrUrl || versionOrEntryArr.join(separator);\n        if (isEntry(versionOrEntry)) {\n            return {\n                name,\n                entry: versionOrEntry\n            };\n        } else {\n            // Apply version rule\n            // devVersionOrUrl => inputVersion => defaultVersion\n            return {\n                name,\n                version: versionOrEntry || defaultVersion\n            };\n        }\n    } else if (strSplit.length === 1) {\n        const [name] = strSplit;\n        if (devVersionOrUrl && isEntry(devVersionOrUrl)) {\n            return {\n                name,\n                entry: devVersionOrUrl\n            };\n        }\n        return {\n            name,\n            version: devVersionOrUrl || defaultVersion\n        };\n    } else {\n        throw `Invalid entry value: ${str}`;\n    }\n};\nconst logger = new Logger();\nconst composeKeyWithSeparator = function(...args) {\n    if (!args.length) {\n        return '';\n    }\n    return args.reduce((sum, cur)=>{\n        if (!cur) {\n            return sum;\n        }\n        if (!sum) {\n            return cur;\n        }\n        return `${sum}${SEPARATOR}${cur}`;\n    }, '');\n};\nconst encodeName = function(name, prefix = '', withExt = false) {\n    try {\n        const ext = withExt ? '.js' : '';\n        return `${prefix}${name.replace(new RegExp(`${NameTransformSymbol.AT}`, 'g'), NameTransformMap[NameTransformSymbol.AT]).replace(new RegExp(`${NameTransformSymbol.HYPHEN}`, 'g'), NameTransformMap[NameTransformSymbol.HYPHEN]).replace(new RegExp(`${NameTransformSymbol.SLASH}`, 'g'), NameTransformMap[NameTransformSymbol.SLASH])}${ext}`;\n    } catch (err) {\n        throw err;\n    }\n};\nconst decodeName = function(name, prefix, withExt) {\n    try {\n        let decodedName = name;\n        if (prefix) {\n            if (!decodedName.startsWith(prefix)) {\n                return decodedName;\n            }\n            decodedName = decodedName.replace(new RegExp(prefix, 'g'), '');\n        }\n        decodedName = decodedName.replace(new RegExp(`${NameTransformMap[NameTransformSymbol.AT]}`, 'g'), EncodedNameTransformMap[NameTransformMap[NameTransformSymbol.AT]]).replace(new RegExp(`${NameTransformMap[NameTransformSymbol.SLASH]}`, 'g'), EncodedNameTransformMap[NameTransformMap[NameTransformSymbol.SLASH]]).replace(new RegExp(`${NameTransformMap[NameTransformSymbol.HYPHEN]}`, 'g'), EncodedNameTransformMap[NameTransformMap[NameTransformSymbol.HYPHEN]]);\n        if (withExt) {\n            decodedName = decodedName.replace('.js', '');\n        }\n        return decodedName;\n    } catch (err) {\n        throw err;\n    }\n};\nconst generateExposeFilename = (exposeName, withExt)=>{\n    if (!exposeName) {\n        return '';\n    }\n    let expose = exposeName;\n    if (expose === '.') {\n        expose = 'default_export';\n    }\n    if (expose.startsWith('./')) {\n        expose = expose.replace('./', '');\n    }\n    return encodeName(expose, '__federation_expose_', withExt);\n};\nconst generateShareFilename = (pkgName, withExt)=>{\n    if (!pkgName) {\n        return '';\n    }\n    return encodeName(pkgName, '__federation_shared_', withExt);\n};\nconst getResourceUrl = (module, sourceUrl)=>{\n    if ('getPublicPath' in module) {\n        let publicPath;\n        if (!module.getPublicPath.startsWith('function')) {\n            publicPath = new Function(module.getPublicPath)();\n        } else {\n            publicPath = new Function('return ' + module.getPublicPath)()();\n        }\n        return `${publicPath}${sourceUrl}`;\n    } else if ('publicPath' in module) {\n        return `${module.publicPath}${sourceUrl}`;\n    } else {\n        console.warn('Cannot get resource URL. If in debug mode, please ignore.', module, sourceUrl);\n        return '';\n    }\n};\n// eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types\nconst assert = (condition, msg)=>{\n    if (!condition) {\n        error(msg);\n    }\n};\nconst error = (msg)=>{\n    throw new Error(`${LOG_CATEGORY}: ${msg}`);\n};\nconst warn = (msg)=>{\n    console.warn(`${LOG_CATEGORY}: ${msg}`);\n};\nfunction safeToString(info) {\n    try {\n        return JSON.stringify(info, null, 2);\n    } catch (e) {\n        return '';\n    }\n}\n\nconst simpleJoinRemoteEntry = (rPath, rName)=>{\n    if (!rPath) {\n        return rName;\n    }\n    const transformPath = (str)=>{\n        if (str === '.') {\n            return '';\n        }\n        if (str.startsWith('./')) {\n            return str.replace('./', '');\n        }\n        if (str.startsWith('/')) {\n            const strWithoutSlash = str.slice(1);\n            if (strWithoutSlash.endsWith('/')) {\n                return strWithoutSlash.slice(0, -1);\n            }\n            return strWithoutSlash;\n        }\n        return str;\n    };\n    const transformedPath = transformPath(rPath);\n    if (!transformedPath) {\n        return rName;\n    }\n    if (transformedPath.endsWith('/')) {\n        return `${transformedPath}${rName}`;\n    }\n    return `${transformedPath}/${rName}`;\n};\nfunction inferAutoPublicPath(url) {\n    return url.replace(/#.*$/, '').replace(/\\?.*$/, '').replace(/\\/[^\\/]+$/, '/');\n}\n// Priority: overrides > remotes\n// eslint-disable-next-line max-lines-per-function\nfunction generateSnapshotFromManifest(manifest, options = {}) {\n    var _manifest_metaData, _manifest_metaData1;\n    const { remotes = {}, overrides = {}, version } = options;\n    let remoteSnapshot;\n    const getPublicPath = ()=>{\n        if ('publicPath' in manifest.metaData) {\n            if (manifest.metaData.publicPath === 'auto' && version) {\n                // use same implementation as publicPath auto runtime module implements\n                return inferAutoPublicPath(version);\n            }\n            return manifest.metaData.publicPath;\n        } else {\n            return manifest.metaData.getPublicPath;\n        }\n    };\n    const overridesKeys = Object.keys(overrides);\n    let remotesInfo = {};\n    // If remotes are not provided, only the remotes in the manifest will be read\n    if (!Object.keys(remotes).length) {\n        var _manifest_remotes;\n        remotesInfo = ((_manifest_remotes = manifest.remotes) == null ? void 0 : _manifest_remotes.reduce((res, next)=>{\n            let matchedVersion;\n            const name = next.federationContainerName;\n            // overrides have higher priority\n            if (overridesKeys.includes(name)) {\n                matchedVersion = overrides[name];\n            } else {\n                if ('version' in next) {\n                    matchedVersion = next.version;\n                } else {\n                    matchedVersion = next.entry;\n                }\n            }\n            res[name] = {\n                matchedVersion\n            };\n            return res;\n        }, {})) || {};\n    }\n    // If remotes (deploy scenario) are specified, they need to be traversed again\n    Object.keys(remotes).forEach((key)=>remotesInfo[key] = {\n            // overrides will override dependencies\n            matchedVersion: overridesKeys.includes(key) ? overrides[key] : remotes[key]\n        });\n    const { remoteEntry: { path: remoteEntryPath, name: remoteEntryName, type: remoteEntryType }, types: remoteTypes, buildInfo: { buildVersion }, globalName, ssrRemoteEntry } = manifest.metaData;\n    const { exposes } = manifest;\n    let basicRemoteSnapshot = {\n        version: version ? version : '',\n        buildVersion,\n        globalName,\n        remoteEntry: simpleJoinRemoteEntry(remoteEntryPath, remoteEntryName),\n        remoteEntryType,\n        remoteTypes: simpleJoinRemoteEntry(remoteTypes.path, remoteTypes.name),\n        remoteTypesZip: remoteTypes.zip || '',\n        remoteTypesAPI: remoteTypes.api || '',\n        remotesInfo,\n        shared: manifest == null ? void 0 : manifest.shared.map((item)=>({\n                assets: item.assets,\n                sharedName: item.name,\n                version: item.version\n            })),\n        modules: exposes == null ? void 0 : exposes.map((expose)=>({\n                moduleName: expose.name,\n                modulePath: expose.path,\n                assets: expose.assets\n            }))\n    };\n    if ((_manifest_metaData = manifest.metaData) == null ? void 0 : _manifest_metaData.prefetchInterface) {\n        const prefetchInterface = manifest.metaData.prefetchInterface;\n        basicRemoteSnapshot = _extends({}, basicRemoteSnapshot, {\n            prefetchInterface\n        });\n    }\n    if ((_manifest_metaData1 = manifest.metaData) == null ? void 0 : _manifest_metaData1.prefetchEntry) {\n        const { path, name, type } = manifest.metaData.prefetchEntry;\n        basicRemoteSnapshot = _extends({}, basicRemoteSnapshot, {\n            prefetchEntry: simpleJoinRemoteEntry(path, name),\n            prefetchEntryType: type\n        });\n    }\n    if ('publicPath' in manifest.metaData) {\n        remoteSnapshot = _extends({}, basicRemoteSnapshot, {\n            publicPath: getPublicPath()\n        });\n    } else {\n        remoteSnapshot = _extends({}, basicRemoteSnapshot, {\n            getPublicPath: getPublicPath()\n        });\n    }\n    if (ssrRemoteEntry) {\n        const fullSSRRemoteEntry = simpleJoinRemoteEntry(ssrRemoteEntry.path, ssrRemoteEntry.name);\n        remoteSnapshot.ssrRemoteEntry = fullSSRRemoteEntry;\n        remoteSnapshot.ssrRemoteEntryType = ssrRemoteEntry.type || 'commonjs-module';\n    }\n    return remoteSnapshot;\n}\nfunction isManifestProvider(moduleInfo) {\n    if ('remoteEntry' in moduleInfo && moduleInfo.remoteEntry.includes(MANIFEST_EXT)) {\n        return true;\n    } else {\n        return false;\n    }\n}\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nasync function safeWrapper(callback, disableWarn) {\n    try {\n        const res = await callback();\n        return res;\n    } catch (e) {\n        !disableWarn && warn(e);\n        return;\n    }\n}\nfunction isStaticResourcesEqual(url1, url2) {\n    const REG_EXP = /^(https?:)?\\/\\//i;\n    // Transform url1 and url2 into relative paths\n    const relativeUrl1 = url1.replace(REG_EXP, '').replace(/\\/$/, '');\n    const relativeUrl2 = url2.replace(REG_EXP, '').replace(/\\/$/, '');\n    // Check if the relative paths are identical\n    return relativeUrl1 === relativeUrl2;\n}\nfunction createScript(info) {\n    // Retrieve the existing script element by its src attribute\n    let script = null;\n    let needAttach = true;\n    let timeout = 20000;\n    let timeoutId;\n    const scripts = document.getElementsByTagName('script');\n    for(let i = 0; i < scripts.length; i++){\n        const s = scripts[i];\n        const scriptSrc = s.getAttribute('src');\n        if (scriptSrc && isStaticResourcesEqual(scriptSrc, info.url)) {\n            script = s;\n            needAttach = false;\n            break;\n        }\n    }\n    if (!script) {\n        const attrs = info.attrs;\n        script = document.createElement('script');\n        script.type = (attrs == null ? void 0 : attrs['type']) === 'module' ? 'module' : 'text/javascript';\n        script.src = info.url;\n        let createScriptRes = undefined;\n        if (info.createScriptHook) {\n            createScriptRes = info.createScriptHook(info.url, info.attrs);\n            if (createScriptRes instanceof HTMLScriptElement) {\n                script = createScriptRes;\n            } else if (typeof createScriptRes === 'object') {\n                if ('script' in createScriptRes && createScriptRes.script) {\n                    script = createScriptRes.script;\n                }\n                if ('timeout' in createScriptRes && createScriptRes.timeout) {\n                    timeout = createScriptRes.timeout;\n                }\n            }\n        }\n        if (attrs && !createScriptRes) {\n            Object.keys(attrs).forEach((name)=>{\n                if (script) {\n                    if (name === 'async' || name === 'defer') {\n                        script[name] = attrs[name];\n                    // Attributes that do not exist are considered overridden\n                    } else if (!script.getAttribute(name)) {\n                        script.setAttribute(name, attrs[name]);\n                    }\n                }\n            });\n        }\n    }\n    const onScriptComplete = async (prev, // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    event)=>{\n        var _info_cb;\n        clearTimeout(timeoutId);\n        // Prevent memory leaks in IE.\n        if (script) {\n            script.onerror = null;\n            script.onload = null;\n            safeWrapper(()=>{\n                const { needDeleteScript = true } = info;\n                if (needDeleteScript) {\n                    (script == null ? void 0 : script.parentNode) && script.parentNode.removeChild(script);\n                }\n            });\n            if (prev && typeof prev === 'function') {\n                var _info_cb1;\n                const result = prev(event);\n                if (result instanceof Promise) {\n                    var _info_cb2;\n                    const res = await result;\n                    info == null ? void 0 : (_info_cb2 = info.cb) == null ? void 0 : _info_cb2.call(info);\n                    return res;\n                }\n                info == null ? void 0 : (_info_cb1 = info.cb) == null ? void 0 : _info_cb1.call(info);\n                return result;\n            }\n        }\n        info == null ? void 0 : (_info_cb = info.cb) == null ? void 0 : _info_cb.call(info);\n    };\n    script.onerror = onScriptComplete.bind(null, script.onerror);\n    script.onload = onScriptComplete.bind(null, script.onload);\n    timeoutId = setTimeout(()=>{\n        onScriptComplete(null, new Error(`Remote script \"${info.url}\" time-outed.`));\n    }, timeout);\n    return {\n        script,\n        needAttach\n    };\n}\nfunction createLink(info) {\n    // <link rel=\"preload\" href=\"script.js\" as=\"script\">\n    // Retrieve the existing script element by its src attribute\n    let link = null;\n    let needAttach = true;\n    const links = document.getElementsByTagName('link');\n    for(let i = 0; i < links.length; i++){\n        const l = links[i];\n        const linkHref = l.getAttribute('href');\n        const linkRef = l.getAttribute('ref');\n        if (linkHref && isStaticResourcesEqual(linkHref, info.url) && linkRef === info.attrs['ref']) {\n            link = l;\n            needAttach = false;\n            break;\n        }\n    }\n    if (!link) {\n        link = document.createElement('link');\n        link.setAttribute('href', info.url);\n        let createLinkRes = undefined;\n        const attrs = info.attrs;\n        if (info.createLinkHook) {\n            createLinkRes = info.createLinkHook(info.url, attrs);\n            if (createLinkRes instanceof HTMLLinkElement) {\n                link = createLinkRes;\n            }\n        }\n        if (attrs && !createLinkRes) {\n            Object.keys(attrs).forEach((name)=>{\n                if (link && !link.getAttribute(name)) {\n                    link.setAttribute(name, attrs[name]);\n                }\n            });\n        }\n    }\n    const onLinkComplete = (prev, // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    event)=>{\n        // Prevent memory leaks in IE.\n        if (link) {\n            link.onerror = null;\n            link.onload = null;\n            safeWrapper(()=>{\n                const { needDeleteLink = true } = info;\n                if (needDeleteLink) {\n                    (link == null ? void 0 : link.parentNode) && link.parentNode.removeChild(link);\n                }\n            });\n            if (prev) {\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                const res = prev(event);\n                info.cb();\n                return res;\n            }\n        }\n        info.cb();\n    };\n    link.onerror = onLinkComplete.bind(null, link.onerror);\n    link.onload = onLinkComplete.bind(null, link.onload);\n    return {\n        link,\n        needAttach\n    };\n}\nfunction loadScript(url, info) {\n    const { attrs = {}, createScriptHook } = info;\n    return new Promise((resolve, _reject)=>{\n        const { script, needAttach } = createScript({\n            url,\n            cb: resolve,\n            attrs: _extends({\n                fetchpriority: 'high'\n            }, attrs),\n            createScriptHook,\n            needDeleteScript: true\n        });\n        needAttach && document.head.appendChild(script);\n    });\n}\n\nfunction importNodeModule(name) {\n    if (!name) {\n        throw new Error('import specifier is required');\n    }\n    const importModule = new Function('name', `return import(name)`);\n    return importModule(name).then((res)=>res).catch((error)=>{\n        console.error(`Error importing module ${name}:`, error);\n        throw error;\n    });\n}\nconst loadNodeFetch = async ()=>{\n    const fetchModule = await importNodeModule('node-fetch');\n    return fetchModule.default || fetchModule;\n};\nconst lazyLoaderHookFetch = async (input, init)=>{\n    // @ts-ignore\n    const loaderHooks = __webpack_require__.federation.instance.loaderHook;\n    const hook = (url, init)=>{\n        return loaderHooks.lifecycle.fetch.emit(url, init);\n    };\n    const res = await hook(input, init || {});\n    if (!res || !(res instanceof Response)) {\n        const fetchFunction = typeof fetch === 'undefined' ? await loadNodeFetch() : fetch;\n        return fetchFunction(input, init || {});\n    }\n    return res;\n};\nfunction createScriptNode(url, cb, attrs, createScriptHook) {\n    if (createScriptHook) {\n        const hookResult = createScriptHook(url);\n        if (hookResult && typeof hookResult === 'object' && 'url' in hookResult) {\n            url = hookResult.url;\n        }\n    }\n    let urlObj;\n    try {\n        urlObj = new URL(url);\n    } catch (e) {\n        console.error('Error constructing URL:', e);\n        cb(new Error(`Invalid URL: ${e}`));\n        return;\n    }\n    const getFetch = async ()=>{\n        //@ts-ignore\n        if (typeof __webpack_require__ !== 'undefined') {\n            try {\n                //@ts-ignore\n                const loaderHooks = __webpack_require__.federation.instance.loaderHook;\n                if (loaderHooks.lifecycle.fetch) {\n                    return lazyLoaderHookFetch;\n                }\n            } catch (e) {\n                console.warn('federation.instance.loaderHook.lifecycle.fetch failed:', e);\n            }\n        }\n        return typeof fetch === 'undefined' ? loadNodeFetch() : fetch;\n    };\n    const handleScriptFetch = async (f, urlObj)=>{\n        try {\n            var //@ts-ignore\n            _vm_constants;\n            const res = await f(urlObj.href);\n            const data = await res.text();\n            const [path, vm] = await Promise.all([\n                importNodeModule('path'),\n                importNodeModule('vm')\n            ]);\n            const scriptContext = {\n                exports: {},\n                module: {\n                    exports: {}\n                }\n            };\n            const urlDirname = urlObj.pathname.split('/').slice(0, -1).join('/');\n            const filename = path.basename(urlObj.pathname);\n            var _vm_constants_USE_MAIN_CONTEXT_DEFAULT_LOADER;\n            const script = new vm.Script(`(function(exports, module, require, __dirname, __filename) {${data}\\n})`, {\n                filename,\n                importModuleDynamically: (_vm_constants_USE_MAIN_CONTEXT_DEFAULT_LOADER = (_vm_constants = vm.constants) == null ? void 0 : _vm_constants.USE_MAIN_CONTEXT_DEFAULT_LOADER) != null ? _vm_constants_USE_MAIN_CONTEXT_DEFAULT_LOADER : importNodeModule\n            });\n            script.runInThisContext()(scriptContext.exports, scriptContext.module, eval('require'), urlDirname, filename);\n            const exportedInterface = scriptContext.module.exports || scriptContext.exports;\n            if (attrs && exportedInterface && attrs['globalName']) {\n                const container = exportedInterface[attrs['globalName']] || exportedInterface;\n                cb(undefined, container);\n                return;\n            }\n            cb(undefined, exportedInterface);\n        } catch (e) {\n            cb(e instanceof Error ? e : new Error(`Script execution error: ${e}`));\n        }\n    };\n    getFetch().then(async (f)=>{\n        if ((attrs == null ? void 0 : attrs['type']) === 'esm' || (attrs == null ? void 0 : attrs['type']) === 'module') {\n            return loadModule(urlObj.href, {\n                fetch: f,\n                vm: await importNodeModule('vm')\n            }).then(async (module)=>{\n                await module.evaluate();\n                cb(undefined, module.namespace);\n            }).catch((e)=>{\n                cb(e instanceof Error ? e : new Error(`Script execution error: ${e}`));\n            });\n        }\n        handleScriptFetch(f, urlObj);\n    }).catch((err)=>{\n        cb(err);\n    });\n}\nfunction loadScriptNode(url, info) {\n    return new Promise((resolve, reject)=>{\n        createScriptNode(url, (error, scriptContext)=>{\n            if (error) {\n                reject(error);\n            } else {\n                var _info_attrs, _info_attrs1;\n                const remoteEntryKey = (info == null ? void 0 : (_info_attrs = info.attrs) == null ? void 0 : _info_attrs['globalName']) || `__FEDERATION_${info == null ? void 0 : (_info_attrs1 = info.attrs) == null ? void 0 : _info_attrs1['name']}:custom__`;\n                const entryExports = globalThis[remoteEntryKey] = scriptContext;\n                resolve(entryExports);\n            }\n        }, info.attrs, info.createScriptHook);\n    });\n}\nasync function loadModule(url, options) {\n    const { fetch: fetch1, vm } = options;\n    const response = await fetch1(url);\n    const code = await response.text();\n    const module = new vm.SourceTextModule(code, {\n        // @ts-ignore\n        importModuleDynamically: async (specifier, script)=>{\n            const resolvedUrl = new URL(specifier, url).href;\n            return loadModule(resolvedUrl, options);\n        }\n    });\n    await module.link(async (specifier)=>{\n        const resolvedUrl = new URL(specifier, url).href;\n        const module = await loadModule(resolvedUrl, options);\n        return module;\n    });\n    return module;\n}\n\nfunction normalizeOptions(enableDefault, defaultOptions, key) {\n    return function(options) {\n        if (options === false) {\n            return false;\n        }\n        if (typeof options === 'undefined') {\n            if (enableDefault) {\n                return defaultOptions;\n            } else {\n                return false;\n            }\n        }\n        if (options === true) {\n            return defaultOptions;\n        }\n        if (options && typeof options === 'object') {\n            return _extends({}, defaultOptions, options);\n        }\n        throw new Error(`Unexpected type for \\`${key}\\`, expect boolean/undefined/object, got: ${typeof options}`);\n    };\n}\n\nexport { BROWSER_LOG_KEY, BROWSER_LOG_VALUE, ENCODE_NAME_PREFIX, EncodedNameTransformMap, FederationModuleManifest, Logger, MANIFEST_EXT, MFModuleType, MFPrefetchCommon, MODULE_DEVTOOL_IDENTIFIER, ManifestFileName, NameTransformMap, NameTransformSymbol, SEPARATOR, StatsFileName, TEMP_DIR, assert, composeKeyWithSeparator, ContainerPlugin as containerPlugin, ContainerReferencePlugin as containerReferencePlugin, createLink, createScript, createScriptNode, decodeName, encodeName, error, generateExposeFilename, generateShareFilename, generateSnapshotFromManifest, getProcessEnv, getResourceUrl, inferAutoPublicPath, isBrowserEnv, isDebugMode, isManifestProvider, isStaticResourcesEqual, loadScript, loadScriptNode, logger, ModuleFederationPlugin as moduleFederationPlugin, normalizeOptions, parseEntry, safeToString, safeWrapper, SharePlugin as sharePlugin, simpleJoinRemoteEntry, warn };\n","import { _ as _object_without_properties_loose, a as _extends } from './polyfills.esm.js';\nimport { isBrowserEnv, isDebugMode } from '@module-federation/sdk';\n\nfunction getBuilderId() {\n    //@ts-ignore\n    return typeof FEDERATION_BUILD_IDENTIFIER !== 'undefined' ? FEDERATION_BUILD_IDENTIFIER : '';\n}\n\nconst LOG_CATEGORY = '[ Federation Runtime ]';\n// eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types\nfunction assert(condition, msg) {\n    if (!condition) {\n        error(msg);\n    }\n}\nfunction error(msg) {\n    if (msg instanceof Error) {\n        msg.message = `${LOG_CATEGORY}: ${msg.message}`;\n        throw msg;\n    }\n    throw new Error(`${LOG_CATEGORY}: ${msg}`);\n}\nfunction warn(msg) {\n    if (msg instanceof Error) {\n        msg.message = `${LOG_CATEGORY}: ${msg.message}`;\n        console.warn(msg);\n    } else {\n        console.warn(`${LOG_CATEGORY}: ${msg}`);\n    }\n}\n\nfunction addUniqueItem(arr, item) {\n    if (arr.findIndex((name)=>name === item) === -1) {\n        arr.push(item);\n    }\n    return arr;\n}\nfunction getFMId(remoteInfo) {\n    if ('version' in remoteInfo && remoteInfo.version) {\n        return `${remoteInfo.name}:${remoteInfo.version}`;\n    } else if ('entry' in remoteInfo && remoteInfo.entry) {\n        return `${remoteInfo.name}:${remoteInfo.entry}`;\n    } else {\n        return `${remoteInfo.name}`;\n    }\n}\nfunction isRemoteInfoWithEntry(remote) {\n    return typeof remote.entry !== 'undefined';\n}\nfunction isPureRemoteEntry(remote) {\n    return !remote.entry.includes('.json') && remote.entry.includes('.js');\n}\nfunction isObject(val) {\n    return val && typeof val === 'object';\n}\nconst objectToString = Object.prototype.toString;\n// eslint-disable-next-line @typescript-eslint/ban-types\nfunction isPlainObject(val) {\n    return objectToString.call(val) === '[object Object]';\n}\nfunction arrayOptions(options) {\n    return Array.isArray(options) ? options : [\n        options\n    ];\n}\nfunction getRemoteEntryInfoFromSnapshot(snapshot) {\n    const defaultRemoteEntryInfo = {\n        url: '',\n        type: 'global',\n        globalName: ''\n    };\n    if (isBrowserEnv()) {\n        return 'remoteEntry' in snapshot ? {\n            url: snapshot.remoteEntry,\n            type: snapshot.remoteEntryType,\n            globalName: snapshot.globalName\n        } : defaultRemoteEntryInfo;\n    }\n    if ('ssrRemoteEntry' in snapshot) {\n        return {\n            url: snapshot.ssrRemoteEntry || defaultRemoteEntryInfo.url,\n            type: snapshot.ssrRemoteEntryType || defaultRemoteEntryInfo.type,\n            globalName: snapshot.globalName\n        };\n    }\n    return defaultRemoteEntryInfo;\n}\n\nconst nativeGlobal = (()=>{\n    try {\n        return new Function('return this')();\n    } catch (e) {\n        return globalThis;\n    }\n})();\nconst Global = nativeGlobal;\nfunction definePropertyGlobalVal(target, key, val) {\n    Object.defineProperty(target, key, {\n        value: val,\n        configurable: false,\n        writable: true\n    });\n}\nfunction includeOwnProperty(target, key) {\n    return Object.hasOwnProperty.call(target, key);\n}\n// This section is to prevent encapsulation by certain microfrontend frameworks. Due to reuse policies, sandbox escapes.\n// The sandbox in the microfrontend does not replicate the value of 'configurable'.\n// If there is no loading content on the global object, this section defines the loading object.\nif (!includeOwnProperty(globalThis, '__GLOBAL_LOADING_REMOTE_ENTRY__')) {\n    definePropertyGlobalVal(globalThis, '__GLOBAL_LOADING_REMOTE_ENTRY__', {});\n}\nconst globalLoading = globalThis.__GLOBAL_LOADING_REMOTE_ENTRY__;\nfunction setGlobalDefaultVal(target) {\n    var _target___FEDERATION__, _target___FEDERATION__1, _target___FEDERATION__2, _target___FEDERATION__3, _target___FEDERATION__4, _target___FEDERATION__5;\n    if (includeOwnProperty(target, '__VMOK__') && !includeOwnProperty(target, '__FEDERATION__')) {\n        definePropertyGlobalVal(target, '__FEDERATION__', target.__VMOK__);\n    }\n    if (!includeOwnProperty(target, '__FEDERATION__')) {\n        definePropertyGlobalVal(target, '__FEDERATION__', {\n            __GLOBAL_PLUGIN__: [],\n            __INSTANCES__: [],\n            moduleInfo: {},\n            __SHARE__: {},\n            __MANIFEST_LOADING__: {},\n            __PRELOADED_MAP__: new Map()\n        });\n        definePropertyGlobalVal(target, '__VMOK__', target.__FEDERATION__);\n    }\n    var ___GLOBAL_PLUGIN__;\n    (___GLOBAL_PLUGIN__ = (_target___FEDERATION__ = target.__FEDERATION__).__GLOBAL_PLUGIN__) != null ? ___GLOBAL_PLUGIN__ : _target___FEDERATION__.__GLOBAL_PLUGIN__ = [];\n    var ___INSTANCES__;\n    (___INSTANCES__ = (_target___FEDERATION__1 = target.__FEDERATION__).__INSTANCES__) != null ? ___INSTANCES__ : _target___FEDERATION__1.__INSTANCES__ = [];\n    var _moduleInfo;\n    (_moduleInfo = (_target___FEDERATION__2 = target.__FEDERATION__).moduleInfo) != null ? _moduleInfo : _target___FEDERATION__2.moduleInfo = {};\n    var ___SHARE__;\n    (___SHARE__ = (_target___FEDERATION__3 = target.__FEDERATION__).__SHARE__) != null ? ___SHARE__ : _target___FEDERATION__3.__SHARE__ = {};\n    var ___MANIFEST_LOADING__;\n    (___MANIFEST_LOADING__ = (_target___FEDERATION__4 = target.__FEDERATION__).__MANIFEST_LOADING__) != null ? ___MANIFEST_LOADING__ : _target___FEDERATION__4.__MANIFEST_LOADING__ = {};\n    var ___PRELOADED_MAP__;\n    (___PRELOADED_MAP__ = (_target___FEDERATION__5 = target.__FEDERATION__).__PRELOADED_MAP__) != null ? ___PRELOADED_MAP__ : _target___FEDERATION__5.__PRELOADED_MAP__ = new Map();\n}\nsetGlobalDefaultVal(globalThis);\nsetGlobalDefaultVal(nativeGlobal);\nfunction resetFederationGlobalInfo() {\n    globalThis.__FEDERATION__.__GLOBAL_PLUGIN__ = [];\n    globalThis.__FEDERATION__.__INSTANCES__ = [];\n    globalThis.__FEDERATION__.moduleInfo = {};\n    globalThis.__FEDERATION__.__SHARE__ = {};\n    globalThis.__FEDERATION__.__MANIFEST_LOADING__ = {};\n}\nfunction getGlobalFederationInstance(name, version) {\n    const buildId = getBuilderId();\n    return globalThis.__FEDERATION__.__INSTANCES__.find((GMInstance)=>{\n        if (buildId && GMInstance.options.id === getBuilderId()) {\n            return true;\n        }\n        if (GMInstance.options.name === name && !GMInstance.options.version && !version) {\n            return true;\n        }\n        if (GMInstance.options.name === name && version && GMInstance.options.version === version) {\n            return true;\n        }\n        return false;\n    });\n}\nfunction setGlobalFederationInstance(FederationInstance) {\n    globalThis.__FEDERATION__.__INSTANCES__.push(FederationInstance);\n}\nfunction getGlobalFederationConstructor() {\n    return globalThis.__FEDERATION__.__DEBUG_CONSTRUCTOR__;\n}\nfunction setGlobalFederationConstructor(FederationConstructor, isDebug = isDebugMode()) {\n    if (isDebug) {\n        globalThis.__FEDERATION__.__DEBUG_CONSTRUCTOR__ = FederationConstructor;\n        globalThis.__FEDERATION__.__DEBUG_CONSTRUCTOR_VERSION__ = \"0.6.10\";\n    }\n}\n// eslint-disable-next-line @typescript-eslint/ban-types\nfunction getInfoWithoutType(target, key) {\n    if (typeof key === 'string') {\n        const keyRes = target[key];\n        if (keyRes) {\n            return {\n                value: target[key],\n                key: key\n            };\n        } else {\n            const targetKeys = Object.keys(target);\n            for (const targetKey of targetKeys){\n                const [targetTypeOrName, _] = targetKey.split(':');\n                const nKey = `${targetTypeOrName}:${key}`;\n                const typeWithKeyRes = target[nKey];\n                if (typeWithKeyRes) {\n                    return {\n                        value: typeWithKeyRes,\n                        key: nKey\n                    };\n                }\n            }\n            return {\n                value: undefined,\n                key: key\n            };\n        }\n    } else {\n        throw new Error('key must be string');\n    }\n}\nconst getGlobalSnapshot = ()=>nativeGlobal.__FEDERATION__.moduleInfo;\nconst getTargetSnapshotInfoByModuleInfo = (moduleInfo, snapshot)=>{\n    // Check if the remote is included in the hostSnapshot\n    const moduleKey = getFMId(moduleInfo);\n    const getModuleInfo = getInfoWithoutType(snapshot, moduleKey).value;\n    // The remoteSnapshot might not include a version\n    if (getModuleInfo && !getModuleInfo.version && 'version' in moduleInfo && moduleInfo['version']) {\n        getModuleInfo.version = moduleInfo['version'];\n    }\n    if (getModuleInfo) {\n        return getModuleInfo;\n    }\n    // If the remote is not included in the hostSnapshot, deploy a micro app snapshot\n    if ('version' in moduleInfo && moduleInfo['version']) {\n        const { version } = moduleInfo, resModuleInfo = _object_without_properties_loose(moduleInfo, [\n            \"version\"\n        ]);\n        const moduleKeyWithoutVersion = getFMId(resModuleInfo);\n        const getModuleInfoWithoutVersion = getInfoWithoutType(nativeGlobal.__FEDERATION__.moduleInfo, moduleKeyWithoutVersion).value;\n        if ((getModuleInfoWithoutVersion == null ? void 0 : getModuleInfoWithoutVersion.version) === version) {\n            return getModuleInfoWithoutVersion;\n        }\n    }\n    return;\n};\nconst getGlobalSnapshotInfoByModuleInfo = (moduleInfo)=>getTargetSnapshotInfoByModuleInfo(moduleInfo, nativeGlobal.__FEDERATION__.moduleInfo);\nconst setGlobalSnapshotInfoByModuleInfo = (remoteInfo, moduleDetailInfo)=>{\n    const moduleKey = getFMId(remoteInfo);\n    nativeGlobal.__FEDERATION__.moduleInfo[moduleKey] = moduleDetailInfo;\n    return nativeGlobal.__FEDERATION__.moduleInfo;\n};\nconst addGlobalSnapshot = (moduleInfos)=>{\n    nativeGlobal.__FEDERATION__.moduleInfo = _extends({}, nativeGlobal.__FEDERATION__.moduleInfo, moduleInfos);\n    return ()=>{\n        const keys = Object.keys(moduleInfos);\n        for (const key of keys){\n            delete nativeGlobal.__FEDERATION__.moduleInfo[key];\n        }\n    };\n};\nconst getRemoteEntryExports = (name, globalName)=>{\n    const remoteEntryKey = globalName || `__FEDERATION_${name}:custom__`;\n    const entryExports = globalThis[remoteEntryKey];\n    return {\n        remoteEntryKey,\n        entryExports\n    };\n};\n// This function is used to register global plugins.\n// It iterates over the provided plugins and checks if they are already registered.\n// If a plugin is not registered, it is added to the global plugins.\n// If a plugin is already registered, a warning message is logged.\nconst registerGlobalPlugins = (plugins)=>{\n    const { __GLOBAL_PLUGIN__ } = nativeGlobal.__FEDERATION__;\n    plugins.forEach((plugin)=>{\n        if (__GLOBAL_PLUGIN__.findIndex((p)=>p.name === plugin.name) === -1) {\n            __GLOBAL_PLUGIN__.push(plugin);\n        } else {\n            warn(`The plugin ${plugin.name} has been registered.`);\n        }\n    });\n};\nconst getGlobalHostPlugins = ()=>nativeGlobal.__FEDERATION__.__GLOBAL_PLUGIN__;\nconst getPreloaded = (id)=>globalThis.__FEDERATION__.__PRELOADED_MAP__.get(id);\nconst setPreloaded = (id)=>globalThis.__FEDERATION__.__PRELOADED_MAP__.set(id, true);\n\nconst DEFAULT_SCOPE = 'default';\nconst DEFAULT_REMOTE_TYPE = 'global';\n\n// fork from https://github.com/originjs/vite-plugin-federation/blob/v1.1.12/packages/lib/src/utils/semver/index.ts\n// those constants are based on https://www.rubydoc.info/gems/semantic_range/3.0.0/SemanticRange#BUILDIDENTIFIER-constant\n// Copyright (c)\n// vite-plugin-federation is licensed under Mulan PSL v2.\n// You can use this software according to the terms and conditions of the Mulan PSL v2.\n// You may obtain a copy of Mulan PSL v2 at:\n//      http://license.coscl.org.cn/MulanPSL2\n// THIS SOFTWARE IS PROVIDED ON AN \"AS IS\" BASIS, WITHOUT WARRANTIES OF ANY KIND, EITHER EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO NON-INFRINGEMENT, MERCHANTABILITY OR FIT FOR A PARTICULAR PURPOSE.\n// See the Mulan PSL v2 for more details.\nconst buildIdentifier = '[0-9A-Za-z-]+';\nconst build = `(?:\\\\+(${buildIdentifier}(?:\\\\.${buildIdentifier})*))`;\nconst numericIdentifier = '0|[1-9]\\\\d*';\nconst numericIdentifierLoose = '[0-9]+';\nconst nonNumericIdentifier = '\\\\d*[a-zA-Z-][a-zA-Z0-9-]*';\nconst preReleaseIdentifierLoose = `(?:${numericIdentifierLoose}|${nonNumericIdentifier})`;\nconst preReleaseLoose = `(?:-?(${preReleaseIdentifierLoose}(?:\\\\.${preReleaseIdentifierLoose})*))`;\nconst preReleaseIdentifier = `(?:${numericIdentifier}|${nonNumericIdentifier})`;\nconst preRelease = `(?:-(${preReleaseIdentifier}(?:\\\\.${preReleaseIdentifier})*))`;\nconst xRangeIdentifier = `${numericIdentifier}|x|X|\\\\*`;\nconst xRangePlain = `[v=\\\\s]*(${xRangeIdentifier})(?:\\\\.(${xRangeIdentifier})(?:\\\\.(${xRangeIdentifier})(?:${preRelease})?${build}?)?)?`;\nconst hyphenRange = `^\\\\s*(${xRangePlain})\\\\s+-\\\\s+(${xRangePlain})\\\\s*$`;\nconst mainVersionLoose = `(${numericIdentifierLoose})\\\\.(${numericIdentifierLoose})\\\\.(${numericIdentifierLoose})`;\nconst loosePlain = `[v=\\\\s]*${mainVersionLoose}${preReleaseLoose}?${build}?`;\nconst gtlt = '((?:<|>)?=?)';\nconst comparatorTrim = `(\\\\s*)${gtlt}\\\\s*(${loosePlain}|${xRangePlain})`;\nconst loneTilde = '(?:~>?)';\nconst tildeTrim = `(\\\\s*)${loneTilde}\\\\s+`;\nconst loneCaret = '(?:\\\\^)';\nconst caretTrim = `(\\\\s*)${loneCaret}\\\\s+`;\nconst star = '(<|>)?=?\\\\s*\\\\*';\nconst caret = `^${loneCaret}${xRangePlain}$`;\nconst mainVersion = `(${numericIdentifier})\\\\.(${numericIdentifier})\\\\.(${numericIdentifier})`;\nconst fullPlain = `v?${mainVersion}${preRelease}?${build}?`;\nconst tilde = `^${loneTilde}${xRangePlain}$`;\nconst xRange = `^${gtlt}\\\\s*${xRangePlain}$`;\nconst comparator = `^${gtlt}\\\\s*(${fullPlain})$|^$`;\n// copy from semver package\nconst gte0 = '^\\\\s*>=\\\\s*0.0.0\\\\s*$';\n\n// fork from https://github.com/originjs/vite-plugin-federation/blob/v1.1.12/packages/lib/src/utils/semver/index.ts\n// Copyright (c)\n// vite-plugin-federation is licensed under Mulan PSL v2.\n// You can use this software according to the terms and conditions of the Mulan PSL v2.\n// You may obtain a copy of Mulan PSL v2 at:\n//      http://license.coscl.org.cn/MulanPSL2\n// THIS SOFTWARE IS PROVIDED ON AN \"AS IS\" BASIS, WITHOUT WARRANTIES OF ANY KIND, EITHER EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO NON-INFRINGEMENT, MERCHANTABILITY OR FIT FOR A PARTICULAR PURPOSE.\n// See the Mulan PSL v2 for more details.\nfunction parseRegex(source) {\n    return new RegExp(source);\n}\nfunction isXVersion(version) {\n    return !version || version.toLowerCase() === 'x' || version === '*';\n}\nfunction pipe(...fns) {\n    return (x)=>fns.reduce((v, f)=>f(v), x);\n}\nfunction extractComparator(comparatorString) {\n    return comparatorString.match(parseRegex(comparator));\n}\nfunction combineVersion(major, minor, patch, preRelease) {\n    const mainVersion = `${major}.${minor}.${patch}`;\n    if (preRelease) {\n        return `${mainVersion}-${preRelease}`;\n    }\n    return mainVersion;\n}\n\n// fork from https://github.com/originjs/vite-plugin-federation/blob/v1.1.12/packages/lib/src/utils/semver/index.ts\n// Copyright (c)\n// vite-plugin-federation is licensed under Mulan PSL v2.\n// You can use this software according to the terms and conditions of the Mulan PSL v2.\n// You may obtain a copy of Mulan PSL v2 at:\n//      http://license.coscl.org.cn/MulanPSL2\n// THIS SOFTWARE IS PROVIDED ON AN \"AS IS\" BASIS, WITHOUT WARRANTIES OF ANY KIND, EITHER EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO NON-INFRINGEMENT, MERCHANTABILITY OR FIT FOR A PARTICULAR PURPOSE.\n// See the Mulan PSL v2 for more details.\nfunction parseHyphen(range) {\n    return range.replace(parseRegex(hyphenRange), (_range, from, fromMajor, fromMinor, fromPatch, _fromPreRelease, _fromBuild, to, toMajor, toMinor, toPatch, toPreRelease)=>{\n        if (isXVersion(fromMajor)) {\n            from = '';\n        } else if (isXVersion(fromMinor)) {\n            from = `>=${fromMajor}.0.0`;\n        } else if (isXVersion(fromPatch)) {\n            from = `>=${fromMajor}.${fromMinor}.0`;\n        } else {\n            from = `>=${from}`;\n        }\n        if (isXVersion(toMajor)) {\n            to = '';\n        } else if (isXVersion(toMinor)) {\n            to = `<${Number(toMajor) + 1}.0.0-0`;\n        } else if (isXVersion(toPatch)) {\n            to = `<${toMajor}.${Number(toMinor) + 1}.0-0`;\n        } else if (toPreRelease) {\n            to = `<=${toMajor}.${toMinor}.${toPatch}-${toPreRelease}`;\n        } else {\n            to = `<=${to}`;\n        }\n        return `${from} ${to}`.trim();\n    });\n}\nfunction parseComparatorTrim(range) {\n    return range.replace(parseRegex(comparatorTrim), '$1$2$3');\n}\nfunction parseTildeTrim(range) {\n    return range.replace(parseRegex(tildeTrim), '$1~');\n}\nfunction parseCaretTrim(range) {\n    return range.replace(parseRegex(caretTrim), '$1^');\n}\nfunction parseCarets(range) {\n    return range.trim().split(/\\s+/).map((rangeVersion)=>rangeVersion.replace(parseRegex(caret), (_, major, minor, patch, preRelease)=>{\n            if (isXVersion(major)) {\n                return '';\n            } else if (isXVersion(minor)) {\n                return `>=${major}.0.0 <${Number(major) + 1}.0.0-0`;\n            } else if (isXVersion(patch)) {\n                if (major === '0') {\n                    return `>=${major}.${minor}.0 <${major}.${Number(minor) + 1}.0-0`;\n                } else {\n                    return `>=${major}.${minor}.0 <${Number(major) + 1}.0.0-0`;\n                }\n            } else if (preRelease) {\n                if (major === '0') {\n                    if (minor === '0') {\n                        return `>=${major}.${minor}.${patch}-${preRelease} <${major}.${minor}.${Number(patch) + 1}-0`;\n                    } else {\n                        return `>=${major}.${minor}.${patch}-${preRelease} <${major}.${Number(minor) + 1}.0-0`;\n                    }\n                } else {\n                    return `>=${major}.${minor}.${patch}-${preRelease} <${Number(major) + 1}.0.0-0`;\n                }\n            } else {\n                if (major === '0') {\n                    if (minor === '0') {\n                        return `>=${major}.${minor}.${patch} <${major}.${minor}.${Number(patch) + 1}-0`;\n                    } else {\n                        return `>=${major}.${minor}.${patch} <${major}.${Number(minor) + 1}.0-0`;\n                    }\n                }\n                return `>=${major}.${minor}.${patch} <${Number(major) + 1}.0.0-0`;\n            }\n        })).join(' ');\n}\nfunction parseTildes(range) {\n    return range.trim().split(/\\s+/).map((rangeVersion)=>rangeVersion.replace(parseRegex(tilde), (_, major, minor, patch, preRelease)=>{\n            if (isXVersion(major)) {\n                return '';\n            } else if (isXVersion(minor)) {\n                return `>=${major}.0.0 <${Number(major) + 1}.0.0-0`;\n            } else if (isXVersion(patch)) {\n                return `>=${major}.${minor}.0 <${major}.${Number(minor) + 1}.0-0`;\n            } else if (preRelease) {\n                return `>=${major}.${minor}.${patch}-${preRelease} <${major}.${Number(minor) + 1}.0-0`;\n            }\n            return `>=${major}.${minor}.${patch} <${major}.${Number(minor) + 1}.0-0`;\n        })).join(' ');\n}\nfunction parseXRanges(range) {\n    return range.split(/\\s+/).map((rangeVersion)=>rangeVersion.trim().replace(parseRegex(xRange), (ret, gtlt, major, minor, patch, preRelease)=>{\n            const isXMajor = isXVersion(major);\n            const isXMinor = isXMajor || isXVersion(minor);\n            const isXPatch = isXMinor || isXVersion(patch);\n            if (gtlt === '=' && isXPatch) {\n                gtlt = '';\n            }\n            preRelease = '';\n            if (isXMajor) {\n                if (gtlt === '>' || gtlt === '<') {\n                    // nothing is allowed\n                    return '<0.0.0-0';\n                } else {\n                    // nothing is forbidden\n                    return '*';\n                }\n            } else if (gtlt && isXPatch) {\n                // replace X with 0\n                if (isXMinor) {\n                    minor = 0;\n                }\n                patch = 0;\n                if (gtlt === '>') {\n                    // >1 => >=2.0.0\n                    // >1.2 => >=1.3.0\n                    gtlt = '>=';\n                    if (isXMinor) {\n                        major = Number(major) + 1;\n                        minor = 0;\n                        patch = 0;\n                    } else {\n                        minor = Number(minor) + 1;\n                        patch = 0;\n                    }\n                } else if (gtlt === '<=') {\n                    // <=0.7.x is actually <0.8.0, since any 0.7.x should pass\n                    // Similarly, <=7.x is actually <8.0.0, etc.\n                    gtlt = '<';\n                    if (isXMinor) {\n                        major = Number(major) + 1;\n                    } else {\n                        minor = Number(minor) + 1;\n                    }\n                }\n                if (gtlt === '<') {\n                    preRelease = '-0';\n                }\n                return `${gtlt + major}.${minor}.${patch}${preRelease}`;\n            } else if (isXMinor) {\n                return `>=${major}.0.0${preRelease} <${Number(major) + 1}.0.0-0`;\n            } else if (isXPatch) {\n                return `>=${major}.${minor}.0${preRelease} <${major}.${Number(minor) + 1}.0-0`;\n            }\n            return ret;\n        })).join(' ');\n}\nfunction parseStar(range) {\n    return range.trim().replace(parseRegex(star), '');\n}\nfunction parseGTE0(comparatorString) {\n    return comparatorString.trim().replace(parseRegex(gte0), '');\n}\n\n// fork from https://github.com/originjs/vite-plugin-federation/blob/v1.1.12/packages/lib/src/utils/semver/index.ts\n// Copyright (c)\n// vite-plugin-federation is licensed under Mulan PSL v2.\n// You can use this software according to the terms and conditions of the Mulan PSL v2.\n// You may obtain a copy of Mulan PSL v2 at:\n//      http://license.coscl.org.cn/MulanPSL2\n// THIS SOFTWARE IS PROVIDED ON AN \"AS IS\" BASIS, WITHOUT WARRANTIES OF ANY KIND, EITHER EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO NON-INFRINGEMENT, MERCHANTABILITY OR FIT FOR A PARTICULAR PURPOSE.\n// See the Mulan PSL v2 for more details.\nfunction compareAtom(rangeAtom, versionAtom) {\n    rangeAtom = Number(rangeAtom) || rangeAtom;\n    versionAtom = Number(versionAtom) || versionAtom;\n    if (rangeAtom > versionAtom) {\n        return 1;\n    }\n    if (rangeAtom === versionAtom) {\n        return 0;\n    }\n    return -1;\n}\nfunction comparePreRelease(rangeAtom, versionAtom) {\n    const { preRelease: rangePreRelease } = rangeAtom;\n    const { preRelease: versionPreRelease } = versionAtom;\n    if (rangePreRelease === undefined && Boolean(versionPreRelease)) {\n        return 1;\n    }\n    if (Boolean(rangePreRelease) && versionPreRelease === undefined) {\n        return -1;\n    }\n    if (rangePreRelease === undefined && versionPreRelease === undefined) {\n        return 0;\n    }\n    for(let i = 0, n = rangePreRelease.length; i <= n; i++){\n        const rangeElement = rangePreRelease[i];\n        const versionElement = versionPreRelease[i];\n        if (rangeElement === versionElement) {\n            continue;\n        }\n        if (rangeElement === undefined && versionElement === undefined) {\n            return 0;\n        }\n        if (!rangeElement) {\n            return 1;\n        }\n        if (!versionElement) {\n            return -1;\n        }\n        return compareAtom(rangeElement, versionElement);\n    }\n    return 0;\n}\nfunction compareVersion(rangeAtom, versionAtom) {\n    return compareAtom(rangeAtom.major, versionAtom.major) || compareAtom(rangeAtom.minor, versionAtom.minor) || compareAtom(rangeAtom.patch, versionAtom.patch) || comparePreRelease(rangeAtom, versionAtom);\n}\nfunction eq(rangeAtom, versionAtom) {\n    return rangeAtom.version === versionAtom.version;\n}\nfunction compare(rangeAtom, versionAtom) {\n    switch(rangeAtom.operator){\n        case '':\n        case '=':\n            return eq(rangeAtom, versionAtom);\n        case '>':\n            return compareVersion(rangeAtom, versionAtom) < 0;\n        case '>=':\n            return eq(rangeAtom, versionAtom) || compareVersion(rangeAtom, versionAtom) < 0;\n        case '<':\n            return compareVersion(rangeAtom, versionAtom) > 0;\n        case '<=':\n            return eq(rangeAtom, versionAtom) || compareVersion(rangeAtom, versionAtom) > 0;\n        case undefined:\n            {\n                // mean * or x -> all versions\n                return true;\n            }\n        default:\n            return false;\n    }\n}\n\n// fork from https://github.com/originjs/vite-plugin-federation/blob/v1.1.12/packages/lib/src/utils/semver/index.ts\n// Copyright (c)\n// vite-plugin-federation is licensed under Mulan PSL v2.\n// You can use this software according to the terms and conditions of the Mulan PSL v2.\n// You may obtain a copy of Mulan PSL v2 at:\n//      http://license.coscl.org.cn/MulanPSL2\n// THIS SOFTWARE IS PROVIDED ON AN \"AS IS\" BASIS, WITHOUT WARRANTIES OF ANY KIND, EITHER EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO NON-INFRINGEMENT, MERCHANTABILITY OR FIT FOR A PARTICULAR PURPOSE.\n// See the Mulan PSL v2 for more details.\nfunction parseComparatorString(range) {\n    return pipe(// handle caret\n    // ^ --> * (any, kinda silly)\n    // ^2, ^2.x, ^2.x.x --> >=2.0.0 <3.0.0-0\n    // ^2.0, ^2.0.x --> >=2.0.0 <3.0.0-0\n    // ^1.2, ^1.2.x --> >=1.2.0 <2.0.0-0\n    // ^1.2.3 --> >=1.2.3 <2.0.0-0\n    // ^1.2.0 --> >=1.2.0 <2.0.0-0\n    parseCarets, // handle tilde\n    // ~, ~> --> * (any, kinda silly)\n    // ~2, ~2.x, ~2.x.x, ~>2, ~>2.x ~>2.x.x --> >=2.0.0 <3.0.0-0\n    // ~2.0, ~2.0.x, ~>2.0, ~>2.0.x --> >=2.0.0 <2.1.0-0\n    // ~1.2, ~1.2.x, ~>1.2, ~>1.2.x --> >=1.2.0 <1.3.0-0\n    // ~1.2.3, ~>1.2.3 --> >=1.2.3 <1.3.0-0\n    // ~1.2.0, ~>1.2.0 --> >=1.2.0 <1.3.0-0\n    parseTildes, parseXRanges, parseStar)(range);\n}\nfunction parseRange(range) {\n    return pipe(// handle hyphenRange\n    // `1.2.3 - 1.2.4` => `>=1.2.3 <=1.2.4`\n    parseHyphen, // handle trim comparator\n    // `> 1.2.3 < 1.2.5` => `>1.2.3 <1.2.5`\n    parseComparatorTrim, // handle trim tilde\n    // `~ 1.2.3` => `~1.2.3`\n    parseTildeTrim, // handle trim caret\n    // `^ 1.2.3` => `^1.2.3`\n    parseCaretTrim)(range.trim()).split(/\\s+/).join(' ');\n}\nfunction satisfy(version, range) {\n    if (!version) {\n        return false;\n    }\n    const parsedRange = parseRange(range);\n    const parsedComparator = parsedRange.split(' ').map((rangeVersion)=>parseComparatorString(rangeVersion)).join(' ');\n    const comparators = parsedComparator.split(/\\s+/).map((comparator)=>parseGTE0(comparator));\n    const extractedVersion = extractComparator(version);\n    if (!extractedVersion) {\n        return false;\n    }\n    const [, versionOperator, , versionMajor, versionMinor, versionPatch, versionPreRelease] = extractedVersion;\n    const versionAtom = {\n        operator: versionOperator,\n        version: combineVersion(versionMajor, versionMinor, versionPatch, versionPreRelease),\n        major: versionMajor,\n        minor: versionMinor,\n        patch: versionPatch,\n        preRelease: versionPreRelease == null ? void 0 : versionPreRelease.split('.')\n    };\n    for (const comparator of comparators){\n        const extractedComparator = extractComparator(comparator);\n        if (!extractedComparator) {\n            return false;\n        }\n        const [, rangeOperator, , rangeMajor, rangeMinor, rangePatch, rangePreRelease] = extractedComparator;\n        const rangeAtom = {\n            operator: rangeOperator,\n            version: combineVersion(rangeMajor, rangeMinor, rangePatch, rangePreRelease),\n            major: rangeMajor,\n            minor: rangeMinor,\n            patch: rangePatch,\n            preRelease: rangePreRelease == null ? void 0 : rangePreRelease.split('.')\n        };\n        if (!compare(rangeAtom, versionAtom)) {\n            return false; // early return\n        }\n    }\n    return true;\n}\n\nfunction formatShare(shareArgs, from, name, shareStrategy) {\n    let get;\n    if ('get' in shareArgs) {\n        // eslint-disable-next-line prefer-destructuring\n        get = shareArgs.get;\n    } else if ('lib' in shareArgs) {\n        get = ()=>Promise.resolve(shareArgs.lib);\n    } else {\n        get = ()=>Promise.resolve(()=>{\n                throw new Error(`Can not get shared '${name}'!`);\n            });\n    }\n    if (shareArgs.strategy) {\n        warn(`\"shared.strategy is deprecated, please set in initOptions.shareStrategy instead!\"`);\n    }\n    var _shareArgs_version, _shareArgs_scope, _shareArgs_strategy;\n    return _extends({\n        deps: [],\n        useIn: [],\n        from,\n        loading: null\n    }, shareArgs, {\n        shareConfig: _extends({\n            requiredVersion: `^${shareArgs.version}`,\n            singleton: false,\n            eager: false,\n            strictVersion: false\n        }, shareArgs.shareConfig),\n        get,\n        loaded: (shareArgs == null ? void 0 : shareArgs.loaded) || 'lib' in shareArgs ? true : undefined,\n        version: (_shareArgs_version = shareArgs.version) != null ? _shareArgs_version : '0',\n        scope: Array.isArray(shareArgs.scope) ? shareArgs.scope : [\n            (_shareArgs_scope = shareArgs.scope) != null ? _shareArgs_scope : 'default'\n        ],\n        strategy: ((_shareArgs_strategy = shareArgs.strategy) != null ? _shareArgs_strategy : shareStrategy) || 'version-first'\n    });\n}\nfunction formatShareConfigs(globalOptions, userOptions) {\n    const shareArgs = userOptions.shared || {};\n    const from = userOptions.name;\n    const shareInfos = Object.keys(shareArgs).reduce((res, pkgName)=>{\n        const arrayShareArgs = arrayOptions(shareArgs[pkgName]);\n        res[pkgName] = res[pkgName] || [];\n        arrayShareArgs.forEach((shareConfig)=>{\n            res[pkgName].push(formatShare(shareConfig, from, pkgName, userOptions.shareStrategy));\n        });\n        return res;\n    }, {});\n    const shared = _extends({}, globalOptions.shared);\n    Object.keys(shareInfos).forEach((shareKey)=>{\n        if (!shared[shareKey]) {\n            shared[shareKey] = shareInfos[shareKey];\n        } else {\n            shareInfos[shareKey].forEach((newUserSharedOptions)=>{\n                const isSameVersion = shared[shareKey].find((sharedVal)=>sharedVal.version === newUserSharedOptions.version);\n                if (!isSameVersion) {\n                    shared[shareKey].push(newUserSharedOptions);\n                }\n            });\n        }\n    });\n    return {\n        shared,\n        shareInfos\n    };\n}\nfunction versionLt(a, b) {\n    const transformInvalidVersion = (version)=>{\n        const isNumberVersion = !Number.isNaN(Number(version));\n        if (isNumberVersion) {\n            const splitArr = version.split('.');\n            let validVersion = version;\n            for(let i = 0; i < 3 - splitArr.length; i++){\n                validVersion += '.0';\n            }\n            return validVersion;\n        }\n        return version;\n    };\n    if (satisfy(transformInvalidVersion(a), `<=${transformInvalidVersion(b)}`)) {\n        return true;\n    } else {\n        return false;\n    }\n}\nconst findVersion = (shareVersionMap, cb)=>{\n    const callback = cb || function(prev, cur) {\n        return versionLt(prev, cur);\n    };\n    return Object.keys(shareVersionMap).reduce((prev, cur)=>{\n        if (!prev) {\n            return cur;\n        }\n        if (callback(prev, cur)) {\n            return cur;\n        }\n        // default version is '0' https://github.com/webpack/webpack/blob/main/lib/sharing/ProvideSharedModule.js#L136\n        if (prev === '0') {\n            return cur;\n        }\n        return prev;\n    }, 0);\n};\nconst isLoaded = (shared)=>{\n    return Boolean(shared.loaded) || typeof shared.lib === 'function';\n};\nfunction findSingletonVersionOrderByVersion(shareScopeMap, scope, pkgName) {\n    const versions = shareScopeMap[scope][pkgName];\n    const callback = function(prev, cur) {\n        return !isLoaded(versions[prev]) && versionLt(prev, cur);\n    };\n    return findVersion(shareScopeMap[scope][pkgName], callback);\n}\nfunction findSingletonVersionOrderByLoaded(shareScopeMap, scope, pkgName) {\n    const versions = shareScopeMap[scope][pkgName];\n    const callback = function(prev, cur) {\n        if (isLoaded(versions[cur])) {\n            if (isLoaded(versions[prev])) {\n                return Boolean(versionLt(prev, cur));\n            } else {\n                return true;\n            }\n        }\n        if (isLoaded(versions[prev])) {\n            return false;\n        }\n        return versionLt(prev, cur);\n    };\n    return findVersion(shareScopeMap[scope][pkgName], callback);\n}\nfunction getFindShareFunction(strategy) {\n    if (strategy === 'loaded-first') {\n        return findSingletonVersionOrderByLoaded;\n    }\n    return findSingletonVersionOrderByVersion;\n}\nfunction getRegisteredShare(localShareScopeMap, pkgName, shareInfo, resolveShare) {\n    if (!localShareScopeMap) {\n        return;\n    }\n    const { shareConfig, scope = DEFAULT_SCOPE, strategy } = shareInfo;\n    const scopes = Array.isArray(scope) ? scope : [\n        scope\n    ];\n    for (const sc of scopes){\n        if (shareConfig && localShareScopeMap[sc] && localShareScopeMap[sc][pkgName]) {\n            const { requiredVersion } = shareConfig;\n            const findShareFunction = getFindShareFunction(strategy);\n            const maxOrSingletonVersion = findShareFunction(localShareScopeMap, sc, pkgName);\n            //@ts-ignore\n            const defaultResolver = ()=>{\n                if (shareConfig.singleton) {\n                    if (typeof requiredVersion === 'string' && !satisfy(maxOrSingletonVersion, requiredVersion)) {\n                        const msg = `Version ${maxOrSingletonVersion} from ${maxOrSingletonVersion && localShareScopeMap[sc][pkgName][maxOrSingletonVersion].from} of shared singleton module ${pkgName} does not satisfy the requirement of ${shareInfo.from} which needs ${requiredVersion})`;\n                        if (shareConfig.strictVersion) {\n                            error(msg);\n                        } else {\n                            warn(msg);\n                        }\n                    }\n                    return localShareScopeMap[sc][pkgName][maxOrSingletonVersion];\n                } else {\n                    if (requiredVersion === false || requiredVersion === '*') {\n                        return localShareScopeMap[sc][pkgName][maxOrSingletonVersion];\n                    }\n                    if (satisfy(maxOrSingletonVersion, requiredVersion)) {\n                        return localShareScopeMap[sc][pkgName][maxOrSingletonVersion];\n                    }\n                    for (const [versionKey, versionValue] of Object.entries(localShareScopeMap[sc][pkgName])){\n                        if (satisfy(versionKey, requiredVersion)) {\n                            return versionValue;\n                        }\n                    }\n                }\n            };\n            const params = {\n                shareScopeMap: localShareScopeMap,\n                scope: sc,\n                pkgName,\n                version: maxOrSingletonVersion,\n                GlobalFederation: Global.__FEDERATION__,\n                resolver: defaultResolver\n            };\n            const resolveShared = resolveShare.emit(params) || params;\n            return resolveShared.resolver();\n        }\n    }\n}\nfunction getGlobalShareScope() {\n    return Global.__FEDERATION__.__SHARE__;\n}\nfunction getTargetSharedOptions(options) {\n    const { pkgName, extraOptions, shareInfos } = options;\n    const defaultResolver = (sharedOptions)=>{\n        if (!sharedOptions) {\n            return undefined;\n        }\n        const shareVersionMap = {};\n        sharedOptions.forEach((shared)=>{\n            shareVersionMap[shared.version] = shared;\n        });\n        const callback = function(prev, cur) {\n            return !isLoaded(shareVersionMap[prev]) && versionLt(prev, cur);\n        };\n        const maxVersion = findVersion(shareVersionMap, callback);\n        return shareVersionMap[maxVersion];\n    };\n    var _extraOptions_resolver;\n    const resolver = (_extraOptions_resolver = extraOptions == null ? void 0 : extraOptions.resolver) != null ? _extraOptions_resolver : defaultResolver;\n    return Object.assign({}, resolver(shareInfos[pkgName]), extraOptions == null ? void 0 : extraOptions.customShareInfo);\n}\n\nexport { isPlainObject as A, isRemoteInfoWithEntry as B, isPureRemoteEntry as C, DEFAULT_REMOTE_TYPE as D, getRemoteEntryInfoFromSnapshot as E, arrayOptions as F, Global as G, formatShareConfigs as H, getTargetSharedOptions as I, addUniqueItem as J, getBuilderId as K, getGlobalShareScope as a, getGlobalFederationInstance as b, getGlobalFederationConstructor as c, setGlobalFederationConstructor as d, getInfoWithoutType as e, getGlobalSnapshot as f, getRegisteredShare as g, getTargetSnapshotInfoByModuleInfo as h, getGlobalSnapshotInfoByModuleInfo as i, setGlobalSnapshotInfoByModuleInfo as j, addGlobalSnapshot as k, getRemoteEntryExports as l, registerGlobalPlugins as m, nativeGlobal as n, getGlobalHostPlugins as o, getPreloaded as p, setPreloaded as q, resetFederationGlobalInfo as r, setGlobalFederationInstance as s, globalLoading as t, DEFAULT_SCOPE as u, assert as v, getFMId as w, isObject as x, error as y, warn as z };\n","import { a as _extends, _ as _object_without_properties_loose } from './polyfills.esm.js';\nimport { isBrowserEnv, loadScriptNode, composeKeyWithSeparator, loadScript, safeToString, createLink, createScript, getResourceUrl, isManifestProvider, generateSnapshotFromManifest, warn as warn$1 } from '@module-federation/sdk';\nexport { loadScript, loadScriptNode } from '@module-federation/sdk';\nimport { o as getGlobalHostPlugins, t as globalLoading, D as DEFAULT_REMOTE_TYPE, u as DEFAULT_SCOPE, l as getRemoteEntryExports, v as assert, w as getFMId, x as isObject, y as error, z as warn, A as isPlainObject, B as isRemoteInfoWithEntry, C as isPureRemoteEntry, E as getRemoteEntryInfoFromSnapshot, e as getInfoWithoutType, p as getPreloaded, q as setPreloaded, g as getRegisteredShare, F as arrayOptions, i as getGlobalSnapshotInfoByModuleInfo, k as addGlobalSnapshot, j as setGlobalSnapshotInfoByModuleInfo, G as Global, f as getGlobalSnapshot, H as formatShareConfigs, I as getTargetSharedOptions, a as getGlobalShareScope, J as addUniqueItem, K as getBuilderId, d as setGlobalFederationConstructor, b as getGlobalFederationInstance, c as getGlobalFederationConstructor, s as setGlobalFederationInstance } from './share.esm.js';\nexport { m as registerGlobalPlugins } from './share.esm.js';\n\n// Function to match a remote with its name and expose\n// id: pkgName(@federation/app1) + expose(button) = @federation/app1/button\n// id: alias(app1) + expose(button) = app1/button\n// id: alias(app1/utils) + expose(loadash/sort) = app1/utils/loadash/sort\nfunction matchRemoteWithNameAndExpose(remotes, id) {\n  for (const remote of remotes) {\n    // match pkgName\n    const isNameMatched = id.startsWith(remote.name);\n    let expose = id.replace(remote.name, '');\n    if (isNameMatched) {\n      if (expose.startsWith('/')) {\n        const pkgNameOrAlias = remote.name;\n        expose = `.${expose}`;\n        return {\n          pkgNameOrAlias,\n          expose,\n          remote\n        };\n      } else if (expose === '') {\n        return {\n          pkgNameOrAlias: remote.name,\n          expose: '.',\n          remote\n        };\n      }\n    }\n    // match alias\n    const isAliasMatched = remote.alias && id.startsWith(remote.alias);\n    let exposeWithAlias = remote.alias && id.replace(remote.alias, '');\n    if (remote.alias && isAliasMatched) {\n      if (exposeWithAlias && exposeWithAlias.startsWith('/')) {\n        const pkgNameOrAlias = remote.alias;\n        exposeWithAlias = `.${exposeWithAlias}`;\n        return {\n          pkgNameOrAlias,\n          expose: exposeWithAlias,\n          remote\n        };\n      } else if (exposeWithAlias === '') {\n        return {\n          pkgNameOrAlias: remote.alias,\n          expose: '.',\n          remote\n        };\n      }\n    }\n  }\n  return;\n}\n// Function to match a remote with its name or alias\nfunction matchRemote(remotes, nameOrAlias) {\n  for (const remote of remotes) {\n    const isNameMatched = nameOrAlias === remote.name;\n    if (isNameMatched) {\n      return remote;\n    }\n    const isAliasMatched = remote.alias && nameOrAlias === remote.alias;\n    if (isAliasMatched) {\n      return remote;\n    }\n  }\n  return;\n}\n\nfunction registerPlugins$1(plugins, hookInstances) {\n  const globalPlugins = getGlobalHostPlugins();\n  // Incorporate global plugins\n  if (globalPlugins.length > 0) {\n    globalPlugins.forEach((plugin) => {\n      if (plugins == null ? void 0 : plugins.find((item) => item.name !== plugin.name)) {\n        plugins.push(plugin);\n      }\n    });\n  }\n  if (plugins && plugins.length > 0) {\n    plugins.forEach((plugin) => {\n      hookInstances.forEach((hookInstance) => {\n        hookInstance.applyPlugin(plugin);\n      });\n    });\n  }\n  return plugins;\n}\n\nasync function loadEsmEntry({ entry, remoteEntryExports }) {\n  return new Promise((resolve, reject) => {\n    try {\n      if (!remoteEntryExports) {\n        // eslint-disable-next-line no-eval\n        new Function('callbacks', `import(\"${entry}\").then(callbacks[0]).catch(callbacks[1])`)([\n          resolve,\n          reject\n        ]);\n      } else {\n        resolve(remoteEntryExports);\n      }\n    } catch (e) {\n      reject(e);\n    }\n  });\n}\nasync function loadSystemJsEntry({ entry, remoteEntryExports }) {\n  return new Promise((resolve, reject) => {\n    try {\n      if (!remoteEntryExports) {\n        // eslint-disable-next-line no-eval\n        new Function('callbacks', `System.import(\"${entry}\").then(callbacks[0]).catch(callbacks[1])`)([\n          resolve,\n          reject\n        ]);\n      } else {\n        resolve(remoteEntryExports);\n      }\n    } catch (e) {\n      reject(e);\n    }\n  });\n}\nasync function loadEntryScript({ name, globalName, entry, createScriptHook }) {\n  const { entryExports: remoteEntryExports } = getRemoteEntryExports(name, globalName);\n  if (remoteEntryExports) {\n    return remoteEntryExports;\n  }\n  return loadScript(entry, {\n    attrs: {},\n    createScriptHook: (url, attrs) => {\n      const res = createScriptHook.emit({\n        url,\n        attrs\n      });\n      if (!res) return;\n      if (res instanceof HTMLScriptElement) {\n        return res;\n      }\n      if ('script' in res || 'timeout' in res) {\n        return res;\n      }\n      return;\n    }\n  }).then(() => {\n    const { remoteEntryKey, entryExports } = getRemoteEntryExports(name, globalName);\n    assert(entryExports, `\n      Unable to use the ${name}'s '${entry}' URL with ${remoteEntryKey}'s globalName to get remoteEntry exports.\n      Possible reasons could be:\\n\n      1. '${entry}' is not the correct URL, or the remoteEntry resource or name is incorrect.\\n\n      2. ${remoteEntryKey} cannot be used to get remoteEntry exports in the window object.\n    `);\n    return entryExports;\n  }).catch((e) => {\n    throw e;\n  });\n}\nasync function loadEntryDom({ remoteInfo, remoteEntryExports, createScriptHook }) {\n  const { entry, entryGlobalName: globalName, name, type } = remoteInfo;\n  switch (type) {\n    case 'esm':\n    case 'module':\n      return loadEsmEntry({\n        entry,\n        remoteEntryExports\n      });\n    case 'system':\n      return loadSystemJsEntry({\n        entry,\n        remoteEntryExports\n      });\n    default:\n      return loadEntryScript({\n        entry,\n        globalName,\n        name,\n        createScriptHook\n      });\n  }\n}\nasync function loadEntryNode({ remoteInfo, createScriptHook }) {\n  const { entry, entryGlobalName: globalName, name, type } = remoteInfo;\n  const { entryExports: remoteEntryExports } = getRemoteEntryExports(name, globalName);\n  if (remoteEntryExports) {\n    return remoteEntryExports;\n  }\n  return loadScriptNode(entry, {\n    attrs: {\n      name,\n      globalName,\n      type\n    },\n    createScriptHook: (url, attrs) => {\n      const res = createScriptHook.emit({\n        url,\n        attrs\n      });\n      if (!res) return;\n      if ('url' in res) {\n        return res;\n      }\n      return;\n    }\n  }).then(() => {\n    const { remoteEntryKey, entryExports } = getRemoteEntryExports(name, globalName);\n    assert(entryExports, `\n      Unable to use the ${name}'s '${entry}' URL with ${remoteEntryKey}'s globalName to get remoteEntry exports.\n      Possible reasons could be:\\n\n      1. '${entry}' is not the correct URL, or the remoteEntry resource or name is incorrect.\\n\n      2. ${remoteEntryKey} cannot be used to get remoteEntry exports in the window object.\n    `);\n    return entryExports;\n  }).catch((e) => {\n    throw e;\n  });\n}\nfunction getRemoteEntryUniqueKey(remoteInfo) {\n  const { entry, name } = remoteInfo;\n  return composeKeyWithSeparator(name, entry);\n}\nasync function getRemoteEntry({ origin, remoteEntryExports, remoteInfo }) {\n  const uniqueKey = getRemoteEntryUniqueKey(remoteInfo);\n  if (remoteEntryExports) {\n    return remoteEntryExports;\n  }\n  if (!globalLoading[uniqueKey]) {\n    const loadEntryHook = origin.remoteHandler.hooks.lifecycle.loadEntry;\n    const createScriptHook = origin.loaderHook.lifecycle.createScript;\n    globalLoading[uniqueKey] = loadEntryHook.emit({\n      createScriptHook,\n      remoteInfo,\n      remoteEntryExports\n    }).then((res) => {\n      if (res) {\n        return res;\n      }\n      return isBrowserEnv() ? loadEntryDom({\n        remoteInfo,\n        remoteEntryExports,\n        createScriptHook\n      }) : loadEntryNode({\n        remoteInfo,\n        createScriptHook\n      });\n    });\n  }\n  return globalLoading[uniqueKey];\n}\nfunction getRemoteInfo(remote) {\n  return _extends({}, remote, {\n    entry: 'entry' in remote ? remote.entry : '',\n    type: remote.type || DEFAULT_REMOTE_TYPE,\n    entryGlobalName: remote.entryGlobalName || remote.name,\n    shareScope: remote.shareScope || DEFAULT_SCOPE\n  });\n}\n\nlet Module = class Module {\n  async getEntry() {\n    if (this.remoteEntryExports) {\n      return this.remoteEntryExports;\n    }\n    // Get remoteEntry.js\n    const remoteEntryExports = await getRemoteEntry({\n      origin: this.host,\n      remoteInfo: this.remoteInfo,\n      remoteEntryExports: this.remoteEntryExports\n    });\n    assert(remoteEntryExports, `remoteEntryExports is undefined \\n ${safeToString(this.remoteInfo)}`);\n    this.remoteEntryExports = remoteEntryExports;\n    return this.remoteEntryExports;\n  }\n  // eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types\n  async get(id, expose, options, remoteSnapshot) {\n    const { loadFactory = true } = options || {\n      loadFactory: true\n    };\n    // Get remoteEntry.js\n    const remoteEntryExports = await this.getEntry();\n    if (!this.inited) {\n      const localShareScopeMap = this.host.shareScopeMap;\n      const remoteShareScope = this.remoteInfo.shareScope || 'default';\n      if (!localShareScopeMap[remoteShareScope]) {\n        localShareScopeMap[remoteShareScope] = {};\n      }\n      const shareScope = localShareScopeMap[remoteShareScope];\n      const initScope = [];\n      const remoteEntryInitOptions = {\n        version: this.remoteInfo.version || ''\n      };\n      // Help to find host instance\n      Object.defineProperty(remoteEntryInitOptions, 'shareScopeMap', {\n        value: localShareScopeMap,\n        // remoteEntryInitOptions will be traversed and assigned during container init, ,so this attribute is not allowed to be traversed\n        enumerable: false\n      });\n      const initContainerOptions = await this.host.hooks.lifecycle.beforeInitContainer.emit({\n        shareScope,\n        // @ts-ignore shareScopeMap will be set by Object.defineProperty\n        remoteEntryInitOptions,\n        initScope,\n        remoteInfo: this.remoteInfo,\n        origin: this.host\n      });\n      if (typeof (remoteEntryExports == null ? void 0 : remoteEntryExports.init) === 'undefined') {\n        console.error('The remote entry interface does not contain \"init\"', '\\n', 'Ensure the name of this remote is not reserved or in use. Check if anything already exists on window[nameOfRemote]', '\\n', 'Ensure that window[nameOfRemote] is returning a {get,init} object.');\n      }\n      await remoteEntryExports.init(initContainerOptions.shareScope, initContainerOptions.initScope, initContainerOptions.remoteEntryInitOptions);\n      await this.host.hooks.lifecycle.initContainer.emit(_extends({}, initContainerOptions, {\n        id,\n        remoteSnapshot,\n        remoteEntryExports\n      }));\n    }\n    this.lib = remoteEntryExports;\n    this.inited = true;\n    // get exposeGetter\n    const moduleFactory = await remoteEntryExports.get(expose);\n    assert(moduleFactory, `${getFMId(this.remoteInfo)} remote don't export ${expose}.`);\n    const wrapModuleFactory = this.wraperFactory(moduleFactory, id);\n    if (!loadFactory) {\n      return wrapModuleFactory;\n    }\n    const exposeContent = await wrapModuleFactory();\n    return exposeContent;\n  }\n  wraperFactory(moduleFactory, id) {\n    function defineModuleId(res, id) {\n      if (res && typeof res === 'object' && Object.isExtensible(res) && !Object.getOwnPropertyDescriptor(res, Symbol.for('mf_module_id'))) {\n        Object.defineProperty(res, Symbol.for('mf_module_id'), {\n          value: id,\n          enumerable: false\n        });\n      }\n    }\n    if (moduleFactory instanceof Promise) {\n      return async () => {\n        const res = await moduleFactory();\n        // This parameter is used for bridge debugging\n        defineModuleId(res, id);\n        return res;\n      };\n    } else {\n      return () => {\n        const res = moduleFactory();\n        // This parameter is used for bridge debugging\n        defineModuleId(res, id);\n        return res;\n      };\n    }\n  }\n  constructor({ remoteInfo, host }) {\n    this.inited = false;\n    this.lib = undefined;\n    this.remoteInfo = remoteInfo;\n    this.host = host;\n  }\n};\n\nclass SyncHook {\n  on(fn) {\n    if (typeof fn === 'function') {\n      this.listeners.add(fn);\n    }\n  }\n  once(fn) {\n    // eslint-disable-next-line @typescript-eslint/no-this-alias\n    const self = this;\n    this.on(function wrapper(...args) {\n      self.remove(wrapper);\n      // eslint-disable-next-line prefer-spread\n      return fn.apply(null, args);\n    });\n  }\n  emit(...data) {\n    let result;\n    if (this.listeners.size > 0) {\n      // eslint-disable-next-line prefer-spread\n      this.listeners.forEach((fn) => {\n        result = fn(...data);\n      });\n    }\n    return result;\n  }\n  remove(fn) {\n    this.listeners.delete(fn);\n  }\n  removeAll() {\n    this.listeners.clear();\n  }\n  constructor(type) {\n    this.type = '';\n    this.listeners = new Set();\n    if (type) {\n      this.type = type;\n    }\n  }\n}\n\nclass AsyncHook extends SyncHook {\n  emit(...data) {\n    let result;\n    const ls = Array.from(this.listeners);\n    if (ls.length > 0) {\n      let i = 0;\n      const call = (prev) => {\n        if (prev === false) {\n          return false; // Abort process\n        } else if (i < ls.length) {\n          return Promise.resolve(ls[i++].apply(null, data)).then(call);\n        } else {\n          return prev;\n        }\n      };\n      result = call();\n    }\n    return Promise.resolve(result);\n  }\n}\n\n// eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types\nfunction checkReturnData(originalData, returnedData) {\n  if (!isObject(returnedData)) {\n    return false;\n  }\n  if (originalData !== returnedData) {\n    // eslint-disable-next-line no-restricted-syntax\n    for (const key in originalData) {\n      if (!(key in returnedData)) {\n        return false;\n      }\n    }\n  }\n  return true;\n}\nclass SyncWaterfallHook extends SyncHook {\n  emit(data) {\n    if (!isObject(data)) {\n      error(`The data for the \"${this.type}\" hook should be an object.`);\n    }\n    for (const fn of this.listeners) {\n      try {\n        const tempData = fn(data);\n        if (checkReturnData(data, tempData)) {\n          data = tempData;\n        } else {\n          this.onerror(`A plugin returned an unacceptable value for the \"${this.type}\" type.`);\n          break;\n        }\n      } catch (e) {\n        warn(e);\n        this.onerror(e);\n      }\n    }\n    return data;\n  }\n  constructor(type) {\n    super(), this.onerror = error;\n    this.type = type;\n  }\n}\n\nclass AsyncWaterfallHook extends SyncHook {\n  emit(data) {\n    if (!isObject(data)) {\n      error(`The response data for the \"${this.type}\" hook must be an object.`);\n    }\n    const ls = Array.from(this.listeners);\n    if (ls.length > 0) {\n      let i = 0;\n      const processError = (e) => {\n        warn(e);\n        this.onerror(e);\n        return data;\n      };\n      const call = (prevData) => {\n        if (checkReturnData(data, prevData)) {\n          data = prevData;\n          if (i < ls.length) {\n            try {\n              return Promise.resolve(ls[i++](data)).then(call, processError);\n            } catch (e) {\n              return processError(e);\n            }\n          }\n        } else {\n          this.onerror(`A plugin returned an incorrect value for the \"${this.type}\" type.`);\n        }\n        return data;\n      };\n      return Promise.resolve(call(data));\n    }\n    return Promise.resolve(data);\n  }\n  constructor(type) {\n    super(), this.onerror = error;\n    this.type = type;\n  }\n}\n\nclass PluginSystem {\n  applyPlugin(plugin) {\n    assert(isPlainObject(plugin), 'Plugin configuration is invalid.');\n    // The plugin's name is mandatory and must be unique\n    const pluginName = plugin.name;\n    assert(pluginName, 'A name must be provided by the plugin.');\n    if (!this.registerPlugins[pluginName]) {\n      this.registerPlugins[pluginName] = plugin;\n      Object.keys(this.lifecycle).forEach((key) => {\n        const pluginLife = plugin[key];\n        if (pluginLife) {\n          this.lifecycle[key].on(pluginLife);\n        }\n      });\n    }\n  }\n  removePlugin(pluginName) {\n    assert(pluginName, 'A name is required.');\n    const plugin = this.registerPlugins[pluginName];\n    assert(plugin, `The plugin \"${pluginName}\" is not registered.`);\n    Object.keys(plugin).forEach((key) => {\n      if (key !== 'name') {\n        this.lifecycle[key].remove(plugin[key]);\n      }\n    });\n  }\n  // eslint-disable-next-line @typescript-eslint/no-shadow\n  inherit({ lifecycle, registerPlugins }) {\n    Object.keys(lifecycle).forEach((hookName) => {\n      assert(!this.lifecycle[hookName], `The hook \"${hookName}\" has a conflict and cannot be inherited.`);\n      this.lifecycle[hookName] = lifecycle[hookName];\n    });\n    Object.keys(registerPlugins).forEach((pluginName) => {\n      assert(!this.registerPlugins[pluginName], `The plugin \"${pluginName}\" has a conflict and cannot be inherited.`);\n      this.applyPlugin(registerPlugins[pluginName]);\n    });\n  }\n  constructor(lifecycle) {\n    this.registerPlugins = {};\n    this.lifecycle = lifecycle;\n    this.lifecycleKeys = Object.keys(lifecycle);\n  }\n}\n\nfunction defaultPreloadArgs(preloadConfig) {\n  return _extends({\n    resourceCategory: 'sync',\n    share: true,\n    depsRemote: true,\n    prefetchInterface: false\n  }, preloadConfig);\n}\nfunction formatPreloadArgs(remotes, preloadArgs) {\n  return preloadArgs.map((args) => {\n    const remoteInfo = matchRemote(remotes, args.nameOrAlias);\n    assert(remoteInfo, `Unable to preload ${args.nameOrAlias} as it is not included in ${!remoteInfo && safeToString({\n      remoteInfo,\n      remotes\n    })}`);\n    return {\n      remote: remoteInfo,\n      preloadConfig: defaultPreloadArgs(args)\n    };\n  });\n}\nfunction normalizePreloadExposes(exposes) {\n  if (!exposes) {\n    return [];\n  }\n  return exposes.map((expose) => {\n    if (expose === '.') {\n      return expose;\n    }\n    if (expose.startsWith('./')) {\n      return expose.replace('./', '');\n    }\n    return expose;\n  });\n}\nfunction preloadAssets(remoteInfo, host, assets, // It is used to distinguish preload from load remote parallel loading\n  useLinkPreload = true) {\n  const { cssAssets, jsAssetsWithoutEntry, entryAssets } = assets;\n  if (host.options.inBrowser) {\n    entryAssets.forEach((asset) => {\n      const { moduleInfo } = asset;\n      const module = host.moduleCache.get(remoteInfo.name);\n      if (module) {\n        getRemoteEntry({\n          origin: host,\n          remoteInfo: moduleInfo,\n          remoteEntryExports: module.remoteEntryExports\n        });\n      } else {\n        getRemoteEntry({\n          origin: host,\n          remoteInfo: moduleInfo,\n          remoteEntryExports: undefined\n        });\n      }\n    });\n    if (useLinkPreload) {\n      const defaultAttrs = {\n        rel: 'preload',\n        as: 'style'\n      };\n      cssAssets.forEach((cssUrl) => {\n        const { link: cssEl, needAttach } = createLink({\n          url: cssUrl,\n          cb: () => {\n            // noop\n          },\n          attrs: defaultAttrs,\n          createLinkHook: (url, attrs) => {\n            const res = host.loaderHook.lifecycle.createLink.emit({\n              url,\n              attrs\n            });\n            if (res instanceof HTMLLinkElement) {\n              return res;\n            }\n            return;\n          }\n        });\n        needAttach && document.head.appendChild(cssEl);\n      });\n    } else {\n      const defaultAttrs = {\n        rel: 'stylesheet',\n        type: 'text/css'\n      };\n      cssAssets.forEach((cssUrl) => {\n        const { link: cssEl, needAttach } = createLink({\n          url: cssUrl,\n          cb: () => {\n            // noop\n          },\n          attrs: defaultAttrs,\n          createLinkHook: (url, attrs) => {\n            const res = host.loaderHook.lifecycle.createLink.emit({\n              url,\n              attrs\n            });\n            if (res instanceof HTMLLinkElement) {\n              return res;\n            }\n            return;\n          },\n          needDeleteLink: false\n        });\n        needAttach && document.head.appendChild(cssEl);\n      });\n    }\n    if (useLinkPreload) {\n      const defaultAttrs = {\n        rel: 'preload',\n        as: 'script'\n      };\n      jsAssetsWithoutEntry.forEach((jsUrl) => {\n        const { link: linkEl, needAttach } = createLink({\n          url: jsUrl,\n          cb: () => {\n            // noop\n          },\n          attrs: defaultAttrs,\n          createLinkHook: (url, attrs) => {\n            const res = host.loaderHook.lifecycle.createLink.emit({\n              url,\n              attrs\n            });\n            if (res instanceof HTMLLinkElement) {\n              return res;\n            }\n            return;\n          }\n        });\n        needAttach && document.head.appendChild(linkEl);\n      });\n    } else {\n      const defaultAttrs = {\n        fetchpriority: 'high',\n        type: (remoteInfo == null ? void 0 : remoteInfo.type) === 'module' ? 'module' : 'text/javascript'\n      };\n      jsAssetsWithoutEntry.forEach((jsUrl) => {\n        const { script: scriptEl, needAttach } = createScript({\n          url: jsUrl,\n          cb: () => {\n            // noop\n          },\n          attrs: defaultAttrs,\n          createScriptHook: (url, attrs) => {\n            const res = host.loaderHook.lifecycle.createScript.emit({\n              url,\n              attrs\n            });\n            if (res instanceof HTMLScriptElement) {\n              return res;\n            }\n            return;\n          },\n          needDeleteScript: true\n        });\n        needAttach && document.head.appendChild(scriptEl);\n      });\n    }\n  }\n}\n\nfunction assignRemoteInfo(remoteInfo, remoteSnapshot) {\n  const remoteEntryInfo = getRemoteEntryInfoFromSnapshot(remoteSnapshot);\n  if (!remoteEntryInfo.url) {\n    error(`The attribute remoteEntry of ${remoteInfo.name} must not be undefined.`);\n  }\n  let entryUrl = getResourceUrl(remoteSnapshot, remoteEntryInfo.url);\n  if (!isBrowserEnv() && !entryUrl.startsWith('http')) {\n    entryUrl = `https:${entryUrl}`;\n  }\n  remoteInfo.type = remoteEntryInfo.type;\n  remoteInfo.entryGlobalName = remoteEntryInfo.globalName;\n  remoteInfo.entry = entryUrl;\n  remoteInfo.version = remoteSnapshot.version;\n  remoteInfo.buildVersion = remoteSnapshot.buildVersion;\n}\nfunction snapshotPlugin() {\n  return {\n    name: 'snapshot-plugin',\n    async afterResolve(args) {\n      const { remote, pkgNameOrAlias, expose, origin, remoteInfo } = args;\n      if (!isRemoteInfoWithEntry(remote) || !isPureRemoteEntry(remote)) {\n        const { remoteSnapshot, globalSnapshot } = await origin.snapshotHandler.loadRemoteSnapshotInfo(remote);\n        assignRemoteInfo(remoteInfo, remoteSnapshot);\n        // preloading assets\n        const preloadOptions = {\n          remote,\n          preloadConfig: {\n            nameOrAlias: pkgNameOrAlias,\n            exposes: [\n              expose\n            ],\n            resourceCategory: 'sync',\n            share: false,\n            depsRemote: false\n          }\n        };\n        const assets = await origin.remoteHandler.hooks.lifecycle.generatePreloadAssets.emit({\n          origin,\n          preloadOptions,\n          remoteInfo,\n          remote,\n          remoteSnapshot,\n          globalSnapshot\n        });\n        if (assets) {\n          preloadAssets(remoteInfo, origin, assets, false);\n        }\n        return _extends({}, args, {\n          remoteSnapshot\n        });\n      }\n      return args;\n    }\n  };\n}\n\n// name\n// name:version\nfunction splitId(id) {\n  const splitInfo = id.split(':');\n  if (splitInfo.length === 1) {\n    return {\n      name: splitInfo[0],\n      version: undefined\n    };\n  } else if (splitInfo.length === 2) {\n    return {\n      name: splitInfo[0],\n      version: splitInfo[1]\n    };\n  } else {\n    return {\n      name: splitInfo[1],\n      version: splitInfo[2]\n    };\n  }\n}\n// Traverse all nodes in moduleInfo and traverse the entire snapshot\nfunction traverseModuleInfo(globalSnapshot, remoteInfo, traverse, isRoot, memo = {}, remoteSnapshot) {\n  const id = getFMId(remoteInfo);\n  const { value: snapshotValue } = getInfoWithoutType(globalSnapshot, id);\n  const effectiveRemoteSnapshot = remoteSnapshot || snapshotValue;\n  if (effectiveRemoteSnapshot && !isManifestProvider(effectiveRemoteSnapshot)) {\n    traverse(effectiveRemoteSnapshot, remoteInfo, isRoot);\n    if (effectiveRemoteSnapshot.remotesInfo) {\n      const remoteKeys = Object.keys(effectiveRemoteSnapshot.remotesInfo);\n      for (const key of remoteKeys) {\n        if (memo[key]) {\n          continue;\n        }\n        memo[key] = true;\n        const subRemoteInfo = splitId(key);\n        const remoteValue = effectiveRemoteSnapshot.remotesInfo[key];\n        traverseModuleInfo(globalSnapshot, {\n          name: subRemoteInfo.name,\n          version: remoteValue.matchedVersion\n        }, traverse, false, memo, undefined);\n      }\n    }\n  }\n}\n// eslint-disable-next-line max-lines-per-function\nfunction generatePreloadAssets(origin, preloadOptions, remote, globalSnapshot, remoteSnapshot) {\n  const cssAssets = [];\n  const jsAssets = [];\n  const entryAssets = [];\n  const loadedSharedJsAssets = new Set();\n  const loadedSharedCssAssets = new Set();\n  const { options } = origin;\n  const { preloadConfig: rootPreloadConfig } = preloadOptions;\n  const { depsRemote } = rootPreloadConfig;\n  const memo = {};\n  traverseModuleInfo(globalSnapshot, remote, (moduleInfoSnapshot, remoteInfo, isRoot) => {\n    let preloadConfig;\n    if (isRoot) {\n      preloadConfig = rootPreloadConfig;\n    } else {\n      if (Array.isArray(depsRemote)) {\n        // eslint-disable-next-line array-callback-return\n        const findPreloadConfig = depsRemote.find((remoteConfig) => {\n          if (remoteConfig.nameOrAlias === remoteInfo.name || remoteConfig.nameOrAlias === remoteInfo.alias) {\n            return true;\n          }\n          return false;\n        });\n        if (!findPreloadConfig) {\n          return;\n        }\n        preloadConfig = defaultPreloadArgs(findPreloadConfig);\n      } else if (depsRemote === true) {\n        preloadConfig = rootPreloadConfig;\n      } else {\n        return;\n      }\n    }\n    const remoteEntryUrl = getResourceUrl(moduleInfoSnapshot, getRemoteEntryInfoFromSnapshot(moduleInfoSnapshot).url);\n    if (remoteEntryUrl) {\n      entryAssets.push({\n        name: remoteInfo.name,\n        moduleInfo: {\n          name: remoteInfo.name,\n          entry: remoteEntryUrl,\n          type: 'remoteEntryType' in moduleInfoSnapshot ? moduleInfoSnapshot.remoteEntryType : 'global',\n          entryGlobalName: 'globalName' in moduleInfoSnapshot ? moduleInfoSnapshot.globalName : remoteInfo.name,\n          shareScope: '',\n          version: 'version' in moduleInfoSnapshot ? moduleInfoSnapshot.version : undefined\n        },\n        url: remoteEntryUrl\n      });\n    }\n    let moduleAssetsInfo = 'modules' in moduleInfoSnapshot ? moduleInfoSnapshot.modules : [];\n    const normalizedPreloadExposes = normalizePreloadExposes(preloadConfig.exposes);\n    if (normalizedPreloadExposes.length && 'modules' in moduleInfoSnapshot) {\n      var _moduleInfoSnapshot_modules;\n      moduleAssetsInfo = moduleInfoSnapshot == null ? void 0 : (_moduleInfoSnapshot_modules = moduleInfoSnapshot.modules) == null ? void 0 : _moduleInfoSnapshot_modules.reduce((assets, moduleAssetInfo) => {\n        if ((normalizedPreloadExposes == null ? void 0 : normalizedPreloadExposes.indexOf(moduleAssetInfo.moduleName)) !== -1) {\n          assets.push(moduleAssetInfo);\n        }\n        return assets;\n      }, []);\n    }\n    function handleAssets(assets) {\n      const assetsRes = assets.map((asset) => getResourceUrl(moduleInfoSnapshot, asset));\n      if (preloadConfig.filter) {\n        return assetsRes.filter(preloadConfig.filter);\n      }\n      return assetsRes;\n    }\n    if (moduleAssetsInfo) {\n      const assetsLength = moduleAssetsInfo.length;\n      for (let index = 0; index < assetsLength; index++) {\n        const assetsInfo = moduleAssetsInfo[index];\n        const exposeFullPath = `${remoteInfo.name}/${assetsInfo.moduleName}`;\n        origin.remoteHandler.hooks.lifecycle.handlePreloadModule.emit({\n          id: assetsInfo.moduleName === '.' ? remoteInfo.name : exposeFullPath,\n          name: remoteInfo.name,\n          remoteSnapshot: moduleInfoSnapshot,\n          preloadConfig,\n          remote: remoteInfo,\n          origin\n        });\n        const preloaded = getPreloaded(exposeFullPath);\n        if (preloaded) {\n          continue;\n        }\n        if (preloadConfig.resourceCategory === 'all') {\n          cssAssets.push(...handleAssets(assetsInfo.assets.css.async));\n          cssAssets.push(...handleAssets(assetsInfo.assets.css.sync));\n          jsAssets.push(...handleAssets(assetsInfo.assets.js.async));\n          jsAssets.push(...handleAssets(assetsInfo.assets.js.sync));\n          // eslint-disable-next-line no-constant-condition\n        } else if (preloadConfig.resourceCategory = 'sync') {\n          cssAssets.push(...handleAssets(assetsInfo.assets.css.sync));\n          jsAssets.push(...handleAssets(assetsInfo.assets.js.sync));\n        }\n        setPreloaded(exposeFullPath);\n      }\n    }\n  }, true, memo, remoteSnapshot);\n  if (remoteSnapshot.shared) {\n    const collectSharedAssets = (shareInfo, snapshotShared) => {\n      const registeredShared = getRegisteredShare(origin.shareScopeMap, snapshotShared.sharedName, shareInfo, origin.sharedHandler.hooks.lifecycle.resolveShare);\n      // If the global share does not exist, or the lib function does not exist, it means that the shared has not been loaded yet and can be preloaded.\n      if (registeredShared && typeof registeredShared.lib === 'function') {\n        snapshotShared.assets.js.sync.forEach((asset) => {\n          loadedSharedJsAssets.add(asset);\n        });\n        snapshotShared.assets.css.sync.forEach((asset) => {\n          loadedSharedCssAssets.add(asset);\n        });\n      }\n    };\n    remoteSnapshot.shared.forEach((shared) => {\n      var _options_shared;\n      const shareInfos = (_options_shared = options.shared) == null ? void 0 : _options_shared[shared.sharedName];\n      if (!shareInfos) {\n        return;\n      }\n      // if no version, preload all shared\n      const sharedOptions = shared.version ? shareInfos.find((s) => s.version === shared.version) : shareInfos;\n      if (!sharedOptions) {\n        return;\n      }\n      const arrayShareInfo = arrayOptions(sharedOptions);\n      arrayShareInfo.forEach((s) => {\n        collectSharedAssets(s, shared);\n      });\n    });\n  }\n  const needPreloadJsAssets = jsAssets.filter((asset) => !loadedSharedJsAssets.has(asset));\n  const needPreloadCssAssets = cssAssets.filter((asset) => !loadedSharedCssAssets.has(asset));\n  return {\n    cssAssets: needPreloadCssAssets,\n    jsAssetsWithoutEntry: needPreloadJsAssets,\n    entryAssets\n  };\n}\nconst generatePreloadAssetsPlugin = function () {\n  return {\n    name: 'generate-preload-assets-plugin',\n    async generatePreloadAssets(args) {\n      const { origin, preloadOptions, remoteInfo, remote, globalSnapshot, remoteSnapshot } = args;\n      if (isRemoteInfoWithEntry(remote) && isPureRemoteEntry(remote)) {\n        return {\n          cssAssets: [],\n          jsAssetsWithoutEntry: [],\n          entryAssets: [\n            {\n              name: remote.name,\n              url: remote.entry,\n              moduleInfo: {\n                name: remoteInfo.name,\n                entry: remote.entry,\n                type: remoteInfo.type || 'global',\n                entryGlobalName: '',\n                shareScope: ''\n              }\n            }\n          ]\n        };\n      }\n      assignRemoteInfo(remoteInfo, remoteSnapshot);\n      const assets = generatePreloadAssets(origin, preloadOptions, remoteInfo, globalSnapshot, remoteSnapshot);\n      return assets;\n    }\n  };\n};\n\nfunction getGlobalRemoteInfo(moduleInfo, origin) {\n  const hostGlobalSnapshot = getGlobalSnapshotInfoByModuleInfo({\n    name: origin.options.name,\n    version: origin.options.version\n  });\n  // get remote detail info from global\n  const globalRemoteInfo = hostGlobalSnapshot && 'remotesInfo' in hostGlobalSnapshot && hostGlobalSnapshot.remotesInfo && getInfoWithoutType(hostGlobalSnapshot.remotesInfo, moduleInfo.name).value;\n  if (globalRemoteInfo && globalRemoteInfo.matchedVersion) {\n    return {\n      hostGlobalSnapshot,\n      globalSnapshot: getGlobalSnapshot(),\n      remoteSnapshot: getGlobalSnapshotInfoByModuleInfo({\n        name: moduleInfo.name,\n        version: globalRemoteInfo.matchedVersion\n      })\n    };\n  }\n  return {\n    hostGlobalSnapshot: undefined,\n    globalSnapshot: getGlobalSnapshot(),\n    remoteSnapshot: getGlobalSnapshotInfoByModuleInfo({\n      name: moduleInfo.name,\n      version: 'version' in moduleInfo ? moduleInfo.version : undefined\n    })\n  };\n}\nclass SnapshotHandler {\n  async loadSnapshot(moduleInfo) {\n    const { options } = this.HostInstance;\n    const { hostGlobalSnapshot, remoteSnapshot, globalSnapshot } = this.getGlobalRemoteInfo(moduleInfo);\n    const { remoteSnapshot: globalRemoteSnapshot, globalSnapshot: globalSnapshotRes } = await this.hooks.lifecycle.loadSnapshot.emit({\n      options,\n      moduleInfo,\n      hostGlobalSnapshot,\n      remoteSnapshot,\n      globalSnapshot\n    });\n    return {\n      remoteSnapshot: globalRemoteSnapshot,\n      globalSnapshot: globalSnapshotRes\n    };\n  }\n  // eslint-disable-next-line max-lines-per-function\n  async loadRemoteSnapshotInfo(moduleInfo) {\n    const { options } = this.HostInstance;\n    await this.hooks.lifecycle.beforeLoadRemoteSnapshot.emit({\n      options,\n      moduleInfo\n    });\n    let hostSnapshot = getGlobalSnapshotInfoByModuleInfo({\n      name: this.HostInstance.options.name,\n      version: this.HostInstance.options.version\n    });\n    if (!hostSnapshot) {\n      hostSnapshot = {\n        version: this.HostInstance.options.version || '',\n        remoteEntry: '',\n        remotesInfo: {}\n      };\n      addGlobalSnapshot({\n        [this.HostInstance.options.name]: hostSnapshot\n      });\n    }\n    // In dynamic loadRemote scenarios, incomplete remotesInfo delivery may occur. In such cases, the remotesInfo in the host needs to be completed in the snapshot at runtime.\n    // This ensures the snapshot's integrity and helps the chrome plugin correctly identify all producer modules, ensuring that proxyable producer modules will not be missing.\n    if (hostSnapshot && 'remotesInfo' in hostSnapshot && !getInfoWithoutType(hostSnapshot.remotesInfo, moduleInfo.name).value) {\n      if ('version' in moduleInfo || 'entry' in moduleInfo) {\n        hostSnapshot.remotesInfo = _extends({}, hostSnapshot == null ? void 0 : hostSnapshot.remotesInfo, {\n          [moduleInfo.name]: {\n            matchedVersion: 'version' in moduleInfo ? moduleInfo.version : moduleInfo.entry\n          }\n        });\n      }\n    }\n    const { hostGlobalSnapshot, remoteSnapshot, globalSnapshot } = this.getGlobalRemoteInfo(moduleInfo);\n    const { remoteSnapshot: globalRemoteSnapshot, globalSnapshot: globalSnapshotRes } = await this.hooks.lifecycle.loadSnapshot.emit({\n      options,\n      moduleInfo,\n      hostGlobalSnapshot,\n      remoteSnapshot,\n      globalSnapshot\n    });\n    // global snapshot includes manifest or module info includes manifest\n    if (globalRemoteSnapshot) {\n      if (isManifestProvider(globalRemoteSnapshot)) {\n        const remoteEntry = isBrowserEnv() ? globalRemoteSnapshot.remoteEntry : globalRemoteSnapshot.ssrRemoteEntry || globalRemoteSnapshot.remoteEntry || '';\n        const moduleSnapshot = await this.getManifestJson(remoteEntry, moduleInfo, {});\n        // eslint-disable-next-line @typescript-eslint/no-shadow\n        const globalSnapshotRes = setGlobalSnapshotInfoByModuleInfo(_extends({}, moduleInfo, {\n          // The global remote may be overridden\n          // Therefore, set the snapshot key to the global address of the actual request\n          entry: remoteEntry\n        }), moduleSnapshot);\n        return {\n          remoteSnapshot: moduleSnapshot,\n          globalSnapshot: globalSnapshotRes\n        };\n      } else {\n        const { remoteSnapshot: remoteSnapshotRes } = await this.hooks.lifecycle.loadRemoteSnapshot.emit({\n          options: this.HostInstance.options,\n          moduleInfo,\n          remoteSnapshot: globalRemoteSnapshot,\n          from: 'global'\n        });\n        return {\n          remoteSnapshot: remoteSnapshotRes,\n          globalSnapshot: globalSnapshotRes\n        };\n      }\n    } else {\n      if (isRemoteInfoWithEntry(moduleInfo)) {\n        // get from manifest.json and merge remote info from remote server\n        const moduleSnapshot = await this.getManifestJson(moduleInfo.entry, moduleInfo, {});\n        // eslint-disable-next-line @typescript-eslint/no-shadow\n        const globalSnapshotRes = setGlobalSnapshotInfoByModuleInfo(moduleInfo, moduleSnapshot);\n        const { remoteSnapshot: remoteSnapshotRes } = await this.hooks.lifecycle.loadRemoteSnapshot.emit({\n          options: this.HostInstance.options,\n          moduleInfo,\n          remoteSnapshot: moduleSnapshot,\n          from: 'global'\n        });\n        return {\n          remoteSnapshot: remoteSnapshotRes,\n          globalSnapshot: globalSnapshotRes\n        };\n      } else {\n        error(`\n          Cannot get remoteSnapshot with the name: '${moduleInfo.name}', version: '${moduleInfo.version}' from __FEDERATION__.moduleInfo. The following reasons may be causing the problem:\\n\n          1. The Deploy platform did not deliver the correct data. You can use __FEDERATION__.moduleInfo to check the remoteInfo.\\n\n          2. The remote '${moduleInfo.name}' version '${moduleInfo.version}' is not released.\\n\n          The transformed module info: ${JSON.stringify(globalSnapshotRes)}\n        `);\n      }\n    }\n  }\n  getGlobalRemoteInfo(moduleInfo) {\n    return getGlobalRemoteInfo(moduleInfo, this.HostInstance);\n  }\n  async getManifestJson(manifestUrl, moduleInfo, extraOptions) {\n    const getManifest = async () => {\n      let manifestJson = this.manifestCache.get(manifestUrl);\n      if (manifestJson) {\n        return manifestJson;\n      }\n      try {\n        let res = await this.loaderHook.lifecycle.fetch.emit(manifestUrl, {});\n        if (!res || !(res instanceof Response)) {\n          res = await fetch(manifestUrl, {});\n        }\n        manifestJson = await res.json();\n        assert(manifestJson.metaData && manifestJson.exposes && manifestJson.shared, `${manifestUrl} is not a federation manifest`);\n        this.manifestCache.set(manifestUrl, manifestJson);\n        return manifestJson;\n      } catch (err) {\n        delete this.manifestLoading[manifestUrl];\n        error(`Failed to get manifestJson for ${moduleInfo.name}. The manifest URL is ${manifestUrl}. Please ensure that the manifestUrl is accessible.\n          \\n Error message:\n          \\n ${err}`);\n      }\n    };\n    const asyncLoadProcess = async () => {\n      const manifestJson = await getManifest();\n      const remoteSnapshot = generateSnapshotFromManifest(manifestJson, {\n        version: manifestUrl\n      });\n      const { remoteSnapshot: remoteSnapshotRes } = await this.hooks.lifecycle.loadRemoteSnapshot.emit({\n        options: this.HostInstance.options,\n        moduleInfo,\n        manifestJson,\n        remoteSnapshot,\n        manifestUrl,\n        from: 'manifest'\n      });\n      return remoteSnapshotRes;\n    };\n    if (!this.manifestLoading[manifestUrl]) {\n      this.manifestLoading[manifestUrl] = asyncLoadProcess().then((res) => res);\n    }\n    return this.manifestLoading[manifestUrl];\n  }\n  constructor(HostInstance) {\n    this.loadingHostSnapshot = null;\n    this.manifestCache = new Map();\n    this.hooks = new PluginSystem({\n      beforeLoadRemoteSnapshot: new AsyncHook('beforeLoadRemoteSnapshot'),\n      loadSnapshot: new AsyncWaterfallHook('loadGlobalSnapshot'),\n      loadRemoteSnapshot: new AsyncWaterfallHook('loadRemoteSnapshot')\n    });\n    this.manifestLoading = Global.__FEDERATION__.__MANIFEST_LOADING__;\n    this.HostInstance = HostInstance;\n    this.loaderHook = HostInstance.loaderHook;\n  }\n}\n\nclass SharedHandler {\n  // register shared in shareScopeMap\n  registerShared(globalOptions, userOptions) {\n    const { shareInfos, shared } = formatShareConfigs(globalOptions, userOptions);\n    const sharedKeys = Object.keys(shareInfos);\n    sharedKeys.forEach((sharedKey) => {\n      const sharedVals = shareInfos[sharedKey];\n      sharedVals.forEach((sharedVal) => {\n        const registeredShared = getRegisteredShare(this.shareScopeMap, sharedKey, sharedVal, this.hooks.lifecycle.resolveShare);\n        if (!registeredShared && sharedVal && sharedVal.lib) {\n          this.setShared({\n            pkgName: sharedKey,\n            lib: sharedVal.lib,\n            get: sharedVal.get,\n            loaded: true,\n            shared: sharedVal,\n            from: userOptions.name\n          });\n        }\n      });\n    });\n    return {\n      shareInfos,\n      shared\n    };\n  }\n  async loadShare(pkgName, extraOptions) {\n    const { host } = this;\n    // This function performs the following steps:\n    // 1. Checks if the currently loaded share already exists, if not, it throws an error\n    // 2. Searches globally for a matching share, if found, it uses it directly\n    // 3. If not found, it retrieves it from the current share and stores the obtained share globally.\n    const shareInfo = getTargetSharedOptions({\n      pkgName,\n      extraOptions,\n      shareInfos: host.options.shared\n    });\n    if (shareInfo == null ? void 0 : shareInfo.scope) {\n      await Promise.all(shareInfo.scope.map(async (shareScope) => {\n        await Promise.all(this.initializeSharing(shareScope, {\n          strategy: shareInfo.strategy\n        }));\n        return;\n      }));\n    }\n    const loadShareRes = await this.hooks.lifecycle.beforeLoadShare.emit({\n      pkgName,\n      shareInfo,\n      shared: host.options.shared,\n      origin: host\n    });\n    const { shareInfo: shareInfoRes } = loadShareRes;\n    // Assert that shareInfoRes exists, if not, throw an error\n    assert(shareInfoRes, `Cannot find ${pkgName} Share in the ${host.options.name}. Please ensure that the ${pkgName} Share parameters have been injected`);\n    // Retrieve from cache\n    const registeredShared = getRegisteredShare(this.shareScopeMap, pkgName, shareInfoRes, this.hooks.lifecycle.resolveShare);\n    const addUseIn = (shared) => {\n      if (!shared.useIn) {\n        shared.useIn = [];\n      }\n      addUniqueItem(shared.useIn, host.options.name);\n    };\n    if (registeredShared && registeredShared.lib) {\n      addUseIn(registeredShared);\n      return registeredShared.lib;\n    } else if (registeredShared && registeredShared.loading && !registeredShared.loaded) {\n      const factory = await registeredShared.loading;\n      registeredShared.loaded = true;\n      if (!registeredShared.lib) {\n        registeredShared.lib = factory;\n      }\n      addUseIn(registeredShared);\n      return factory;\n    } else if (registeredShared) {\n      const asyncLoadProcess = async () => {\n        const factory = await registeredShared.get();\n        shareInfoRes.lib = factory;\n        shareInfoRes.loaded = true;\n        addUseIn(shareInfoRes);\n        const gShared = getRegisteredShare(this.shareScopeMap, pkgName, shareInfoRes, this.hooks.lifecycle.resolveShare);\n        if (gShared) {\n          gShared.lib = factory;\n          gShared.loaded = true;\n        }\n        return factory;\n      };\n      const loading = asyncLoadProcess();\n      this.setShared({\n        pkgName,\n        loaded: false,\n        shared: registeredShared,\n        from: host.options.name,\n        lib: null,\n        loading\n      });\n      return loading;\n    } else {\n      if (extraOptions == null ? void 0 : extraOptions.customShareInfo) {\n        return false;\n      }\n      const asyncLoadProcess = async () => {\n        const factory = await shareInfoRes.get();\n        shareInfoRes.lib = factory;\n        shareInfoRes.loaded = true;\n        addUseIn(shareInfoRes);\n        const gShared = getRegisteredShare(this.shareScopeMap, pkgName, shareInfoRes, this.hooks.lifecycle.resolveShare);\n        if (gShared) {\n          gShared.lib = factory;\n          gShared.loaded = true;\n        }\n        return factory;\n      };\n      const loading = asyncLoadProcess();\n      this.setShared({\n        pkgName,\n        loaded: false,\n        shared: shareInfoRes,\n        from: host.options.name,\n        lib: null,\n        loading\n      });\n      return loading;\n    }\n  }\n  /**\n * This function initializes the sharing sequence (executed only once per share scope).\n * It accepts one argument, the name of the share scope.\n * If the share scope does not exist, it creates one.\n */ // eslint-disable-next-line @typescript-eslint/member-ordering\n  initializeSharing(shareScopeName = DEFAULT_SCOPE, extraOptions) {\n    const { host } = this;\n    const from = extraOptions == null ? void 0 : extraOptions.from;\n    const strategy = extraOptions == null ? void 0 : extraOptions.strategy;\n    let initScope = extraOptions == null ? void 0 : extraOptions.initScope;\n    const promises = [];\n    if (from !== 'build') {\n      const { initTokens } = this;\n      if (!initScope) initScope = [];\n      let initToken = initTokens[shareScopeName];\n      if (!initToken) initToken = initTokens[shareScopeName] = {\n        from: this.host.name\n      };\n      if (initScope.indexOf(initToken) >= 0) return promises;\n      initScope.push(initToken);\n    }\n    const shareScope = this.shareScopeMap;\n    const hostName = host.options.name;\n    // Creates a new share scope if necessary\n    if (!shareScope[shareScopeName]) {\n      shareScope[shareScopeName] = {};\n    }\n    // Executes all initialization snippets from all accessible modules\n    const scope = shareScope[shareScopeName];\n    const register = (name, shared) => {\n      var _activeVersion_shareConfig;\n      const { version, eager } = shared;\n      scope[name] = scope[name] || {};\n      const versions = scope[name];\n      const activeVersion = versions[version];\n      const activeVersionEager = Boolean(activeVersion && (activeVersion.eager || ((_activeVersion_shareConfig = activeVersion.shareConfig) == null ? void 0 : _activeVersion_shareConfig.eager)));\n      if (!activeVersion || activeVersion.strategy !== 'loaded-first' && !activeVersion.loaded && (Boolean(!eager) !== !activeVersionEager ? eager : hostName > activeVersion.from)) {\n        versions[version] = shared;\n      }\n    };\n    const initFn = (mod) => mod && mod.init && mod.init(shareScope[shareScopeName], initScope);\n    const initRemoteModule = async (key) => {\n      const { module } = await host.remoteHandler.getRemoteModuleAndOptions({\n        id: key\n      });\n      if (module.getEntry) {\n        let remoteEntryExports;\n        try {\n          remoteEntryExports = await module.getEntry();\n        } catch (error) {\n          remoteEntryExports = await host.remoteHandler.hooks.lifecycle.errorLoadRemote.emit({\n            id: key,\n            error,\n            from: 'runtime',\n            lifecycle: 'beforeLoadShare',\n            origin: host\n          });\n        }\n        if (!module.inited) {\n          await initFn(remoteEntryExports);\n          module.inited = true;\n        }\n      }\n    };\n    Object.keys(host.options.shared).forEach((shareName) => {\n      const sharedArr = host.options.shared[shareName];\n      sharedArr.forEach((shared) => {\n        if (shared.scope.includes(shareScopeName)) {\n          register(shareName, shared);\n        }\n      });\n    });\n    // TODO: strategy==='version-first' need to be removed in the future\n    if (host.options.shareStrategy === 'version-first' || strategy === 'version-first') {\n      host.options.remotes.forEach((remote) => {\n        if (remote.shareScope === shareScopeName) {\n          promises.push(initRemoteModule(remote.name));\n        }\n      });\n    }\n    return promises;\n  }\n  // The lib function will only be available if the shared set by eager or runtime init is set or the shared is successfully loaded.\n  // 1. If the loaded shared already exists globally, then it will be reused\n  // 2. If lib exists in local shared, it will be used directly\n  // 3. If the local get returns something other than Promise, then it will be used directly\n  loadShareSync(pkgName, extraOptions) {\n    const { host } = this;\n    const shareInfo = getTargetSharedOptions({\n      pkgName,\n      extraOptions,\n      shareInfos: host.options.shared\n    });\n    if (shareInfo == null ? void 0 : shareInfo.scope) {\n      shareInfo.scope.forEach((shareScope) => {\n        this.initializeSharing(shareScope, {\n          strategy: shareInfo.strategy\n        });\n      });\n    }\n    const registeredShared = getRegisteredShare(this.shareScopeMap, pkgName, shareInfo, this.hooks.lifecycle.resolveShare);\n    const addUseIn = (shared) => {\n      if (!shared.useIn) {\n        shared.useIn = [];\n      }\n      addUniqueItem(shared.useIn, host.options.name);\n    };\n    if (registeredShared) {\n      if (typeof registeredShared.lib === 'function') {\n        addUseIn(registeredShared);\n        if (!registeredShared.loaded) {\n          registeredShared.loaded = true;\n          if (registeredShared.from === host.options.name) {\n            shareInfo.loaded = true;\n          }\n        }\n        return registeredShared.lib;\n      }\n      if (typeof registeredShared.get === 'function') {\n        const module = registeredShared.get();\n        if (!(module instanceof Promise)) {\n          addUseIn(registeredShared);\n          this.setShared({\n            pkgName,\n            loaded: true,\n            from: host.options.name,\n            lib: module,\n            shared: registeredShared\n          });\n          return module;\n        }\n      }\n    }\n    if (shareInfo.lib) {\n      if (!shareInfo.loaded) {\n        shareInfo.loaded = true;\n      }\n      return shareInfo.lib;\n    }\n    if (shareInfo.get) {\n      const module = shareInfo.get();\n      if (module instanceof Promise) {\n        throw new Error(`\n        The loadShareSync function was unable to load ${pkgName}. The ${pkgName} could not be found in ${host.options.name}.\n        Possible reasons for failure: \\n\n        1. The ${pkgName} share was registered with the 'get' attribute, but loadShare was not used beforehand.\\n\n        2. The ${pkgName} share was not registered with the 'lib' attribute.\\n\n      `);\n      }\n      shareInfo.lib = module;\n      this.setShared({\n        pkgName,\n        loaded: true,\n        from: host.options.name,\n        lib: shareInfo.lib,\n        shared: shareInfo\n      });\n      return shareInfo.lib;\n    }\n    throw new Error(`\n        The loadShareSync function was unable to load ${pkgName}. The ${pkgName} could not be found in ${host.options.name}.\n        Possible reasons for failure: \\n\n        1. The ${pkgName} share was registered with the 'get' attribute, but loadShare was not used beforehand.\\n\n        2. The ${pkgName} share was not registered with the 'lib' attribute.\\n\n      `);\n  }\n  initShareScopeMap(scopeName, shareScope, extraOptions = {}) {\n    const { host } = this;\n    this.shareScopeMap[scopeName] = shareScope;\n    this.hooks.lifecycle.initContainerShareScopeMap.emit({\n      shareScope,\n      options: host.options,\n      origin: host,\n      scopeName,\n      hostShareScopeMap: extraOptions.hostShareScopeMap\n    });\n  }\n  setShared({ pkgName, shared, from, lib, loading, loaded, get }) {\n    const { version, scope = 'default' } = shared, shareInfo = _object_without_properties_loose(shared, [\n      \"version\",\n      \"scope\"\n    ]);\n    const scopes = Array.isArray(scope) ? scope : [\n      scope\n    ];\n    scopes.forEach((sc) => {\n      if (!this.shareScopeMap[sc]) {\n        this.shareScopeMap[sc] = {};\n      }\n      if (!this.shareScopeMap[sc][pkgName]) {\n        this.shareScopeMap[sc][pkgName] = {};\n      }\n      if (!this.shareScopeMap[sc][pkgName][version]) {\n        this.shareScopeMap[sc][pkgName][version] = _extends({\n          version,\n          scope: [\n            'default'\n          ]\n        }, shareInfo, {\n          lib,\n          loaded,\n          loading\n        });\n        if (get) {\n          this.shareScopeMap[sc][pkgName][version].get = get;\n        }\n        return;\n      }\n      const registeredShared = this.shareScopeMap[sc][pkgName][version];\n      if (loading && !registeredShared.loading) {\n        registeredShared.loading = loading;\n      }\n    });\n  }\n  _setGlobalShareScopeMap(hostOptions) {\n    const globalShareScopeMap = getGlobalShareScope();\n    const identifier = hostOptions.id || hostOptions.name;\n    if (identifier && !globalShareScopeMap[identifier]) {\n      globalShareScopeMap[identifier] = this.shareScopeMap;\n    }\n  }\n  constructor(host) {\n    this.hooks = new PluginSystem({\n      afterResolve: new AsyncWaterfallHook('afterResolve'),\n      beforeLoadShare: new AsyncWaterfallHook('beforeLoadShare'),\n      // not used yet\n      loadShare: new AsyncHook(),\n      resolveShare: new SyncWaterfallHook('resolveShare'),\n      // maybe will change, temporarily for internal use only\n      initContainerShareScopeMap: new SyncWaterfallHook('initContainerShareScopeMap')\n    });\n    this.host = host;\n    this.shareScopeMap = {};\n    this.initTokens = {};\n    this._setGlobalShareScopeMap(host.options);\n  }\n}\n\nclass RemoteHandler {\n  formatAndRegisterRemote(globalOptions, userOptions) {\n    const userRemotes = userOptions.remotes || [];\n    return userRemotes.reduce((res, remote) => {\n      this.registerRemote(remote, res, {\n        force: false\n      });\n      return res;\n    }, globalOptions.remotes);\n  }\n  setIdToRemoteMap(id, remoteMatchInfo) {\n    const { remote, expose } = remoteMatchInfo;\n    const { name, alias } = remote;\n    this.idToRemoteMap[id] = {\n      name: remote.name,\n      expose\n    };\n    if (alias && id.startsWith(name)) {\n      const idWithAlias = id.replace(name, alias);\n      this.idToRemoteMap[idWithAlias] = {\n        name: remote.name,\n        expose\n      };\n      return;\n    }\n    if (alias && id.startsWith(alias)) {\n      const idWithName = id.replace(alias, name);\n      this.idToRemoteMap[idWithName] = {\n        name: remote.name,\n        expose\n      };\n    }\n  }\n  // eslint-disable-next-line max-lines-per-function\n  // eslint-disable-next-line @typescript-eslint/member-ordering\n  async loadRemote(id, options) {\n    const { host } = this;\n    try {\n      const { loadFactory = true } = options || {\n        loadFactory: true\n      };\n      // 1. Validate the parameters of the retrieved module. There are two module request methods: pkgName + expose and alias + expose.\n      // 2. Request the snapshot information of the current host and globally store the obtained snapshot information. The retrieved module information is partially offline and partially online. The online module information will retrieve the modules used online.\n      // 3. Retrieve the detailed information of the current module from global (remoteEntry address, expose resource address)\n      // 4. After retrieving remoteEntry, call the init of the module, and then retrieve the exported content of the module through get\n      // id: pkgName(@federation/app1) + expose(button) = @federation/app1/button\n      // id: alias(app1) + expose(button) = app1/button\n      // id: alias(app1/utils) + expose(loadash/sort) = app1/utils/loadash/sort\n      const { module, moduleOptions, remoteMatchInfo } = await this.getRemoteModuleAndOptions({\n        id\n      });\n      const { pkgNameOrAlias, remote, expose, id: idRes, remoteSnapshot } = remoteMatchInfo;\n      const moduleOrFactory = await module.get(idRes, expose, options, remoteSnapshot);\n      const moduleWrapper = await this.hooks.lifecycle.onLoad.emit({\n        id: idRes,\n        pkgNameOrAlias,\n        expose,\n        exposeModule: loadFactory ? moduleOrFactory : undefined,\n        exposeModuleFactory: loadFactory ? undefined : moduleOrFactory,\n        remote,\n        options: moduleOptions,\n        moduleInstance: module,\n        origin: host\n      });\n      this.setIdToRemoteMap(id, remoteMatchInfo);\n      if (typeof moduleWrapper === 'function') {\n        return moduleWrapper;\n      }\n      return moduleOrFactory;\n    } catch (error) {\n      const { from = 'runtime' } = options || {\n        from: 'runtime'\n      };\n      const failOver = await this.hooks.lifecycle.errorLoadRemote.emit({\n        id,\n        error,\n        from,\n        lifecycle: 'onLoad',\n        origin: host\n      });\n      if (!failOver) {\n        throw error;\n      }\n      return failOver;\n    }\n  }\n  // eslint-disable-next-line @typescript-eslint/member-ordering\n  async preloadRemote(preloadOptions) {\n    const { host } = this;\n    await this.hooks.lifecycle.beforePreloadRemote.emit({\n      preloadOps: preloadOptions,\n      options: host.options,\n      origin: host\n    });\n    const preloadOps = formatPreloadArgs(host.options.remotes, preloadOptions);\n    await Promise.all(preloadOps.map(async (ops) => {\n      const { remote } = ops;\n      const remoteInfo = getRemoteInfo(remote);\n      const { globalSnapshot, remoteSnapshot } = await host.snapshotHandler.loadRemoteSnapshotInfo(remote);\n      const assets = await this.hooks.lifecycle.generatePreloadAssets.emit({\n        origin: host,\n        preloadOptions: ops,\n        remote,\n        remoteInfo,\n        globalSnapshot,\n        remoteSnapshot\n      });\n      if (!assets) {\n        return;\n      }\n      preloadAssets(remoteInfo, host, assets);\n    }));\n  }\n  registerRemotes(remotes, options) {\n    const { host } = this;\n    remotes.forEach((remote) => {\n      this.registerRemote(remote, host.options.remotes, {\n        force: options == null ? void 0 : options.force\n      });\n    });\n  }\n  async getRemoteModuleAndOptions(options) {\n    const { host } = this;\n    const { id } = options;\n    let loadRemoteArgs;\n    try {\n      loadRemoteArgs = await this.hooks.lifecycle.beforeRequest.emit({\n        id,\n        options: host.options,\n        origin: host\n      });\n    } catch (error) {\n      loadRemoteArgs = await this.hooks.lifecycle.errorLoadRemote.emit({\n        id,\n        options: host.options,\n        origin: host,\n        from: 'runtime',\n        error,\n        lifecycle: 'beforeRequest'\n      });\n      if (!loadRemoteArgs) {\n        throw error;\n      }\n    }\n    const { id: idRes } = loadRemoteArgs;\n    const remoteSplitInfo = matchRemoteWithNameAndExpose(host.options.remotes, idRes);\n    assert(remoteSplitInfo, `\n        Unable to locate ${idRes} in ${host.options.name}. Potential reasons for failure include:\\n\n        1. ${idRes} was not included in the 'remotes' parameter of ${host.options.name || 'the host'}.\\n\n        2. ${idRes} could not be found in the 'remotes' of ${host.options.name} with either 'name' or 'alias' attributes.\n        3. ${idRes} is not online, injected, or loaded.\n        4. ${idRes}  cannot be accessed on the expected.\n        5. The 'beforeRequest' hook was provided but did not return the correct 'remoteInfo' when attempting to load ${idRes}.\n      `);\n    const { remote: rawRemote } = remoteSplitInfo;\n    const remoteInfo = getRemoteInfo(rawRemote);\n    const matchInfo = await host.sharedHandler.hooks.lifecycle.afterResolve.emit(_extends({\n      id: idRes\n    }, remoteSplitInfo, {\n      options: host.options,\n      origin: host,\n      remoteInfo\n    }));\n    const { remote, expose } = matchInfo;\n    assert(remote && expose, `The 'beforeRequest' hook was executed, but it failed to return the correct 'remote' and 'expose' values while loading ${idRes}.`);\n    let module = host.moduleCache.get(remote.name);\n    const moduleOptions = {\n      host: host,\n      remoteInfo\n    };\n    if (!module) {\n      module = new Module(moduleOptions);\n      host.moduleCache.set(remote.name, module);\n    }\n    return {\n      module,\n      moduleOptions,\n      remoteMatchInfo: matchInfo\n    };\n  }\n  registerRemote(remote, targetRemotes, options) {\n    const { host } = this;\n    const normalizeRemote = () => {\n      if (remote.alias) {\n        // Validate if alias equals the prefix of remote.name and remote.alias, if so, throw an error\n        // As multi-level path references cannot guarantee unique names, alias being a prefix of remote.name is not supported\n        const findEqual = targetRemotes.find((item) => {\n          var _item_alias;\n          return remote.alias && (item.name.startsWith(remote.alias) || ((_item_alias = item.alias) == null ? void 0 : _item_alias.startsWith(remote.alias)));\n        });\n        assert(!findEqual, `The alias ${remote.alias} of remote ${remote.name} is not allowed to be the prefix of ${findEqual && findEqual.name} name or alias`);\n      }\n      // Set the remote entry to a complete path\n      if ('entry' in remote) {\n        if (isBrowserEnv() && !remote.entry.startsWith('http')) {\n          remote.entry = new URL(remote.entry, window.location.origin).href;\n        }\n      }\n      if (!remote.shareScope) {\n        remote.shareScope = DEFAULT_SCOPE;\n      }\n      if (!remote.type) {\n        remote.type = DEFAULT_REMOTE_TYPE;\n      }\n    };\n    this.hooks.lifecycle.beforeRegisterRemote.emit({\n      remote,\n      origin: host\n    });\n    const registeredRemote = targetRemotes.find((item) => item.name === remote.name);\n    if (!registeredRemote) {\n      normalizeRemote();\n      targetRemotes.push(remote);\n      this.hooks.lifecycle.registerRemote.emit({\n        remote,\n        origin: host\n      });\n    } else {\n      const messages = [\n        `The remote \"${remote.name}\" is already registered.`,\n        (options == null ? void 0 : options.force) ? 'Hope you have known that OVERRIDE it may have some unexpected errors' : 'If you want to merge the remote, you can set \"force: true\".'\n      ];\n      if (options == null ? void 0 : options.force) {\n        // remove registered remote\n        this.removeRemote(registeredRemote);\n        normalizeRemote();\n        targetRemotes.push(remote);\n        this.hooks.lifecycle.registerRemote.emit({\n          remote,\n          origin: host\n        });\n      }\n      warn$1(messages.join(' '));\n    }\n  }\n  removeRemote(remote) {\n    try {\n      const { host } = this;\n      const { name } = remote;\n      const remoteIndex = host.options.remotes.findIndex((item) => item.name === name);\n      if (remoteIndex !== -1) {\n        host.options.remotes.splice(remoteIndex, 1);\n      }\n      const loadedModule = host.moduleCache.get(remote.name);\n      if (loadedModule) {\n        const remoteInfo = loadedModule.remoteInfo;\n        const key = remoteInfo.entryGlobalName;\n        if (globalThis[key]) {\n          var _Object_getOwnPropertyDescriptor;\n          if ((_Object_getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor(globalThis, key)) == null ? void 0 : _Object_getOwnPropertyDescriptor.configurable) {\n            delete globalThis[key];\n          } else {\n            // @ts-ignore\n            globalThis[key] = undefined;\n          }\n        }\n        const remoteEntryUniqueKey = getRemoteEntryUniqueKey(loadedModule.remoteInfo);\n        if (globalLoading[remoteEntryUniqueKey]) {\n          delete globalLoading[remoteEntryUniqueKey];\n        }\n        host.snapshotHandler.manifestCache.delete(remoteInfo.entry);\n        // delete unloaded shared and instance\n        let remoteInsId = remoteInfo.buildVersion ? composeKeyWithSeparator(remoteInfo.name, remoteInfo.buildVersion) : remoteInfo.name;\n        const remoteInsIndex = globalThis.__FEDERATION__.__INSTANCES__.findIndex((ins) => {\n          if (remoteInfo.buildVersion) {\n            return ins.options.id === remoteInsId;\n          } else {\n            return ins.name === remoteInsId;\n          }\n        });\n        if (remoteInsIndex !== -1) {\n          const remoteIns = globalThis.__FEDERATION__.__INSTANCES__[remoteInsIndex];\n          remoteInsId = remoteIns.options.id || remoteInsId;\n          const globalShareScopeMap = getGlobalShareScope();\n          let isAllSharedNotUsed = true;\n          const needDeleteKeys = [];\n          Object.keys(globalShareScopeMap).forEach((instId) => {\n            const shareScopeMap = globalShareScopeMap[instId];\n            shareScopeMap && Object.keys(shareScopeMap).forEach((shareScope) => {\n              const shareScopeVal = shareScopeMap[shareScope];\n              shareScopeVal && Object.keys(shareScopeVal).forEach((shareName) => {\n                const sharedPkgs = shareScopeVal[shareName];\n                sharedPkgs && Object.keys(sharedPkgs).forEach((shareVersion) => {\n                  const shared = sharedPkgs[shareVersion];\n                  if (shared && typeof shared === 'object' && shared.from === remoteInfo.name) {\n                    if (shared.loaded || shared.loading) {\n                      shared.useIn = shared.useIn.filter((usedHostName) => usedHostName !== remoteInfo.name);\n                      if (shared.useIn.length) {\n                        isAllSharedNotUsed = false;\n                      } else {\n                        needDeleteKeys.push([\n                          instId,\n                          shareScope,\n                          shareName,\n                          shareVersion\n                        ]);\n                      }\n                    } else {\n                      needDeleteKeys.push([\n                        instId,\n                        shareScope,\n                        shareName,\n                        shareVersion\n                      ]);\n                    }\n                  }\n                });\n              });\n            });\n          });\n          if (isAllSharedNotUsed) {\n            remoteIns.shareScopeMap = {};\n            delete globalShareScopeMap[remoteInsId];\n          }\n          needDeleteKeys.forEach(([insId, shareScope, shareName, shareVersion]) => {\n            var _globalShareScopeMap_insId_shareScope_shareName, _globalShareScopeMap_insId_shareScope, _globalShareScopeMap_insId;\n            (_globalShareScopeMap_insId = globalShareScopeMap[insId]) == null ? true : (_globalShareScopeMap_insId_shareScope = _globalShareScopeMap_insId[shareScope]) == null ? true : (_globalShareScopeMap_insId_shareScope_shareName = _globalShareScopeMap_insId_shareScope[shareName]) == null ? true : delete _globalShareScopeMap_insId_shareScope_shareName[shareVersion];\n          });\n          globalThis.__FEDERATION__.__INSTANCES__.splice(remoteInsIndex, 1);\n        }\n        const { hostGlobalSnapshot } = getGlobalRemoteInfo(remote, host);\n        if (hostGlobalSnapshot) {\n          const remoteKey = hostGlobalSnapshot && 'remotesInfo' in hostGlobalSnapshot && hostGlobalSnapshot.remotesInfo && getInfoWithoutType(hostGlobalSnapshot.remotesInfo, remote.name).key;\n          if (remoteKey) {\n            delete hostGlobalSnapshot.remotesInfo[remoteKey];\n            if (//eslint-disable-next-line no-extra-boolean-cast\n              Boolean(Global.__FEDERATION__.__MANIFEST_LOADING__[remoteKey])) {\n              delete Global.__FEDERATION__.__MANIFEST_LOADING__[remoteKey];\n            }\n          }\n        }\n        host.moduleCache.delete(remote.name);\n      }\n    } catch (err) {\n      console.log('removeRemote fail: ', err);\n    }\n  }\n  constructor(host) {\n    this.hooks = new PluginSystem({\n      beforeRegisterRemote: new SyncWaterfallHook('beforeRegisterRemote'),\n      registerRemote: new SyncWaterfallHook('registerRemote'),\n      beforeRequest: new AsyncWaterfallHook('beforeRequest'),\n      onLoad: new AsyncHook('onLoad'),\n      handlePreloadModule: new SyncHook('handlePreloadModule'),\n      errorLoadRemote: new AsyncHook('errorLoadRemote'),\n      beforePreloadRemote: new AsyncHook('beforePreloadRemote'),\n      generatePreloadAssets: new AsyncHook('generatePreloadAssets'),\n      // not used yet\n      afterPreloadRemote: new AsyncHook(),\n      loadEntry: new AsyncHook()\n    });\n    this.host = host;\n    this.idToRemoteMap = {};\n  }\n}\n\nclass FederationHost {\n  initOptions(userOptions) {\n    this.registerPlugins(userOptions.plugins);\n    const options = this.formatOptions(this.options, userOptions);\n    this.options = options;\n    return options;\n  }\n  async loadShare(pkgName, extraOptions) {\n    return this.sharedHandler.loadShare(pkgName, extraOptions);\n  }\n  // The lib function will only be available if the shared set by eager or runtime init is set or the shared is successfully loaded.\n  // 1. If the loaded shared already exists globally, then it will be reused\n  // 2. If lib exists in local shared, it will be used directly\n  // 3. If the local get returns something other than Promise, then it will be used directly\n  loadShareSync(pkgName, extraOptions) {\n    return this.sharedHandler.loadShareSync(pkgName, extraOptions);\n  }\n  initializeSharing(shareScopeName = DEFAULT_SCOPE, extraOptions) {\n    return this.sharedHandler.initializeSharing(shareScopeName, extraOptions);\n  }\n  initRawContainer(name, url, container) {\n    const remoteInfo = getRemoteInfo({\n      name,\n      entry: url\n    });\n    const module = new Module({\n      host: this,\n      remoteInfo\n    });\n    module.remoteEntryExports = container;\n    this.moduleCache.set(name, module);\n    return module;\n  }\n  // eslint-disable-next-line max-lines-per-function\n  // eslint-disable-next-line @typescript-eslint/member-ordering\n  async loadRemote(id, options) {\n    return this.remoteHandler.loadRemote(id, options);\n  }\n  // eslint-disable-next-line @typescript-eslint/member-ordering\n  async preloadRemote(preloadOptions) {\n    return this.remoteHandler.preloadRemote(preloadOptions);\n  }\n  initShareScopeMap(scopeName, shareScope, extraOptions = {}) {\n    this.sharedHandler.initShareScopeMap(scopeName, shareScope, extraOptions);\n  }\n  formatOptions(globalOptions, userOptions) {\n    const { shared } = formatShareConfigs(globalOptions, userOptions);\n    const { userOptions: userOptionsRes, options: globalOptionsRes } = this.hooks.lifecycle.beforeInit.emit({\n      origin: this,\n      userOptions,\n      options: globalOptions,\n      shareInfo: shared\n    });\n    const remotes = this.remoteHandler.formatAndRegisterRemote(globalOptionsRes, userOptionsRes);\n    const { shared: handledShared } = this.sharedHandler.registerShared(globalOptionsRes, userOptionsRes);\n    const plugins = [\n      ...globalOptionsRes.plugins\n    ];\n    if (userOptionsRes.plugins) {\n      userOptionsRes.plugins.forEach((plugin) => {\n        if (!plugins.includes(plugin)) {\n          plugins.push(plugin);\n        }\n      });\n    }\n    const optionsRes = _extends({}, globalOptions, userOptions, {\n      plugins,\n      remotes,\n      shared: handledShared\n    });\n    this.hooks.lifecycle.init.emit({\n      origin: this,\n      options: optionsRes\n    });\n    return optionsRes;\n  }\n  registerPlugins(plugins) {\n    const pluginRes = registerPlugins$1(plugins, [\n      this.hooks,\n      this.remoteHandler.hooks,\n      this.sharedHandler.hooks,\n      this.snapshotHandler.hooks,\n      this.loaderHook\n    ]);\n    // Merge plugin\n    this.options.plugins = this.options.plugins.reduce((res, plugin) => {\n      if (!plugin) return res;\n      if (res && !res.find((item) => item.name === plugin.name)) {\n        res.push(plugin);\n      }\n      return res;\n    }, pluginRes || []);\n  }\n  registerRemotes(remotes, options) {\n    return this.remoteHandler.registerRemotes(remotes, options);\n  }\n  constructor(userOptions) {\n    this.hooks = new PluginSystem({\n      beforeInit: new SyncWaterfallHook('beforeInit'),\n      init: new SyncHook(),\n      // maybe will change, temporarily for internal use only\n      beforeInitContainer: new AsyncWaterfallHook('beforeInitContainer'),\n      // maybe will change, temporarily for internal use only\n      initContainer: new AsyncWaterfallHook('initContainer')\n    });\n    this.version = \"0.6.10\";\n    this.moduleCache = new Map();\n    this.loaderHook = new PluginSystem({\n      // FIXME: may not be suitable , not open to the public yet\n      getModuleInfo: new SyncHook(),\n      createScript: new SyncHook(),\n      createLink: new SyncHook(),\n      // only work for manifest , so not open to the public yet\n      fetch: new AsyncHook()\n    });\n    // TODO: Validate the details of the options\n    // Initialize options with default values\n    const defaultOptions = {\n      id: getBuilderId(),\n      name: userOptions.name,\n      plugins: [\n        snapshotPlugin(),\n        generatePreloadAssetsPlugin()\n      ],\n      remotes: [],\n      shared: {},\n      inBrowser: isBrowserEnv()\n    };\n    this.name = userOptions.name;\n    this.options = defaultOptions;\n    this.snapshotHandler = new SnapshotHandler(this);\n    this.sharedHandler = new SharedHandler(this);\n    this.remoteHandler = new RemoteHandler(this);\n    this.shareScopeMap = this.sharedHandler.shareScopeMap;\n    this.registerPlugins([\n      ...defaultOptions.plugins,\n      ...userOptions.plugins || []\n    ]);\n    this.options = this.formatOptions(defaultOptions, userOptions);\n  }\n}\n\nlet FederationInstance = null;\nfunction init(options) {\n  // Ensure that init is executed only once\n  if (FederationInstance) return FederationInstance;\n  // Retrieve the same instance with the same name\n  const instance = getGlobalFederationInstance(options.name, options.version);\n  if (!instance) {\n    // Retrieve debug constructor\n    const FederationConstructor = getGlobalFederationConstructor() || FederationHost;\n    FederationInstance = new FederationConstructor(options);\n    setGlobalFederationInstance(FederationInstance);\n    return FederationInstance;\n  } else {\n    // Merge options\n    instance.initOptions(options);\n    if (!FederationInstance) {\n      FederationInstance = instance;\n    }\n    return instance;\n  }\n}\nfunction loadRemote(...args) {\n  assert(FederationInstance, \"Please call init first\");\n  const loadRemote1 = FederationInstance.loadRemote;\n  // eslint-disable-next-line prefer-spread\n  return loadRemote1.apply(FederationInstance, args);\n}\nfunction loadShare(...args) {\n  assert(FederationInstance, \"Please call init first\");\n  // eslint-disable-next-line prefer-spread\n  const loadShare1 = FederationInstance.loadShare;\n  return loadShare1.apply(FederationInstance, args);\n}\nfunction loadShareSync(...args) {\n  assert(FederationInstance, \"Please call init first\");\n  const loadShareSync1 = FederationInstance.loadShareSync;\n  // eslint-disable-next-line prefer-spread\n  return loadShareSync1.apply(FederationInstance, args);\n}\nfunction preloadRemote(...args) {\n  assert(FederationInstance, \"Please call init first\");\n  // eslint-disable-next-line prefer-spread\n  return FederationInstance.preloadRemote.apply(FederationInstance, args);\n}\nfunction registerRemotes(...args) {\n  assert(FederationInstance, \"Please call init first\");\n  // eslint-disable-next-line prefer-spread\n  return FederationInstance.registerRemotes.apply(FederationInstance, args);\n}\nfunction registerPlugins(...args) {\n  assert(FederationInstance, \"Please call init first\");\n  // eslint-disable-next-line prefer-spread\n  return FederationInstance.registerPlugins.apply(FederationInstance, args);\n}\nfunction getInstance() {\n  return FederationInstance;\n}\n// Inject for debug\nsetGlobalFederationConstructor(FederationHost);\n\nexport { FederationHost, Module, getInstance, getRemoteEntry, getRemoteInfo, init, loadRemote, loadShare, loadShareSync, preloadRemote, registerPlugins, registerRemotes };\n","export const shareGlobalName = 'EMP_SHARE_RUNTIME'\n","function _extends() {\n    _extends = Object.assign || function assign(target) {\n        for(var i = 1; i < arguments.length; i++){\n            var source = arguments[i];\n            for(var key in source)if (Object.prototype.hasOwnProperty.call(source, key)) target[key] = source[key];\n        }\n        return target;\n    };\n    return _extends.apply(this, arguments);\n}\n\nexport { _extends as _ };\n","import {shareGlobalName} from 'src/helper/config'\nimport {MFRuntime, MFSDK} from 'src/helper/moduleFederation'\nwindow[shareGlobalName] = {\n  MFRuntime,\n  MFSDK,\n}\nexport {MFRuntime, MFSDK}\n"]}